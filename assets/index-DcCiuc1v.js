function u2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function d2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yv={exports:{}},Jc={},vv={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),h2=Symbol.for("react.portal"),f2=Symbol.for("react.fragment"),m2=Symbol.for("react.strict_mode"),p2=Symbol.for("react.profiler"),g2=Symbol.for("react.provider"),y2=Symbol.for("react.context"),v2=Symbol.for("react.forward_ref"),x2=Symbol.for("react.suspense"),_2=Symbol.for("react.memo"),w2=Symbol.for("react.lazy"),pg=Symbol.iterator;function E2(t){return t===null||typeof t!="object"?null:(t=pg&&t[pg]||t["@@iterator"],typeof t=="function"?t:null)}var xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_v=Object.assign,wv={};function Fi(t,e,n){this.props=t,this.context=e,this.refs=wv,this.updater=n||xv}Fi.prototype.isReactComponent={};Fi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ev(){}Ev.prototype=Fi.prototype;function xf(t,e,n){this.props=t,this.context=e,this.refs=wv,this.updater=n||xv}var _f=xf.prototype=new Ev;_f.constructor=xf;_v(_f,Fi.prototype);_f.isPureReactComponent=!0;var gg=Array.isArray,bv=Object.prototype.hasOwnProperty,wf={current:null},Iv={key:!0,ref:!0,__self:!0,__source:!0};function Tv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bv.call(e,r)&&!Iv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ba,type:t,key:i,ref:o,props:s,_owner:wf.current}}function b2(t,e){return{$$typeof:ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ef(t){return typeof t=="object"&&t!==null&&t.$$typeof===ba}function I2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yg=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I2(""+t.key):e.toString(36)}function Dl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ba:case h2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+id(o,0):r,gg(s)?(n="",t!=null&&(n=t.replace(yg,"$&/")+"/"),Dl(s,e,n,"",function(d){return d})):s!=null&&(Ef(s)&&(s=b2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",gg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+id(i,c);o+=Dl(i,e,n,u,s)}else if(u=E2(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+id(i,c++),o+=Dl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cl(t,e,n){if(t==null)return t;var r=[],s=0;return Dl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function T2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},Ol={transition:null},S2={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:wf};function Sv(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:cl,forEach:function(t,e,n){cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cl(t,function(){e++}),e},toArray:function(t){return cl(t,function(e){return e})||[]},only:function(t){if(!Ef(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Fi;de.Fragment=f2;de.Profiler=p2;de.PureComponent=xf;de.StrictMode=m2;de.Suspense=x2;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S2;de.act=Sv;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_v({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=wf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)bv.call(e,u)&&!Iv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ba,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:y2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g2,_context:t},t.Consumer=t};de.createElement=Tv;de.createFactory=function(t){var e=Tv.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:v2,render:t}};de.isValidElement=Ef;de.lazy=function(t){return{$$typeof:w2,_payload:{_status:-1,_result:t},_init:T2}};de.memo=function(t,e){return{$$typeof:_2,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};de.unstable_act=Sv;de.useCallback=function(t,e){return Rt.current.useCallback(t,e)};de.useContext=function(t){return Rt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Rt.current.useEffect(t,e)};de.useId=function(){return Rt.current.useId()};de.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Rt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};de.useRef=function(t){return Rt.current.useRef(t)};de.useState=function(t){return Rt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Rt.current.useTransition()};de.version="18.3.1";vv.exports=de;var A=vv.exports;const Pr=d2(A),N2=u2({__proto__:null,default:Pr},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2=A,k2=Symbol.for("react.element"),A2=Symbol.for("react.fragment"),P2=Object.prototype.hasOwnProperty,R2=C2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j2={key:!0,ref:!0,__self:!0,__source:!0};function Nv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)P2.call(e,r)&&!j2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:k2,type:t,key:i,ref:o,props:s,_owner:R2.current}}Jc.Fragment=A2;Jc.jsx=Nv;Jc.jsxs=Nv;yv.exports=Jc;var a=yv.exports,Cv={exports:{}},Jt={},kv={exports:{}},Av={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,q){var Y=M.length;M.push(q);e:for(;0<Y;){var X=Y-1>>>1,re=M[X];if(0<s(re,q))M[X]=q,M[Y]=re,Y=X;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var q=M[0],Y=M.pop();if(Y!==q){M[0]=Y;e:for(var X=0,re=M.length,ue=re>>>1;X<ue;){var ge=2*(X+1)-1,De=M[ge],bt=ge+1,Re=M[bt];if(0>s(De,Y))bt<re&&0>s(Re,De)?(M[X]=Re,M[bt]=Y,X=bt):(M[X]=De,M[ge]=Y,X=ge);else if(bt<re&&0>s(Re,Y))M[X]=Re,M[bt]=Y,X=bt;else break e}}return q}function s(M,q){var Y=M.sortIndex-q.sortIndex;return Y!==0?Y:M.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,g=3,x=!1,C=!1,P=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=M)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function D(M){if(P=!1,S(M),!C)if(n(u)!==null)C=!0,z(F);else{var q=n(d);q!==null&&G(D,q.startTime-M)}}function F(M,q){C=!1,P&&(P=!1,w(y),y=-1),x=!0;var Y=g;try{for(S(q),p=n(u);p!==null&&(!(p.expirationTime>q)||M&&!I());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var re=X(p.expirationTime<=q);q=t.unstable_now(),typeof re=="function"?p.callback=re:p===n(u)&&r(u),S(q)}else r(u);p=n(u)}if(p!==null)var ue=!0;else{var ge=n(d);ge!==null&&G(D,ge.startTime-q),ue=!1}return ue}finally{p=null,g=Y,x=!1}}var R=!1,b=null,y=-1,T=5,N=-1;function I(){return!(t.unstable_now()-N<T)}function k(){if(b!==null){var M=t.unstable_now();N=M;var q=!0;try{q=b(!0,M)}finally{q?v():(R=!1,b=null)}}else R=!1}var v;if(typeof E=="function")v=function(){E(k)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,L=H.port2;H.port1.onmessage=k,v=function(){L.postMessage(null)}}else v=function(){j(k,0)};function z(M){b=M,R||(R=!0,v())}function G(M,q){y=j(function(){M(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){C||x||(C=!0,z(F))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var Y=g;g=q;try{return M()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=g;g=M;try{return q()}finally{g=Y}},t.unstable_scheduleCallback=function(M,q,Y){var X=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,M){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Y+re,M={id:f++,callback:q,priorityLevel:M,startTime:Y,expirationTime:re,sortIndex:-1},Y>X?(M.sortIndex=Y,e(d,M),n(u)===null&&M===n(d)&&(P?(w(y),y=-1):P=!0,G(D,Y-X))):(M.sortIndex=re,e(u,M),C||x||(C=!0,z(F))),M},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(M){var q=g;return function(){var Y=g;g=q;try{return M.apply(this,arguments)}finally{g=Y}}}})(Av);kv.exports=Av;var D2=kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2=A,Xt=D2;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pv=new Set,Ko={};function Os(t,e){bi(t,e),bi(t+"Capture",e)}function bi(t,e){for(Ko[t]=e,t=0;t<e.length;t++)Pv.add(e[t])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qd=Object.prototype.hasOwnProperty,L2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vg={},xg={};function M2(t){return Qd.call(xg,t)?!0:Qd.call(vg,t)?!1:L2.test(t)?xg[t]=!0:(vg[t]=!0,!1)}function V2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F2(t,e,n,r){if(e===null||typeof e>"u"||V2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bf=/[\-:]([a-z])/g;function If(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bf,If);ct[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bf,If);ct[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bf,If);ct[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tf(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F2(e,n,s,r)&&(n=null),r||s===null?M2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=O2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),Sf=Symbol.for("react.strict_mode"),Yd=Symbol.for("react.profiler"),Rv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),Xd=Symbol.for("react.suspense"),Jd=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),Dv=Symbol.for("react.offscreen"),_g=Symbol.iterator;function uo(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,od;function wo(t){if(od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);od=e&&e[1]||""}return`
`+od+t}var ad=!1;function ld(t,e){if(!t||ad)return"";ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wo(t):""}function U2(t){switch(t.tag){case 5:return wo(t.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function Zd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ti:return"Fragment";case ei:return"Portal";case Yd:return"Profiler";case Sf:return"StrictMode";case Xd:return"Suspense";case Jd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jv:return(t.displayName||"Context")+".Consumer";case Rv:return(t._context.displayName||"Context")+".Provider";case Nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cf:return e=t.displayName||null,e!==null?e:Zd(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return Zd(t(e))}catch{}}return null}function $2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zd(e);case 8:return e===Sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ov(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B2(t){var e=Ov(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dl(t){t._valueTracker||(t._valueTracker=B2(t))}function Lv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ov(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eh(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mv(t,e){e=e.checked,e!=null&&Tf(t,"checked",e,!1)}function th(t,e){Mv(t,e);var n=Wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nh(t,e.type,n):e.hasOwnProperty("defaultValue")&&nh(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nh(t,e,n){(e!=="number"||nc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eo=Array.isArray;function fi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Eo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function Vv(t,e){var n=Wr(e.value),r=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,Uv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z2=["Webkit","ms","Moz","O"];Object.keys(Po).forEach(function(t){z2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Po[e]=Po[t]})});function $v(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Po.hasOwnProperty(t)&&Po[t]?(""+e).trim():e+"px"}function Bv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$v(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var q2=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ih(t,e){if(e){if(q2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=null;function kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lh=null,mi=null,pi=null;function Tg(t){if(t=Sa(t)){if(typeof lh!="function")throw Error(K(280));var e=t.stateNode;e&&(e=ru(e),lh(t.stateNode,t.type,e))}}function zv(t){mi?pi?pi.push(t):pi=[t]:mi=t}function qv(){if(mi){var t=mi,e=pi;if(pi=mi=null,Tg(t),e)for(t=0;t<e.length;t++)Tg(e[t])}}function Wv(t,e){return t(e)}function Hv(){}var cd=!1;function Kv(t,e,n){if(cd)return t(e,n);cd=!0;try{return Wv(t,e,n)}finally{cd=!1,(mi!==null||pi!==null)&&(Hv(),qv())}}function Qo(t,e){var n=t.stateNode;if(n===null)return null;var r=ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var ch=!1;if(Jn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){ch=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{ch=!1}function W2(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ro=!1,rc=null,sc=!1,uh=null,H2={onError:function(t){Ro=!0,rc=t}};function K2(t,e,n,r,s,i,o,c,u){Ro=!1,rc=null,W2.apply(H2,arguments)}function G2(t,e,n,r,s,i,o,c,u){if(K2.apply(this,arguments),Ro){if(Ro){var d=rc;Ro=!1,rc=null}else throw Error(K(198));sc||(sc=!0,uh=d)}}function Ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sg(t){if(Ls(t)!==t)throw Error(K(188))}function Q2(t){var e=t.alternate;if(!e){if(e=Ls(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sg(s),t;if(i===r)return Sg(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Qv(t){return t=Q2(t),t!==null?Yv(t):null}function Yv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yv(t);if(e!==null)return e;t=t.sibling}return null}var Xv=Xt.unstable_scheduleCallback,Ng=Xt.unstable_cancelCallback,Y2=Xt.unstable_shouldYield,X2=Xt.unstable_requestPaint,ze=Xt.unstable_now,J2=Xt.unstable_getCurrentPriorityLevel,Af=Xt.unstable_ImmediatePriority,Jv=Xt.unstable_UserBlockingPriority,ic=Xt.unstable_NormalPriority,Z2=Xt.unstable_LowPriority,Zv=Xt.unstable_IdlePriority,Zc=null,Cn=null;function eb(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Zc,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:rb,tb=Math.log,nb=Math.LN2;function rb(t){return t>>>=0,t===0?32:31-(tb(t)/nb|0)|0}var fl=64,ml=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=bo(c):(i&=o,i!==0&&(r=bo(i)))}else o=n&~s,o!==0?r=bo(o):i!==0&&(r=bo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),s=1<<n,r|=t[n],e&=~s;return r}function sb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ib(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=sb(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ex(){var t=fl;return fl<<=1,!(fl&4194240)&&(fl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function ob(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nx,Rf,rx,sx,ix,hh=!1,pl=[],Rr=null,jr=null,Dr=null,Yo=new Map,Xo=new Map,wr=[],ab="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cg(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Sa(e),e!==null&&Rf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lb(t,e,n,r,s){switch(e){case"focusin":return Rr=fo(Rr,t,e,n,r,s),!0;case"dragenter":return jr=fo(jr,t,e,n,r,s),!0;case"mouseover":return Dr=fo(Dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Yo.set(i,fo(Yo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xo.set(i,fo(Xo.get(i)||null,t,e,n,r,s)),!0}return!1}function ox(t){var e=fs(t.target);if(e!==null){var n=Ls(e);if(n!==null){if(e=n.tag,e===13){if(e=Gv(n),e!==null){t.blockedOn=e,ix(t.priority,function(){rx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ll(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ah=r,n.target.dispatchEvent(r),ah=null}else return e=Sa(n),e!==null&&Rf(e),t.blockedOn=n,!1;e.shift()}return!0}function kg(t,e,n){Ll(t)&&n.delete(e)}function cb(){hh=!1,Rr!==null&&Ll(Rr)&&(Rr=null),jr!==null&&Ll(jr)&&(jr=null),Dr!==null&&Ll(Dr)&&(Dr=null),Yo.forEach(kg),Xo.forEach(kg)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,hh||(hh=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,cb)))}function Jo(t){function e(s){return mo(s,t)}if(0<pl.length){mo(pl[0],t);for(var n=1;n<pl.length;n++){var r=pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&mo(Rr,t),jr!==null&&mo(jr,t),Dr!==null&&mo(Dr,t),Yo.forEach(e),Xo.forEach(e),n=0;n<wr.length;n++)r=wr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wr.length&&(n=wr[0],n.blockedOn===null);)ox(n),n.blockedOn===null&&wr.shift()}var gi=ar.ReactCurrentBatchConfig,ac=!0;function ub(t,e,n,r){var s=we,i=gi.transition;gi.transition=null;try{we=1,jf(t,e,n,r)}finally{we=s,gi.transition=i}}function db(t,e,n,r){var s=we,i=gi.transition;gi.transition=null;try{we=4,jf(t,e,n,r)}finally{we=s,gi.transition=i}}function jf(t,e,n,r){if(ac){var s=fh(t,e,n,r);if(s===null)_d(t,e,r,lc,n),Cg(t,r);else if(lb(s,t,e,n,r))r.stopPropagation();else if(Cg(t,r),e&4&&-1<ab.indexOf(t)){for(;s!==null;){var i=Sa(s);if(i!==null&&nx(i),i=fh(t,e,n,r),i===null&&_d(t,e,r,lc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _d(t,e,r,null,n)}}var lc=null;function fh(t,e,n,r){if(lc=null,t=kf(r),t=fs(t),t!==null)if(e=Ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lc=t,null}function ax(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J2()){case Af:return 1;case Jv:return 4;case ic:case Z2:return 16;case Zv:return 536870912;default:return 16}default:return 16}}var Nr=null,Df=null,Ml=null;function lx(){if(Ml)return Ml;var t,e=Df,n=e.length,r,s="value"in Nr?Nr.value:Nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ml=s.slice(t,1<r?1-r:void 0)}function Vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function Ag(){return!1}function Zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gl:Ag,this.isPropagationStopped=Ag,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),e}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Of=Zt(Ui),Ta=Ve({},Ui,{view:0,detail:0}),hb=Zt(Ta),dd,hd,po,eu=Ve({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(dd=t.screenX-po.screenX,hd=t.screenY-po.screenY):hd=dd=0,po=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),Pg=Zt(eu),fb=Ve({},eu,{dataTransfer:0}),mb=Zt(fb),pb=Ve({},Ta,{relatedTarget:0}),fd=Zt(pb),gb=Ve({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),yb=Zt(gb),vb=Ve({},Ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xb=Zt(vb),_b=Ve({},Ui,{data:0}),Rg=Zt(_b),wb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ib(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bb[t])?!!e[t]:!1}function Lf(){return Ib}var Tb=Ve({},Ta,{key:function(t){if(t.key){var e=wb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lf,charCode:function(t){return t.type==="keypress"?Vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sb=Zt(Tb),Nb=Ve({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jg=Zt(Nb),Cb=Ve({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lf}),kb=Zt(Cb),Ab=Ve({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pb=Zt(Ab),Rb=Ve({},eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jb=Zt(Rb),Db=[9,13,27,32],Mf=Jn&&"CompositionEvent"in window,jo=null;Jn&&"documentMode"in document&&(jo=document.documentMode);var Ob=Jn&&"TextEvent"in window&&!jo,cx=Jn&&(!Mf||jo&&8<jo&&11>=jo),Dg=" ",Og=!1;function ux(t,e){switch(t){case"keyup":return Db.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ni=!1;function Lb(t,e){switch(t){case"compositionend":return dx(e);case"keypress":return e.which!==32?null:(Og=!0,Dg);case"textInput":return t=e.data,t===Dg&&Og?null:t;default:return null}}function Mb(t,e){if(ni)return t==="compositionend"||!Mf&&ux(t,e)?(t=lx(),Ml=Df=Nr=null,ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cx&&e.locale!=="ko"?null:e.data;default:return null}}var Vb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vb[t.type]:e==="textarea"}function hx(t,e,n,r){zv(r),e=cc(e,"onChange"),0<e.length&&(n=new Of("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Do=null,Zo=null;function Fb(t){bx(t,0)}function tu(t){var e=ii(t);if(Lv(e))return t}function Ub(t,e){if(t==="change")return e}var fx=!1;if(Jn){var md;if(Jn){var pd="oninput"in document;if(!pd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),pd=typeof Mg.oninput=="function"}md=pd}else md=!1;fx=md&&(!document.documentMode||9<document.documentMode)}function Vg(){Do&&(Do.detachEvent("onpropertychange",mx),Zo=Do=null)}function mx(t){if(t.propertyName==="value"&&tu(Zo)){var e=[];hx(e,Zo,t,kf(t)),Kv(Fb,e)}}function $b(t,e,n){t==="focusin"?(Vg(),Do=e,Zo=n,Do.attachEvent("onpropertychange",mx)):t==="focusout"&&Vg()}function Bb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(Zo)}function zb(t,e){if(t==="click")return tu(e)}function qb(t,e){if(t==="input"||t==="change")return tu(e)}function Wb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:Wb;function ea(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qd.call(e,s)||!En(t[s],e[s]))return!1}return!0}function Fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,e){var n=Fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fg(n)}}function px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gx(){for(var t=window,e=nc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nc(t.document)}return e}function Vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hb(t){var e=gx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&px(n.ownerDocument.documentElement,n)){if(r!==null&&Vf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ug(n,i);var o=Ug(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kb=Jn&&"documentMode"in document&&11>=document.documentMode,ri=null,mh=null,Oo=null,ph=!1;function $g(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ph||ri==null||ri!==nc(r)||(r=ri,"selectionStart"in r&&Vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&ea(Oo,r)||(Oo=r,r=cc(mh,"onSelect"),0<r.length&&(e=new Of("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ri)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var si={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},gd={},yx={};Jn&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function nu(t){if(gd[t])return gd[t];if(!si[t])return t;var e=si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yx)return gd[t]=e[n];return t}var vx=nu("animationend"),xx=nu("animationiteration"),_x=nu("animationstart"),wx=nu("transitionend"),Ex=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(t,e){Ex.set(t,e),Os(e,[t])}for(var yd=0;yd<Bg.length;yd++){var vd=Bg[yd],Gb=vd.toLowerCase(),Qb=vd[0].toUpperCase()+vd.slice(1);Yr(Gb,"on"+Qb)}Yr(vx,"onAnimationEnd");Yr(xx,"onAnimationIteration");Yr(_x,"onAnimationStart");Yr("dblclick","onDoubleClick");Yr("focusin","onFocus");Yr("focusout","onBlur");Yr(wx,"onTransitionEnd");bi("onMouseEnter",["mouseout","mouseover"]);bi("onMouseLeave",["mouseout","mouseover"]);bi("onPointerEnter",["pointerout","pointerover"]);bi("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function zg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G2(r,e,void 0,t),t.currentTarget=null}function bx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;zg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;zg(s,c,d),i=u}}}if(sc)throw t=uh,sc=!1,uh=null,t}function Ne(t,e){var n=e[_h];n===void 0&&(n=e[_h]=new Set);var r=t+"__bubble";n.has(r)||(Ix(e,t,2,!1),n.add(r))}function xd(t,e,n){var r=0;e&&(r|=4),Ix(n,t,r,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function ta(t){if(!t[vl]){t[vl]=!0,Pv.forEach(function(n){n!=="selectionchange"&&(Yb.has(n)||xd(n,!1,t),xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,xd("selectionchange",!1,e))}}function Ix(t,e,n,r){switch(ax(e)){case 1:var s=ub;break;case 4:s=db;break;default:s=jf}n=s.bind(null,e,n,t),s=void 0,!ch||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _d(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=fs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Kv(function(){var d=i,f=kf(n),p=[];e:{var g=Ex.get(t);if(g!==void 0){var x=Of,C=t;switch(t){case"keypress":if(Vl(n)===0)break e;case"keydown":case"keyup":x=Sb;break;case"focusin":C="focus",x=fd;break;case"focusout":C="blur",x=fd;break;case"beforeblur":case"afterblur":x=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=mb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=kb;break;case vx:case xx:case _x:x=yb;break;case wx:x=Pb;break;case"scroll":x=hb;break;case"wheel":x=jb;break;case"copy":case"cut":case"paste":x=xb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=jg}var P=(e&4)!==0,j=!P&&t==="scroll",w=P?g!==null?g+"Capture":null:g;P=[];for(var E=d,S;E!==null;){S=E;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,w!==null&&(D=Qo(E,w),D!=null&&P.push(na(E,D,S)))),j)break;E=E.return}0<P.length&&(g=new x(g,C,null,n,f),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==ah&&(C=n.relatedTarget||n.fromElement)&&(fs(C)||C[Zn]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=d,C=C?fs(C):null,C!==null&&(j=Ls(C),C!==j||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=d),x!==C)){if(P=Pg,D="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(P=jg,D="onPointerLeave",w="onPointerEnter",E="pointer"),j=x==null?g:ii(x),S=C==null?g:ii(C),g=new P(D,E+"leave",x,n,f),g.target=j,g.relatedTarget=S,D=null,fs(f)===d&&(P=new P(w,E+"enter",C,n,f),P.target=S,P.relatedTarget=j,D=P),j=D,x&&C)t:{for(P=x,w=C,E=0,S=P;S;S=Ys(S))E++;for(S=0,D=w;D;D=Ys(D))S++;for(;0<E-S;)P=Ys(P),E--;for(;0<S-E;)w=Ys(w),S--;for(;E--;){if(P===w||w!==null&&P===w.alternate)break t;P=Ys(P),w=Ys(w)}P=null}else P=null;x!==null&&qg(p,g,x,P,!1),C!==null&&j!==null&&qg(p,j,C,P,!0)}}e:{if(g=d?ii(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var F=Ub;else if(Lg(g))if(fx)F=qb;else{F=Bb;var R=$b}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=zb);if(F&&(F=F(t,d))){hx(p,F,n,f);break e}R&&R(t,g,d),t==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&nh(g,"number",g.value)}switch(R=d?ii(d):window,t){case"focusin":(Lg(R)||R.contentEditable==="true")&&(ri=R,mh=d,Oo=null);break;case"focusout":Oo=mh=ri=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,$g(p,n,f);break;case"selectionchange":if(Kb)break;case"keydown":case"keyup":$g(p,n,f)}var b;if(Mf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ni?ux(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(cx&&n.locale!=="ko"&&(ni||y!=="onCompositionStart"?y==="onCompositionEnd"&&ni&&(b=lx()):(Nr=f,Df="value"in Nr?Nr.value:Nr.textContent,ni=!0)),R=cc(d,y),0<R.length&&(y=new Rg(y,t,null,n,f),p.push({event:y,listeners:R}),b?y.data=b:(b=dx(n),b!==null&&(y.data=b)))),(b=Ob?Lb(t,n):Mb(t,n))&&(d=cc(d,"onBeforeInput"),0<d.length&&(f=new Rg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=b))}bx(p,e)})}function na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qo(t,n),i!=null&&r.unshift(na(t,i,s)),i=Qo(t,e),i!=null&&r.push(na(t,i,s))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Qo(n,i),u!=null&&o.unshift(na(n,u,c))):s||(u=Qo(n,i),u!=null&&o.push(na(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function Wg(t){return(typeof t=="string"?t:""+t).replace(Xb,`
`).replace(Jb,"")}function xl(t,e,n){if(e=Wg(e),Wg(t)!==e&&n)throw Error(K(425))}function uc(){}var gh=null,yh=null;function vh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xh=typeof setTimeout=="function"?setTimeout:void 0,Zb=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(t){return Hg.resolve(null).then(t).catch(tI)}:xh;function tI(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jo(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Nn="__reactFiber$"+$i,ra="__reactProps$"+$i,Zn="__reactContainer$"+$i,_h="__reactEvents$"+$i,nI="__reactListeners$"+$i,rI="__reactHandles$"+$i;function fs(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zn]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[Nn])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function Sa(t){return t=t[Nn]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function ru(t){return t[ra]||null}var wh=[],oi=-1;function Xr(t){return{current:t}}function Ae(t){0>oi||(t.current=wh[oi],wh[oi]=null,oi--)}function Te(t,e){oi++,wh[oi]=t.current,t.current=e}var Hr={},wt=Xr(Hr),Ft=Xr(!1),bs=Hr;function Ii(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function dc(){Ae(Ft),Ae(wt)}function Gg(t,e,n){if(wt.current!==Hr)throw Error(K(168));Te(wt,e),Te(Ft,n)}function Tx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,$2(t)||"Unknown",s));return Ve({},n,r)}function hc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,bs=wt.current,Te(wt,t),Te(Ft,Ft.current),!0}function Qg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=Tx(t,e,bs),r.__reactInternalMemoizedMergedChildContext=t,Ae(Ft),Ae(wt),Te(wt,t)):Ae(Ft),Te(Ft,n)}var Bn=null,su=!1,Ed=!1;function Sx(t){Bn===null?Bn=[t]:Bn.push(t)}function sI(t){su=!0,Sx(t)}function Jr(){if(!Ed&&Bn!==null){Ed=!0;var t=0,e=we;try{var n=Bn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,su=!1}catch(s){throw Bn!==null&&(Bn=Bn.slice(t+1)),Xv(Af,Jr),s}finally{we=e,Ed=!1}}return null}var ai=[],li=0,fc=null,mc=0,tn=[],nn=0,Is=null,qn=1,Wn="";function cs(t,e){ai[li++]=mc,ai[li++]=fc,fc=t,mc=e}function Nx(t,e,n){tn[nn++]=qn,tn[nn++]=Wn,tn[nn++]=Is,Is=t;var r=qn;t=Wn;var s=32-xn(r)-1;r&=~(1<<s),n+=1;var i=32-xn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qn=1<<32-xn(e)+s|n<<s|r,Wn=i+t}else qn=1<<i|n<<s|r,Wn=t}function Ff(t){t.return!==null&&(cs(t,1),Nx(t,1,0))}function Uf(t){for(;t===fc;)fc=ai[--li],ai[li]=null,mc=ai[--li],ai[li]=null;for(;t===Is;)Is=tn[--nn],tn[nn]=null,Wn=tn[--nn],tn[nn]=null,qn=tn[--nn],tn[nn]=null}var Qt=null,Ht=null,je=!1,gn=null;function Cx(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Ht=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:qn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Ht=null,!0):!1;default:return!1}}function Eh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bh(t){if(je){var e=Ht;if(e){var n=e;if(!Yg(t,e)){if(Eh(t))throw Error(K(418));e=Or(n.nextSibling);var r=Qt;e&&Yg(t,e)?Cx(r,n):(t.flags=t.flags&-4097|2,je=!1,Qt=t)}}else{if(Eh(t))throw Error(K(418));t.flags=t.flags&-4097|2,je=!1,Qt=t}}}function Xg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function _l(t){if(t!==Qt)return!1;if(!je)return Xg(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vh(t.type,t.memoizedProps)),e&&(e=Ht)){if(Eh(t))throw kx(),Error(K(418));for(;e;)Cx(t,e),e=Or(e.nextSibling)}if(Xg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Qt?Or(t.stateNode.nextSibling):null;return!0}function kx(){for(var t=Ht;t;)t=Or(t.nextSibling)}function Ti(){Ht=Qt=null,je=!1}function $f(t){gn===null?gn=[t]:gn.push(t)}var iI=ar.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function wl(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jg(t){var e=t._init;return e(t._payload)}function Ax(t){function e(w,E){if(t){var S=w.deletions;S===null?(w.deletions=[E],w.flags|=16):S.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(w,E){return w=Fr(w,E),w.index=0,w.sibling=null,w}function i(w,E,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<E?(w.flags|=2,E):S):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,E,S,D){return E===null||E.tag!==6?(E=kd(S,w.mode,D),E.return=w,E):(E=s(E,S),E.return=w,E)}function u(w,E,S,D){var F=S.type;return F===ti?f(w,E,S.props.children,D,S.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===xr&&Jg(F)===E.type)?(D=s(E,S.props),D.ref=go(w,E,S),D.return=w,D):(D=Wl(S.type,S.key,S.props,null,w.mode,D),D.ref=go(w,E,S),D.return=w,D)}function d(w,E,S,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Ad(S,w.mode,D),E.return=w,E):(E=s(E,S.children||[]),E.return=w,E)}function f(w,E,S,D,F){return E===null||E.tag!==7?(E=ws(S,w.mode,D,F),E.return=w,E):(E=s(E,S),E.return=w,E)}function p(w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=kd(""+E,w.mode,S),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ul:return S=Wl(E.type,E.key,E.props,null,w.mode,S),S.ref=go(w,null,E),S.return=w,S;case ei:return E=Ad(E,w.mode,S),E.return=w,E;case xr:var D=E._init;return p(w,D(E._payload),S)}if(Eo(E)||uo(E))return E=ws(E,w.mode,S,null),E.return=w,E;wl(w,E)}return null}function g(w,E,S,D){var F=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:c(w,E,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ul:return S.key===F?u(w,E,S,D):null;case ei:return S.key===F?d(w,E,S,D):null;case xr:return F=S._init,g(w,E,F(S._payload),D)}if(Eo(S)||uo(S))return F!==null?null:f(w,E,S,D,null);wl(w,S)}return null}function x(w,E,S,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(S)||null,c(E,w,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ul:return w=w.get(D.key===null?S:D.key)||null,u(E,w,D,F);case ei:return w=w.get(D.key===null?S:D.key)||null,d(E,w,D,F);case xr:var R=D._init;return x(w,E,S,R(D._payload),F)}if(Eo(D)||uo(D))return w=w.get(S)||null,f(E,w,D,F,null);wl(E,D)}return null}function C(w,E,S,D){for(var F=null,R=null,b=E,y=E=0,T=null;b!==null&&y<S.length;y++){b.index>y?(T=b,b=null):T=b.sibling;var N=g(w,b,S[y],D);if(N===null){b===null&&(b=T);break}t&&b&&N.alternate===null&&e(w,b),E=i(N,E,y),R===null?F=N:R.sibling=N,R=N,b=T}if(y===S.length)return n(w,b),je&&cs(w,y),F;if(b===null){for(;y<S.length;y++)b=p(w,S[y],D),b!==null&&(E=i(b,E,y),R===null?F=b:R.sibling=b,R=b);return je&&cs(w,y),F}for(b=r(w,b);y<S.length;y++)T=x(b,w,y,S[y],D),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?y:T.key),E=i(T,E,y),R===null?F=T:R.sibling=T,R=T);return t&&b.forEach(function(I){return e(w,I)}),je&&cs(w,y),F}function P(w,E,S,D){var F=uo(S);if(typeof F!="function")throw Error(K(150));if(S=F.call(S),S==null)throw Error(K(151));for(var R=F=null,b=E,y=E=0,T=null,N=S.next();b!==null&&!N.done;y++,N=S.next()){b.index>y?(T=b,b=null):T=b.sibling;var I=g(w,b,N.value,D);if(I===null){b===null&&(b=T);break}t&&b&&I.alternate===null&&e(w,b),E=i(I,E,y),R===null?F=I:R.sibling=I,R=I,b=T}if(N.done)return n(w,b),je&&cs(w,y),F;if(b===null){for(;!N.done;y++,N=S.next())N=p(w,N.value,D),N!==null&&(E=i(N,E,y),R===null?F=N:R.sibling=N,R=N);return je&&cs(w,y),F}for(b=r(w,b);!N.done;y++,N=S.next())N=x(b,w,y,N.value,D),N!==null&&(t&&N.alternate!==null&&b.delete(N.key===null?y:N.key),E=i(N,E,y),R===null?F=N:R.sibling=N,R=N);return t&&b.forEach(function(k){return e(w,k)}),je&&cs(w,y),F}function j(w,E,S,D){if(typeof S=="object"&&S!==null&&S.type===ti&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ul:e:{for(var F=S.key,R=E;R!==null;){if(R.key===F){if(F=S.type,F===ti){if(R.tag===7){n(w,R.sibling),E=s(R,S.props.children),E.return=w,w=E;break e}}else if(R.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===xr&&Jg(F)===R.type){n(w,R.sibling),E=s(R,S.props),E.ref=go(w,R,S),E.return=w,w=E;break e}n(w,R);break}else e(w,R);R=R.sibling}S.type===ti?(E=ws(S.props.children,w.mode,D,S.key),E.return=w,w=E):(D=Wl(S.type,S.key,S.props,null,w.mode,D),D.ref=go(w,E,S),D.return=w,w=D)}return o(w);case ei:e:{for(R=S.key;E!==null;){if(E.key===R)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(w,E.sibling),E=s(E,S.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=Ad(S,w.mode,D),E.return=w,w=E}return o(w);case xr:return R=S._init,j(w,E,R(S._payload),D)}if(Eo(S))return C(w,E,S,D);if(uo(S))return P(w,E,S,D);wl(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(w,E.sibling),E=s(E,S),E.return=w,w=E):(n(w,E),E=kd(S,w.mode,D),E.return=w,w=E),o(w)):n(w,E)}return j}var Si=Ax(!0),Px=Ax(!1),pc=Xr(null),gc=null,ci=null,Bf=null;function zf(){Bf=ci=gc=null}function qf(t){var e=pc.current;Ae(pc),t._currentValue=e}function Ih(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yi(t,e){gc=t,Bf=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(Bf!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(gc===null)throw Error(K(308));ci=t,gc.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var ms=null;function Wf(t){ms===null?ms=[t]:ms.push(t)}function Rx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wf(e)):(n.next=s.next,s.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function Hf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,er(t,n)}return s=r.interleaved,s===null?(e.next=e,Wf(r)):(e.next=s.next,s.next=e),r.interleaved=e,er(t,n)}function Fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}function Zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yc(t,e,n,r){var s=t.updateQueue;_r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,x=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,P=c;switch(g=e,x=n,P.tag){case 1:if(C=P.payload,typeof C=="function"){p=C.call(x,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=P.payload,g=typeof C=="function"?C.call(x,p,g):C,g==null)break e;p=Ve({},p,g);break e;case 2:_r=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else x={eventTime:x,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=x,u=p):f=f.next=x,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ss|=o,t.lanes=o,t.memoizedState=p}}function ey(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Na={},kn=Xr(Na),sa=Xr(Na),ia=Xr(Na);function ps(t){if(t===Na)throw Error(K(174));return t}function Kf(t,e){switch(Te(ia,e),Te(sa,t),Te(kn,Na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sh(e,t)}Ae(kn),Te(kn,e)}function Ni(){Ae(kn),Ae(sa),Ae(ia)}function Dx(t){ps(ia.current);var e=ps(kn.current),n=sh(e,t.type);e!==n&&(Te(sa,t),Te(kn,n))}function Gf(t){sa.current===t&&(Ae(kn),Ae(sa))}var Le=Xr(0);function vc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bd=[];function Qf(){for(var t=0;t<bd.length;t++)bd[t]._workInProgressVersionPrimary=null;bd.length=0}var Ul=ar.ReactCurrentDispatcher,Id=ar.ReactCurrentBatchConfig,Ts=0,Me=null,Qe=null,Ze=null,xc=!1,Lo=!1,oa=0,oI=0;function mt(){throw Error(K(321))}function Yf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function Xf(t,e,n,r,s,i){if(Ts=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ul.current=t===null||t.memoizedState===null?uI:dI,t=n(r,s),Lo){i=0;do{if(Lo=!1,oa=0,25<=i)throw Error(K(301));i+=1,Ze=Qe=null,e.updateQueue=null,Ul.current=hI,t=n(r,s)}while(Lo)}if(Ul.current=_c,e=Qe!==null&&Qe.next!==null,Ts=0,Ze=Qe=Me=null,xc=!1,e)throw Error(K(300));return t}function Jf(){var t=oa!==0;return oa=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function an(){if(Qe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=Ze===null?Me.memoizedState:Ze.next;if(e!==null)Ze=e,Qe=t;else{if(t===null)throw Error(K(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function aa(t,e){return typeof e=="function"?e(t):e}function Td(t){var e=an(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Ts&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Me.lanes|=f,Ss|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,En(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,Ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sd(t){var e=an(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);En(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ox(){}function Lx(t,e){var n=Me,r=an(),s=e(),i=!En(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,Zf(Fx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,la(9,Vx.bind(null,n,r,s,e),void 0,null),et===null)throw Error(K(349));Ts&30||Mx(n,e,s)}return s}function Mx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vx(t,e,n,r){e.value=n,e.getSnapshot=r,Ux(e)&&$x(t)}function Fx(t,e,n){return n(function(){Ux(e)&&$x(t)})}function Ux(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function $x(t){var e=er(t,1);e!==null&&_n(e,t,1,-1)}function ty(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:t},e.queue=t,t=t.dispatch=cI.bind(null,Me,t),[e.memoizedState,t]}function la(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bx(){return an().memoizedState}function $l(t,e,n,r){var s=Sn();Me.flags|=t,s.memoizedState=la(1|e,n,void 0,r===void 0?null:r)}function iu(t,e,n,r){var s=an();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Yf(r,o.deps)){s.memoizedState=la(e,n,i,r);return}}Me.flags|=t,s.memoizedState=la(1|e,n,i,r)}function ny(t,e){return $l(8390656,8,t,e)}function Zf(t,e){return iu(2048,8,t,e)}function zx(t,e){return iu(4,2,t,e)}function qx(t,e){return iu(4,4,t,e)}function Wx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hx(t,e,n){return n=n!=null?n.concat([t]):null,iu(4,4,Wx.bind(null,e,t),n)}function em(){}function Kx(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gx(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qx(t,e,n){return Ts&21?(En(n,e)||(n=ex(),Me.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function aI(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Id.transition;Id.transition={};try{t(!1),e()}finally{we=n,Id.transition=r}}function Yx(){return an().memoizedState}function lI(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xx(t))Jx(e,n);else if(n=Rx(t,e,n,r),n!==null){var s=kt();_n(n,t,r,s),Zx(n,e,r)}}function cI(t,e,n){var r=Vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xx(t))Jx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,En(c,o)){var u=e.interleaved;u===null?(s.next=s,Wf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Rx(t,e,s,r),n!==null&&(s=kt(),_n(n,t,r,s),Zx(n,e,r))}}function Xx(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Jx(t,e){Lo=xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}var _c={readContext:on,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},uI={readContext:on,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:ny,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$l(4194308,4,Wx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $l(4194308,4,t,e)},useInsertionEffect:function(t,e){return $l(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lI.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:ty,useDebugValue:em,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=ty(!1),e=t[0];return t=aI.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Sn();if(je){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),et===null)throw Error(K(349));Ts&30||Mx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ny(Fx.bind(null,r,i,t),[t]),r.flags|=2048,la(9,Vx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sn(),e=et.identifierPrefix;if(je){var n=Wn,r=qn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dI={readContext:on,useCallback:Kx,useContext:on,useEffect:Zf,useImperativeHandle:Hx,useInsertionEffect:zx,useLayoutEffect:qx,useMemo:Gx,useReducer:Td,useRef:Bx,useState:function(){return Td(aa)},useDebugValue:em,useDeferredValue:function(t){var e=an();return Qx(e,Qe.memoizedState,t)},useTransition:function(){var t=Td(aa)[0],e=an().memoizedState;return[t,e]},useMutableSource:Ox,useSyncExternalStore:Lx,useId:Yx,unstable_isNewReconciler:!1},hI={readContext:on,useCallback:Kx,useContext:on,useEffect:Zf,useImperativeHandle:Hx,useInsertionEffect:zx,useLayoutEffect:qx,useMemo:Gx,useReducer:Sd,useRef:Bx,useState:function(){return Sd(aa)},useDebugValue:em,useDeferredValue:function(t){var e=an();return Qe===null?e.memoizedState=t:Qx(e,Qe.memoizedState,t)},useTransition:function(){var t=Sd(aa)[0],e=an().memoizedState;return[t,e]},useMutableSource:Ox,useSyncExternalStore:Lx,useId:Yx,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Th(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ou={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),s=Vr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(_n(e,t,s,r),Fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),s=Vr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(_n(e,t,s,r),Fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Vr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,r),e!==null&&(_n(e,t,r,n),Fl(e,t,r))}};function ry(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ea(n,r)||!ea(s,i):!0}function e_(t,e,n){var r=!1,s=Hr,i=e.contextType;return typeof i=="object"&&i!==null?i=on(i):(s=Ut(e)?bs:wt.current,r=e.contextTypes,i=(r=r!=null)?Ii(t,s):Hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ou,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function sy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ou.enqueueReplaceState(e,e.state,null)}function Sh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=on(i):(i=Ut(e)?bs:wt.current,s.context=Ii(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Th(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ou.enqueueReplaceState(s,s.state,null),yc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ci(t,e){try{var n="",r=e;do n+=U2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fI=typeof WeakMap=="function"?WeakMap:Map;function t_(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ec||(Ec=!0,Mh=r),Nh(t,e)},n}function n_(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nh(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=NI.bind(null,t,e,n),e.then(t,t))}function oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ay(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var mI=ar.ReactCurrentOwner,Vt=!1;function Nt(t,e,n,r){e.child=t===null?Px(e,null,n,r):Si(e,t.child,n,r)}function ly(t,e,n,r,s){n=n.render;var i=e.ref;return yi(e,s),r=Xf(t,e,n,r,i,s),n=Jf(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(je&&n&&Ff(e),e.flags|=1,Nt(t,e,r,s),e.child)}function cy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,r_(t,e,i,r,s)):(t=Wl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ea,n(o,r)&&t.ref===e.ref)return tr(t,e,s)}return e.flags|=1,t=Fr(i,r),t.ref=e.ref,t.return=e,e.child=t}function r_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ea(i,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,tr(t,e,s)}return Ch(t,e,n,r,s)}function s_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(di,Wt),Wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(di,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(di,Wt),Wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(di,Wt),Wt|=r;return Nt(t,e,s,n),e.child}function i_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ch(t,e,n,r,s){var i=Ut(n)?bs:wt.current;return i=Ii(e,i),yi(e,s),n=Xf(t,e,n,r,i,s),r=Jf(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(je&&r&&Ff(e),e.flags|=1,Nt(t,e,n,s),e.child)}function uy(t,e,n,r,s){if(Ut(n)){var i=!0;hc(e)}else i=!1;if(yi(e,s),e.stateNode===null)Bl(t,e),e_(e,n,r),Sh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=on(d):(d=Ut(n)?bs:wt.current,d=Ii(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&sy(e,o,r,d),_r=!1;var g=e.memoizedState;o.state=g,yc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Ft.current||_r?(typeof f=="function"&&(Th(e,n,f,r),u=e.memoizedState),(c=_r||ry(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:fn(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=on(u):(u=Ut(n)?bs:wt.current,u=Ii(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&sy(e,o,r,u),_r=!1,g=e.memoizedState,o.state=g,yc(e,r,o,s);var C=e.memoizedState;c!==p||g!==C||Ft.current||_r?(typeof x=="function"&&(Th(e,n,x,r),C=e.memoizedState),(d=_r||ry(e,n,d,r,g,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return kh(t,e,n,r,i,s)}function kh(t,e,n,r,s,i){i_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Qg(e,n,!1),tr(t,e,i);r=e.stateNode,mI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Si(e,t.child,null,i),e.child=Si(e,null,c,i)):Nt(t,e,c,i),e.memoizedState=r.state,s&&Qg(e,n,!0),e.child}function o_(t){var e=t.stateNode;e.pendingContext?Gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gg(t,e.context,!1),Kf(t,e.containerInfo)}function dy(t,e,n,r,s){return Ti(),$f(s),e.flags|=256,Nt(t,e,n,r),e.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Ph(t){return{baseLanes:t,cachePool:null,transitions:null}}function a_(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Le,s&1),t===null)return bh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cu(o,r,0,null),t=ws(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ph(n),e.memoizedState=Ah,t):tm(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return pI(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Fr(c,i):(i=ws(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ph(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ah,r}return i=t.child,t=i.sibling,r=Fr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tm(t,e){return e=cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function El(t,e,n,r){return r!==null&&$f(r),Si(e,t.child,null,n),t=tm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Nd(Error(K(422))),El(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cu({mode:"visible",children:r.children},s,0,null),i=ws(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Si(e,t.child,null,o),e.child.memoizedState=Ph(o),e.memoizedState=Ah,i);if(!(e.mode&1))return El(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(K(419)),r=Nd(i,r,void 0),El(t,e,o,r)}if(c=(o&t.childLanes)!==0,Vt||c){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,er(t,s),_n(r,t,s,-1))}return am(),r=Nd(Error(K(421))),El(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ht=Or(s.nextSibling),Qt=e,je=!0,gn=null,t!==null&&(tn[nn++]=qn,tn[nn++]=Wn,tn[nn++]=Is,qn=t.id,Wn=t.overflow,Is=e),e=tm(e,r.children),e.flags|=4096,e)}function hy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ih(t.return,e,n)}function Cd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function l_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Nt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hy(t,n,e);else if(t.tag===19)hy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cd(e,!0,n,null,i);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gI(t,e,n){switch(e.tag){case 3:o_(e),Ti();break;case 5:Dx(e);break;case 1:Ut(e.type)&&hc(e);break;case 4:Kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?a_(t,e,n):(Te(Le,Le.current&1),t=tr(t,e,n),t!==null?t.sibling:null);Te(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return l_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,s_(t,e,n)}return tr(t,e,n)}var c_,Rh,u_,d_;c_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rh=function(){};u_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ps(kn.current);var i=null;switch(n){case"input":s=eh(t,s),r=eh(t,r),i=[];break;case"select":s=Ve({},s,{value:void 0}),r=Ve({},r,{value:void 0}),i=[];break;case"textarea":s=rh(t,s),r=rh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uc)}ih(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ko.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ko.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ne("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};d_=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yI(t,e,n){var r=e.pendingProps;switch(Uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Ut(e.type)&&dc(),pt(e),null;case 3:return r=e.stateNode,Ni(),Ae(Ft),Ae(wt),Qf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Uh(gn),gn=null))),Rh(t,e),pt(e),null;case 5:Gf(e);var s=ps(ia.current);if(n=e.type,t!==null&&e.stateNode!=null)u_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return pt(e),null}if(t=ps(kn.current),_l(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nn]=e,r[ra]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Io.length;s++)Ne(Io[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":wg(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":bg(r,i),Ne("invalid",r)}ih(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,c,t),s=["children",""+c]):Ko.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":dl(r),Eg(r,i,!0);break;case"textarea":dl(r),Ig(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=uc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[ra]=r,c_(t,e,!1,!1),e.stateNode=t;e:{switch(o=oh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Io.length;s++)Ne(Io[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":wg(t,r),s=eh(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ve({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":bg(t,r),s=rh(t,r),Ne("invalid",t);break;default:s=r}ih(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Bv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Uv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Go(t,u):typeof u=="number"&&Go(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ko.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ne("scroll",t):u!=null&&Tf(t,i,u,o))}switch(n){case"input":dl(t),Eg(t,r,!1);break;case"textarea":dl(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fi(t,!!r.multiple,i,!1):r.defaultValue!=null&&fi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=uc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)d_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=ps(ia.current),ps(kn.current),_l(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(i=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return pt(e),null;case 13:if(Ae(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Ht!==null&&e.mode&1&&!(e.flags&128))kx(),Ti(),e.flags|=98560,i=!1;else if(i=_l(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Nn]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else gn!==null&&(Uh(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Ye===0&&(Ye=3):am())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Ni(),Rh(t,e),t===null&&ta(e.stateNode.containerInfo),pt(e),null;case 10:return qf(e.type._context),pt(e),null;case 17:return Ut(e.type)&&dc(),pt(e),null;case 19:if(Ae(Le),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yo(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vc(t),o!==null){for(e.flags|=128,yo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>ki&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=vc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return pt(e),null}else 2*ze()-i.renderingStartTime>ki&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=Le.current,Te(Le,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return om(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function vI(t,e){switch(Uf(e),e.tag){case 1:return Ut(e.type)&&dc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),Ae(Ft),Ae(wt),Qf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gf(e),null;case 13:if(Ae(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Le),null;case 4:return Ni(),null;case 10:return qf(e.type._context),null;case 22:case 23:return om(),null;case 24:return null;default:return null}}var bl=!1,vt=!1,xI=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function jh(t,e,n){try{n()}catch(r){$e(t,e,r)}}var fy=!1;function _I(t,e){if(gh=ac,t=gx(),Vf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yh={focusedElem:t,selectionRange:n},ac=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var P=C.memoizedProps,j=C.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?P:fn(e.type,P),j);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(D){$e(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return C=fy,fy=!1,C}function Mo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&jh(e,n,i)}s=s.next}while(s!==r)}}function au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function h_(t){var e=t.alternate;e!==null&&(t.alternate=null,h_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[ra],delete e[_h],delete e[nI],delete e[rI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function f_(t){return t.tag===5||t.tag===3||t.tag===4}function my(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||f_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uc));else if(r!==4&&(t=t.child,t!==null))for(Oh(t,e,n),t=t.sibling;t!==null;)Oh(t,e,n),t=t.sibling}function Lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}var nt=null,mn=!1;function yr(t,e,n){for(n=n.child;n!==null;)m_(t,e,n),n=n.sibling}function m_(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Zc,n)}catch{}switch(n.tag){case 5:vt||ui(n,e);case 6:var r=nt,s=mn;nt=null,yr(t,e,n),nt=r,mn=s,nt!==null&&(mn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(mn?(t=nt,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),Jo(t)):wd(nt,n.stateNode));break;case 4:r=nt,s=mn,nt=n.stateNode.containerInfo,mn=!0,yr(t,e,n),nt=r,mn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jh(n,e,o),s=s.next}while(s!==r)}yr(t,e,n);break;case 1:if(!vt&&(ui(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){$e(n,e,c)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,yr(t,e,n),vt=r):yr(t,e,n);break;default:yr(t,e,n)}}function py(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xI),e.forEach(function(r){var s=kI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:nt=c.stateNode,mn=!1;break e;case 3:nt=c.stateNode.containerInfo,mn=!0;break e;case 4:nt=c.stateNode.containerInfo,mn=!0;break e}c=c.return}if(nt===null)throw Error(K(160));m_(i,o,s),nt=null,mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){$e(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p_(e,t),e=e.sibling}function p_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),Tn(t),r&4){try{Mo(3,t,t.return),au(3,t)}catch(P){$e(t,t.return,P)}try{Mo(5,t,t.return)}catch(P){$e(t,t.return,P)}}break;case 1:hn(e,t),Tn(t),r&512&&n!==null&&ui(n,n.return);break;case 5:if(hn(e,t),Tn(t),r&512&&n!==null&&ui(n,n.return),t.flags&32){var s=t.stateNode;try{Go(s,"")}catch(P){$e(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Mv(s,i),oh(c,o);var d=oh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Bv(s,p):f==="dangerouslySetInnerHTML"?Uv(s,p):f==="children"?Go(s,p):Tf(s,f,p,d)}switch(c){case"input":th(s,i);break;case"textarea":Vv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?fi(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?fi(s,!!i.multiple,i.defaultValue,!0):fi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ra]=i}catch(P){$e(t,t.return,P)}}break;case 6:if(hn(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){$e(t,t.return,P)}}break;case 3:if(hn(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(P){$e(t,t.return,P)}break;case 4:hn(e,t),Tn(t);break;case 13:hn(e,t),Tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sm=ze())),r&4&&py(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(d=vt)||f,hn(e,t),vt=d):hn(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Z=t,f=t.child;f!==null;){for(p=Z=f;Z!==null;){switch(g=Z,x=g.child,g.tag){case 0:case 11:case 14:case 15:Mo(4,g,g.return);break;case 1:ui(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(P){$e(r,n,P)}}break;case 5:ui(g,g.return);break;case 22:if(g.memoizedState!==null){yy(p);continue}}x!==null?(x.return=g,Z=x):yy(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=$v("display",o))}catch(P){$e(t,t.return,P)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(P){$e(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:hn(e,t),Tn(t),r&4&&py(t);break;case 21:break;default:hn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(f_(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Go(s,""),r.flags&=-33);var i=my(t);Lh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=my(t);Oh(t,c,o);break;default:throw Error(K(161))}}catch(u){$e(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wI(t,e,n){Z=t,g_(t)}function g_(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||vt;c=bl;var d=vt;if(bl=o,(vt=u)&&!d)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?vy(s):u!==null?(u.return=o,Z=u):vy(s);for(;i!==null;)Z=i,g_(i),i=i.sibling;Z=s,bl=c,vt=d}gy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):gy(t)}}function gy(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ey(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ey(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Jo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}vt||e.flags&512&&Dh(e)}catch(g){$e(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function yy(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function vy(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{au(4,e)}catch(u){$e(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){$e(e,s,u)}}var i=e.return;try{Dh(e)}catch(u){$e(e,i,u)}break;case 5:var o=e.return;try{Dh(e)}catch(u){$e(e,o,u)}}}catch(u){$e(e,e.return,u)}if(e===t){Z=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Z=c;break}Z=e.return}}var EI=Math.ceil,wc=ar.ReactCurrentDispatcher,nm=ar.ReactCurrentOwner,sn=ar.ReactCurrentBatchConfig,pe=0,et=null,Ke=null,at=0,Wt=0,di=Xr(0),Ye=0,ca=null,Ss=0,lu=0,rm=0,Vo=null,Lt=null,sm=0,ki=1/0,Un=null,Ec=!1,Mh=null,Mr=null,Il=!1,Cr=null,bc=0,Fo=0,Vh=null,zl=-1,ql=0;function kt(){return pe&6?ze():zl!==-1?zl:zl=ze()}function Vr(t){return t.mode&1?pe&2&&at!==0?at&-at:iI.transition!==null?(ql===0&&(ql=ex()),ql):(t=we,t!==0||(t=window.event,t=t===void 0?16:ax(t.type)),t):1}function _n(t,e,n,r){if(50<Fo)throw Fo=0,Vh=null,Error(K(185));Ia(t,n,r),(!(pe&2)||t!==et)&&(t===et&&(!(pe&2)&&(lu|=n),Ye===4&&Er(t,at)),$t(t,r),n===1&&pe===0&&!(e.mode&1)&&(ki=ze()+500,su&&Jr()))}function $t(t,e){var n=t.callbackNode;ib(t,e);var r=oc(t,t===et?at:0);if(r===0)n!==null&&Ng(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ng(n),e===1)t.tag===0?sI(xy.bind(null,t)):Sx(xy.bind(null,t)),eI(function(){!(pe&6)&&Jr()}),n=null;else{switch(tx(r)){case 1:n=Af;break;case 4:n=Jv;break;case 16:n=ic;break;case 536870912:n=Zv;break;default:n=ic}n=I_(n,y_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y_(t,e){if(zl=-1,ql=0,pe&6)throw Error(K(327));var n=t.callbackNode;if(vi()&&t.callbackNode!==n)return null;var r=oc(t,t===et?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ic(t,r);else{e=r;var s=pe;pe|=2;var i=x_();(et!==t||at!==e)&&(Un=null,ki=ze()+500,_s(t,e));do try{TI();break}catch(c){v_(t,c)}while(!0);zf(),wc.current=i,pe=s,Ke!==null?e=0:(et=null,at=0,e=Ye)}if(e!==0){if(e===2&&(s=dh(t),s!==0&&(r=s,e=Fh(t,s))),e===1)throw n=ca,_s(t,0),Er(t,r),$t(t,ze()),n;if(e===6)Er(t,r);else{if(s=t.current.alternate,!(r&30)&&!bI(s)&&(e=Ic(t,r),e===2&&(i=dh(t),i!==0&&(r=i,e=Fh(t,i))),e===1))throw n=ca,_s(t,0),Er(t,r),$t(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:us(t,Lt,Un);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=sm+500-ze(),10<e)){if(oc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xh(us.bind(null,t,Lt,Un),e);break}us(t,Lt,Un);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EI(r/1960))-r,10<r){t.timeoutHandle=xh(us.bind(null,t,Lt,Un),r);break}us(t,Lt,Un);break;case 5:us(t,Lt,Un);break;default:throw Error(K(329))}}}return $t(t,ze()),t.callbackNode===n?y_.bind(null,t):null}function Fh(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=Ic(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&Uh(e)),t}function Uh(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function bI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!En(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~rm,e&=~lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function xy(t){if(pe&6)throw Error(K(327));vi();var e=oc(t,0);if(!(e&1))return $t(t,ze()),null;var n=Ic(t,e);if(t.tag!==0&&n===2){var r=dh(t);r!==0&&(e=r,n=Fh(t,r))}if(n===1)throw n=ca,_s(t,0),Er(t,e),$t(t,ze()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,Lt,Un),$t(t,ze()),null}function im(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(ki=ze()+500,su&&Jr())}}function Ns(t){Cr!==null&&Cr.tag===0&&!(pe&6)&&vi();var e=pe;pe|=1;var n=sn.transition,r=we;try{if(sn.transition=null,we=1,t)return t()}finally{we=r,sn.transition=n,pe=e,!(pe&6)&&Jr()}}function om(){Wt=di.current,Ae(di)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zb(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dc();break;case 3:Ni(),Ae(Ft),Ae(wt),Qf();break;case 5:Gf(r);break;case 4:Ni();break;case 13:Ae(Le);break;case 19:Ae(Le);break;case 10:qf(r.type._context);break;case 22:case 23:om()}n=n.return}if(et=t,Ke=t=Fr(t.current,null),at=Wt=e,Ye=0,ca=null,rm=lu=Ss=0,Lt=Vo=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ms=null}return t}function v_(t,e){do{var n=Ke;try{if(zf(),Ul.current=_c,xc){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xc=!1}if(Ts=0,Ze=Qe=Me=null,Lo=!1,oa=0,nm.current=null,n===null||n.return===null){Ye=1,ca=e,Ke=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=at,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=oy(o);if(x!==null){x.flags&=-257,ay(x,o,c,i,e),x.mode&1&&iy(i,d,e),e=x,u=d;var C=e.updateQueue;if(C===null){var P=new Set;P.add(u),e.updateQueue=P}else C.add(u);break e}else{if(!(e&1)){iy(i,d,e),am();break e}u=Error(K(426))}}else if(je&&c.mode&1){var j=oy(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),ay(j,o,c,i,e),$f(Ci(u,c));break e}}i=u=Ci(u,c),Ye!==4&&(Ye=2),Vo===null?Vo=[i]:Vo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=t_(i,u,e);Zg(i,w);break e;case 1:c=u;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Mr===null||!Mr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=n_(i,c,e);Zg(i,D);break e}}i=i.return}while(i!==null)}w_(n)}catch(F){e=F,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function x_(){var t=wc.current;return wc.current=_c,t===null?_c:t}function am(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),et===null||!(Ss&268435455)&&!(lu&268435455)||Er(et,at)}function Ic(t,e){var n=pe;pe|=2;var r=x_();(et!==t||at!==e)&&(Un=null,_s(t,e));do try{II();break}catch(s){v_(t,s)}while(!0);if(zf(),pe=n,wc.current=r,Ke!==null)throw Error(K(261));return et=null,at=0,Ye}function II(){for(;Ke!==null;)__(Ke)}function TI(){for(;Ke!==null&&!Y2();)__(Ke)}function __(t){var e=b_(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?w_(t):Ke=e,nm.current=null}function w_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vI(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,Ke=null;return}}else if(n=yI(n,e,Wt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Ye===0&&(Ye=5)}function us(t,e,n){var r=we,s=sn.transition;try{sn.transition=null,we=1,SI(t,e,n,r)}finally{sn.transition=s,we=r}return null}function SI(t,e,n,r){do vi();while(Cr!==null);if(pe&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ob(t,i),t===et&&(Ke=et=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Il||(Il=!0,I_(ic,function(){return vi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=we;we=1;var c=pe;pe|=4,nm.current=null,_I(t,n),p_(n,t),Hb(yh),ac=!!gh,yh=gh=null,t.current=n,wI(n),X2(),pe=c,we=o,sn.transition=i}else t.current=n;if(Il&&(Il=!1,Cr=t,bc=s),i=t.pendingLanes,i===0&&(Mr=null),eb(n.stateNode),$t(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ec)throw Ec=!1,t=Mh,Mh=null,t;return bc&1&&t.tag!==0&&vi(),i=t.pendingLanes,i&1?t===Vh?Fo++:(Fo=0,Vh=t):Fo=0,Jr(),null}function vi(){if(Cr!==null){var t=tx(bc),e=sn.transition,n=we;try{if(sn.transition=null,we=16>t?16:t,Cr===null)var r=!1;else{if(t=Cr,Cr=null,bc=0,pe&6)throw Error(K(331));var s=pe;for(pe|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Z=d;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:Mo(8,f,i)}var p=f.child;if(p!==null)p.return=f,Z=p;else for(;Z!==null;){f=Z;var g=f.sibling,x=f.return;if(h_(f),f===d){Z=null;break}if(g!==null){g.return=x,Z=g;break}Z=x}}}var C=i.alternate;if(C!==null){var P=C.child;if(P!==null){C.child=null;do{var j=P.sibling;P.sibling=null,P=j}while(P!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Z=w;break e}Z=i.return}}var E=t.current;for(Z=E;Z!==null;){o=Z;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Z=S;else e:for(o=E;Z!==null;){if(c=Z,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:au(9,c)}}catch(F){$e(c,c.return,F)}if(c===o){Z=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,Z=D;break e}Z=c.return}}if(pe=s,Jr(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Zc,t)}catch{}r=!0}return r}finally{we=n,sn.transition=e}}return!1}function _y(t,e,n){e=Ci(n,e),e=t_(t,e,1),t=Lr(t,e,1),e=kt(),t!==null&&(Ia(t,1,e),$t(t,e))}function $e(t,e,n){if(t.tag===3)_y(t,t,n);else for(;e!==null;){if(e.tag===3){_y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=Ci(n,t),t=n_(e,t,1),e=Lr(e,t,1),t=kt(),e!==null&&(Ia(e,1,t),$t(e,t));break}}e=e.return}}function NI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>ze()-sm?_s(t,0):rm|=n),$t(t,e)}function E_(t,e){e===0&&(t.mode&1?(e=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):e=1);var n=kt();t=er(t,e),t!==null&&(Ia(t,e,n),$t(t,n))}function CI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E_(t,n)}function kI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),E_(t,n)}var b_;b_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,gI(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,je&&e.flags&1048576&&Nx(e,mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bl(t,e),t=e.pendingProps;var s=Ii(e,wt.current);yi(e,n),s=Xf(null,e,r,t,s,n);var i=Jf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,hc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hf(e),s.updater=ou,e.stateNode=s,s._reactInternals=e,Sh(e,r,t,n),e=kh(null,e,r,!0,i,n)):(e.tag=0,je&&i&&Ff(e),Nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=PI(r),t=fn(r,t),s){case 0:e=Ch(null,e,r,t,n);break e;case 1:e=uy(null,e,r,t,n);break e;case 11:e=ly(null,e,r,t,n);break e;case 14:e=cy(null,e,r,fn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Ch(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),uy(t,e,r,s,n);case 3:e:{if(o_(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jx(t,e),yc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ci(Error(K(423)),e),e=dy(t,e,r,n,s);break e}else if(r!==s){s=Ci(Error(K(424)),e),e=dy(t,e,r,n,s);break e}else for(Ht=Or(e.stateNode.containerInfo.firstChild),Qt=e,je=!0,gn=null,n=Px(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===s){e=tr(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return Dx(e),t===null&&bh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vh(r,s)?o=null:i!==null&&vh(r,i)&&(e.flags|=32),i_(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&bh(e),null;case 13:return a_(t,e,n);case 4:return Kf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Si(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),ly(t,e,r,s,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(pc,r._currentValue),r._currentValue=o,i!==null)if(En(i.value,o)){if(i.children===s.children&&!Ft.current){e=tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ih(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ih(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,yi(e,n),s=on(s),r=r(s),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),cy(t,e,r,s,n);case 15:return r_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Bl(t,e),e.tag=1,Ut(r)?(t=!0,hc(e)):t=!1,yi(e,n),e_(e,r,s),Sh(e,r,s,n),kh(null,e,r,!0,t,n);case 19:return l_(t,e,n);case 22:return s_(t,e,n)}throw Error(K(156,e.tag))};function I_(t,e){return Xv(t,e)}function AI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new AI(t,e,n,r)}function lm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PI(t){if(typeof t=="function")return lm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nf)return 11;if(t===Cf)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ti:return ws(n.children,s,i,e);case Sf:o=8,s|=8;break;case Yd:return t=rn(12,n,e,s|2),t.elementType=Yd,t.lanes=i,t;case Xd:return t=rn(13,n,e,s),t.elementType=Xd,t.lanes=i,t;case Jd:return t=rn(19,n,e,s),t.elementType=Jd,t.lanes=i,t;case Dv:return cu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rv:o=10;break e;case jv:o=9;break e;case Nf:o=11;break e;case Cf:o=14;break e;case xr:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ws(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function cu(t,e,n,r){return t=rn(22,t,r,e),t.elementType=Dv,t.lanes=n,t.stateNode={isHidden:!1},t}function kd(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function Ad(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cm(t,e,n,r,s,i,o,c,u){return t=new RI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hf(i),t}function jI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T_(t){if(!t)return Hr;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Ut(n))return Tx(t,n,e)}return e}function S_(t,e,n,r,s,i,o,c,u){return t=cm(n,r,!0,t,s,i,o,c,u),t.context=T_(null),n=t.current,r=kt(),s=Vr(n),i=Qn(r,s),i.callback=e??null,Lr(n,i,s),t.current.lanes=s,Ia(t,s,r),$t(t,r),t}function uu(t,e,n,r){var s=e.current,i=kt(),o=Vr(s);return n=T_(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(s,e,o),t!==null&&(_n(t,s,o,i),Fl(t,s,o)),o}function Tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function um(t,e){wy(t,e),(t=t.alternate)&&wy(t,e)}function DI(){return null}var N_=typeof reportError=="function"?reportError:function(t){console.error(t)};function dm(t){this._internalRoot=t}du.prototype.render=dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));uu(t,e,null,null)};du.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){uu(null,t,null,null)}),e[Zn]=null}};function du(t){this._internalRoot=t}du.prototype.unstable_scheduleHydration=function(t){if(t){var e=sx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wr.length&&e!==0&&e<wr[n].priority;n++);wr.splice(n,0,t),n===0&&ox(t)}};function hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ey(){}function OI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Tc(o);i.call(d)}}var o=S_(e,r,t,0,null,!1,!1,"",Ey);return t._reactRootContainer=o,t[Zn]=o.current,ta(t.nodeType===8?t.parentNode:t),Ns(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Tc(u);c.call(d)}}var u=cm(t,0,!1,null,null,!1,!1,"",Ey);return t._reactRootContainer=u,t[Zn]=u.current,ta(t.nodeType===8?t.parentNode:t),Ns(function(){uu(e,u,n,r)}),u}function fu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Tc(o);c.call(u)}}uu(e,o,t,s)}else o=OI(n,e,t,s,r);return Tc(o)}nx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bo(e.pendingLanes);n!==0&&(Pf(e,n|1),$t(e,ze()),!(pe&6)&&(ki=ze()+500,Jr()))}break;case 13:Ns(function(){var r=er(t,1);if(r!==null){var s=kt();_n(r,t,1,s)}}),um(t,1)}};Rf=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=kt();_n(e,t,134217728,n)}um(t,134217728)}};rx=function(t){if(t.tag===13){var e=Vr(t),n=er(t,e);if(n!==null){var r=kt();_n(n,t,e,r)}um(t,e)}};sx=function(){return we};ix=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};lh=function(t,e,n){switch(e){case"input":if(th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ru(r);if(!s)throw Error(K(90));Lv(r),th(r,s)}}}break;case"textarea":Vv(t,n);break;case"select":e=n.value,e!=null&&fi(t,!!n.multiple,e,!1)}};Wv=im;Hv=Ns;var LI={usingClientEntryPoint:!1,Events:[Sa,ii,ru,zv,qv,im]},vo={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MI={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qv(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||DI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Zc=Tl.inject(MI),Cn=Tl}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LI;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hm(e))throw Error(K(200));return jI(t,e,null,n)};Jt.createRoot=function(t,e){if(!hm(t))throw Error(K(299));var n=!1,r="",s=N_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cm(t,1,!1,null,null,n,!1,r,s),t[Zn]=e.current,ta(t.nodeType===8?t.parentNode:t),new dm(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Qv(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Ns(t)};Jt.hydrate=function(t,e,n){if(!hu(e))throw Error(K(200));return fu(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!hm(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=N_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=S_(e,null,t,1,n??null,s,!1,i,o),t[Zn]=e.current,ta(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new du(e)};Jt.render=function(t,e,n){if(!hu(e))throw Error(K(200));return fu(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!hu(t))throw Error(K(40));return t._reactRootContainer?(Ns(function(){fu(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Jt.unstable_batchedUpdates=im;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hu(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return fu(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function C_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C_)}catch(t){console.error(t)}}C_(),Cv.exports=Jt;var VI=Cv.exports,k_,by=VI;k_=by.createRoot,by.hydrateRoot;var Iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[f],n[p],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(A_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new UI;const g=i<<2|c>>4;if(r.push(g),d!==64){const x=c<<4&240|d>>2;if(r.push(x),p!==64){const C=d<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $I=function(t){const e=A_(t);return P_.encodeByteArray(e,!0)},Sc=function(t){return $I(t).replace(/\./g,"")},R_=function(t){try{return P_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=()=>BI().__FIREBASE_DEFAULTS__,qI=()=>{if(typeof process>"u"||typeof Iy>"u")return;const t=Iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R_(t[1]);return e&&JSON.parse(e)},mu=()=>{try{return zI()||qI()||WI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j_=t=>{var e,n;return(n=(e=mu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},D_=t=>{const e=j_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},O_=()=>{var t;return(t=mu())===null||t===void 0?void 0:t.config},L_=t=>{var e;return(e=mu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sc(JSON.stringify(n)),Sc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function GI(){var t;const e=(t=mu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XI(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JI(){return!GI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F_(){try{return typeof indexedDB=="object"}catch{return!1}}function U_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function ZI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="FirebaseError";class un extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eT,Object.setPrototypeOf(this,un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ms.prototype.create)}}class Ms{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tT(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new un(s,c,r)}}function tT(t,e){return t.replace(nT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nT=/\{\$([^}]+)}/g;function rT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ua(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ty(i)&&Ty(o)){if(!ua(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ty(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function To(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function So(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sT(t,e){const n=new iT(t,e);return n.subscribe.bind(n)}class iT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pd),s.error===void 0&&(s.error=Pd),s.complete===void 0&&(s.complete=Pd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1e3,lT=2,cT=4*60*60*1e3,uT=.5;function Sy(t,e=aT,n=lT){const r=e*Math.pow(n,t),s=Math.round(uT*r*(Math.random()-.5)*2);return Math.min(cT,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class ln{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fT(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hT(t){return t===ds?void 0:t}function fT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const pT={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},gT=fe.INFO,yT={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},vT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=yT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pu{constructor(e){this.name=e,this._logLevel=gT,this._logHandler=vT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const xT=(t,e)=>e.some(n=>t instanceof n);let Ny,Cy;function _T(){return Ny||(Ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wT(){return Cy||(Cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $_=new WeakMap,$h=new WeakMap,B_=new WeakMap,Rd=new WeakMap,fm=new WeakMap;function ET(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$_.set(n,t)}).catch(()=>{}),fm.set(e,t),e}function bT(t){if($h.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$h.set(t,e)}let Bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $h.get(t);if(e==="objectStoreNames")return t.objectStoreNames||B_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IT(t){Bh=t(Bh)}function TT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jd(this),e,...n);return B_.set(r,e.sort?e.sort():[e]),Ur(r)}:wT().includes(t)?function(...e){return t.apply(jd(this),e),Ur($_.get(this))}:function(...e){return Ur(t.apply(jd(this),e))}}function ST(t){return typeof t=="function"?TT(t):(t instanceof IDBTransaction&&bT(t),xT(t,_T())?new Proxy(t,Bh):t)}function Ur(t){if(t instanceof IDBRequest)return ET(t);if(Rd.has(t))return Rd.get(t);const e=ST(t);return e!==t&&(Rd.set(t,e),fm.set(e,t)),e}const jd=t=>fm.get(t);function z_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Ur(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ur(o.result),u.oldVersion,u.newVersion,Ur(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const NT=["get","getKey","getAll","getAllKeys","count"],CT=["put","add","delete","clear"],Dd=new Map;function ky(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=CT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NT.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Dd.set(e,i),i}IT(t=>({...t,get:(e,n,r)=>ky(e,n)||t.get(e,n,r),has:(e,n)=>!!ky(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zh="@firebase/app",Ay="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new pu("@firebase/app"),PT="@firebase/app-compat",RT="@firebase/analytics-compat",jT="@firebase/analytics",DT="@firebase/app-check-compat",OT="@firebase/app-check",LT="@firebase/auth",MT="@firebase/auth-compat",VT="@firebase/database",FT="@firebase/data-connect",UT="@firebase/database-compat",$T="@firebase/functions",BT="@firebase/functions-compat",zT="@firebase/installations",qT="@firebase/installations-compat",WT="@firebase/messaging",HT="@firebase/messaging-compat",KT="@firebase/performance",GT="@firebase/performance-compat",QT="@firebase/remote-config",YT="@firebase/remote-config-compat",XT="@firebase/storage",JT="@firebase/storage-compat",ZT="@firebase/firestore",eS="@firebase/vertexai-preview",tS="@firebase/firestore-compat",nS="firebase",rS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="[DEFAULT]",sS={[zh]:"fire-core",[PT]:"fire-core-compat",[jT]:"fire-analytics",[RT]:"fire-analytics-compat",[OT]:"fire-app-check",[DT]:"fire-app-check-compat",[LT]:"fire-auth",[MT]:"fire-auth-compat",[VT]:"fire-rtdb",[FT]:"fire-data-connect",[UT]:"fire-rtdb-compat",[$T]:"fire-fn",[BT]:"fire-fn-compat",[zT]:"fire-iid",[qT]:"fire-iid-compat",[WT]:"fire-fcm",[HT]:"fire-fcm-compat",[KT]:"fire-perf",[GT]:"fire-perf-compat",[QT]:"fire-rc",[YT]:"fire-rc-compat",[XT]:"fire-gcs",[JT]:"fire-gcs-compat",[ZT]:"fire-fst",[tS]:"fire-fst-compat",[eS]:"fire-vertex","fire-js":"fire-js",[nS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new Map,iS=new Map,Wh=new Map;function Py(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bn(t){const e=t.name;if(Wh.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Wh.set(e,t);for(const n of Nc.values())Py(n,t);for(const n of iS.values())Py(n,t);return!0}function Zr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Ms("app","Firebase",oS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=rS;function q_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(n||(n=O_()),!n)throw $r.create("no-options");const i=Nc.get(s);if(i){if(ua(n,i.options)&&ua(r,i.config))return i;throw $r.create("duplicate-app",{appName:s})}const o=new mT(s);for(const u of Wh.values())o.addComponent(u);const c=new aS(n,r,o);return Nc.set(s,c),c}function gu(t=qh){const e=Nc.get(t);if(!e&&t===qh&&O_())return q_();if(!e)throw $r.create("no-app",{appName:t});return e}function Bt(t,e,n){var r;let s=(r=sS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(c.join(" "));return}bn(new ln(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebase-heartbeat-database",cS=1,da="firebase-heartbeat-store";let Od=null;function W_(){return Od||(Od=z_(lS,cS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(da)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Od}async function uS(t){try{const n=(await W_()).transaction(da),r=await n.objectStore(da).get(H_(t));return await n.done,r}catch(e){if(e instanceof un)nr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function Ry(t,e){try{const r=(await W_()).transaction(da,"readwrite");await r.objectStore(da).put(e,H_(t)),await r.done}catch(n){if(n instanceof un)nr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function H_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1024,hS=30*24*60*60*1e3;class fS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=hS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jy(),{heartbeatsToSend:r,unsentEntries:s}=mS(this._heartbeatsCache.heartbeats),i=Sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nr.warn(n),""}}}function jy(){return new Date().toISOString().substring(0,10)}function mS(t,e=dS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Dy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F_()?U_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dy(t){return Sc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){bn(new ln("platform-logger",e=>new kT(e),"PRIVATE")),bn(new ln("heartbeat",e=>new fS(e),"PRIVATE")),Bt(zh,Ay,t),Bt(zh,Ay,"esm2017"),Bt("fire-js","")}gS("");function mm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function K_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yS=K_,G_=new Ms("auth","Firebase",K_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new pu("@firebase/auth");function vS(t,...e){Cc.logLevel<=fe.WARN&&Cc.warn(`Auth (${Vs}): ${t}`,...e)}function Hl(t,...e){Cc.logLevel<=fe.ERROR&&Cc.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,...e){throw gm(t,...e)}function wn(t,...e){return gm(t,...e)}function pm(t,e,n){const r=Object.assign(Object.assign({},yS()),{[e]:n});return new Ms("auth","Firebase",r).create(e,{appName:t.name})}function Yn(t){return pm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&cn(t,"argument-error"),pm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return G_.create(t,...e)}function ie(t,e,...n){if(!t)throw gm(e,...n)}function Hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hl(e),new Error(e)}function rr(t,e){t||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _S(){return Oy()==="http:"||Oy()==="https:"}function Oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_S()||V_()||"connection"in navigator)?navigator.onLine:!0}function ES(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,rr(n>e,"Short delay should be less than long delay!"),this.isMobile=KI()||YI()}get(){return wS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e){rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new ka(3e4,6e4);function lr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cr(t,e,n,r,s={}){return Y_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ca(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return QI()||(d.referrerPolicy="no-referrer"),Q_.fetch()(X_(t,t.config.apiHost,n,c),d)})}async function Y_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},bS),e);try{const s=new SS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Sl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw pm(t,f,d);cn(t,f)}}catch(s){if(s instanceof un)throw s;cn(t,"network-request-failed",{message:String(s)})}}async function Aa(t,e,n,r,s={}){const i=await cr(t,e,n,r,s);return"mfaPendingCredential"in i&&cn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function X_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ym(t.config,s):`${t.config.apiScheme}://${s}`}function TS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),IS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}function Ly(t){return t!==void 0&&t.enterprise!==void 0}class NS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function CS(t,e){return cr(t,"GET","/v2/recaptchaConfig",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(t,e){return cr(t,"POST","/v1/accounts:delete",e)}async function J_(t,e){return cr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AS(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),s=vm(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Uo(Ld(s.auth_time)),issuedAtTime:Uo(Ld(s.iat)),expirationTime:Uo(Ld(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ld(t){return Number(t)*1e3}function vm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hl("JWT malformed, contained fewer than 3 sections"),null;try{const s=R_(n);return s?JSON.parse(s):(Hl("Failed to decode base64 JWT payload"),null)}catch(s){return Hl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function My(t){const e=vm(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof un&&PS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uo(this.lastLoginAt),this.creationTime=Uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ha(t,J_(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Z_(i.providerUserInfo):[],c=DS(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Kh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function jS(t){const e=Pe(t);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Z_(t){return t.map(e=>{var{providerId:n}=e,r=mm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e){const n=await Y_(t,{},async()=>{const r=Ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=X_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Q_.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LS(t,e){return cr(t,"POST","/v2/accounts:revokeToken",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):My(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=My(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await OS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xi;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=mm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ha(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AS(this,e)}reload(){return jS(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Yn(this.auth));const e=await this.getIdToken();return await ha(this,kS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(c=n.tenantId)!==null&&c!==void 0?c:void 0,j=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:D,isAnonymous:F,providerData:R,stsTokenManager:b}=n;ie(S&&b,e,"internal-error");const y=xi.fromJSON(this.name,b);ie(typeof S=="string",e,"internal-error"),vr(p,e.name),vr(g,e.name),ie(typeof D=="boolean",e,"internal-error"),ie(typeof F=="boolean",e,"internal-error"),vr(x,e.name),vr(C,e.name),vr(P,e.name),vr(j,e.name),vr(w,e.name),vr(E,e.name);const T=new Kn({uid:S,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:F,photoURL:C,phoneNumber:x,tenantId:P,stsTokenManager:y,createdAt:w,lastLoginAt:E});return R&&Array.isArray(R)&&(T.providerData=R.map(N=>Object.assign({},N))),j&&(T._redirectEventId=j),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new xi;s.updateFromServerResponse(n);const i=new Kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Z_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new xi;c.updateFromIdToken(r);const u=new Kn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Kh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map;function Gn(t){rr(t instanceof Function,"Expected a class definition");let e=Vy.get(t);return e?(rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ew.type="NONE";const Fy=ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e,n){return`firebase:${t}:${e}:${n}`}class _i{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Kl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Kl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _i(Gn(Fy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Gn(Fy);const o=Kl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Kn._fromJSON(e,f);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new _i(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new _i(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ow(e))return"Blackberry";if(aw(e))return"Webos";if(nw(e))return"Safari";if((e.includes("chrome/")||rw(e))&&!e.includes("edge/"))return"Chrome";if(iw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tw(t=Et()){return/firefox\//i.test(t)}function nw(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rw(t=Et()){return/crios\//i.test(t)}function sw(t=Et()){return/iemobile/i.test(t)}function iw(t=Et()){return/android/i.test(t)}function ow(t=Et()){return/blackberry/i.test(t)}function aw(t=Et()){return/webos/i.test(t)}function xm(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MS(t=Et()){var e;return xm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VS(){return XI()&&document.documentMode===10}function lw(t=Et()){return xm(t)||iw(t)||aw(t)||ow(t)||/windows phone/i.test(t)||sw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e=[]){let n;switch(t){case"Browser":n=Uy(Et());break;case"Worker":n=`${Uy(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e={}){return cr(t,"GET","/v2/passwordPolicy",lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=6;class BS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:$S,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $y(this),this.idTokenSubscription=new $y(this),this.beforeStateQueue=new FS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await _i.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await J_(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ES()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Yn(this));const n=e?Pe(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await US(this),n=new BS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ms("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await _i.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ur(t){return Pe(t)}class $y{constructor(e){this.auth=e,this.observer=null,this.addObserver=sT(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qS(t){yu=t}function uw(t){return yu.loadJS(t)}function WS(){return yu.recaptchaEnterpriseScript}function HS(){return yu.gapiScript}function KS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const GS="recaptcha-enterprise",QS="NO_RECAPTCHA";class YS{constructor(e){this.type=GS,this.auth=ur(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{CS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new NS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Ly(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(QS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Ly(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=WS();u.length!==0&&(u+=c),uw(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function By(t,e,n,r=!1){const s=new YS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ac(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await By(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await By(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e){const n=Zr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ua(i,e??{}))return s;cn(s,"already-initialized")}return n.initialize({options:e})}function JS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ZS(t,e,n){const r=ur(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=dw(e),{host:o,port:c}=eN(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),tN()}function dw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eN(t){const e=dw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:zy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:zy(o)}}}function zy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function nN(t,e){return cr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e){return Aa(t,"POST","/v1/accounts:signInWithPassword",lr(t,e))}async function hw(t,e){return cr(t,"POST","/v1/accounts:sendOobCode",lr(t,e))}async function sN(t,e){return hw(t,e)}async function iN(t,e){return hw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,e){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",lr(t,e))}async function aN(t,e){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends _m{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ac(e,n,"signInWithPassword",rN);case"emailLink":return oN(e,{email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ac(e,r,"signUpPassword",nN);case"emailLink":return aN(e,{idToken:n,email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(t,e){return Aa(t,"POST","/v1/accounts:signInWithIdp",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="http://localhost";class Cs extends _m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=mm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Cs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wi(e,n)}buildRequest(){const e={requestUri:lN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uN(t){const e=To(So(t)).link,n=e?To(So(e)).deep_link_id:null,r=To(So(t)).deep_link_id;return(r?To(So(r)).link:null)||r||n||e||t}class wm{constructor(e){var n,r,s,i,o,c;const u=To(So(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=cN((s=u.mode)!==null&&s!==void 0?s:null);ie(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=uN(e);try{return new wm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.providerId=Bi.PROVIDER_ID}static credential(e,n){return fa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wm.parseLink(n);return ie(r,"argument-error"),fa._fromEmailAndCode(e,r.code,r.tenantId)}}Bi.PROVIDER_ID="password";Bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends Em{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Pa{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Pa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cs._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Pa{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Pa{constructor(){super("twitter.com")}static credential(e,n){return Cs._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){return Aa(t,"POST","/v1/accounts:signUp",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kn._fromIdTokenResponse(e,r,s),o=qy(r);return new ks({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qy(r);return new ks({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends un{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Pc(e,n,r,s)}}function fw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(t,i,e,r):i})}async function hN(t,e,n=!1){const r=await ha(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ks._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(t,e,n=!1){const{auth:r}=t;if(yn(r.app))return Promise.reject(Yn(r));const s="reauthenticate";try{const i=await ha(t,fw(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=vm(i.idToken);ie(o,r,"internal-error");const{sub:c}=o;return ie(t.uid===c,r,"user-mismatch"),ks._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&cn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(t,e,n=!1){if(yn(t.app))return Promise.reject(Yn(t));const r="signIn",s=await fw(t,r,e),i=await ks._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function mN(t,e){return mw(ur(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(t){const e=ur(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pN(t,e,n){const r=ur(t);await Ac(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",iN)}async function gN(t,e,n){if(yn(t.app))return Promise.reject(Yn(t));const r=ur(t),o=await Ac(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&pw(t),u}),c=await ks._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function yN(t,e,n){return yn(t.app)?Promise.reject(Yn(t)):mN(Pe(t),Bi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pw(t),r})}async function Wy(t,e){const n=Pe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await sN(n.auth,s);i!==t.email&&await t.reload()}function vN(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function xN(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function _N(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function hi(t){return Pe(t).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=1e3,EN=10;class yw extends gw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);VS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yw.type="LOCAL";const bN=yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends gw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vw.type="SESSION";const xw=vw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await IN(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=bm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function SN(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function NN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kN(){return _w()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firebaseLocalStorageDb",AN=1,jc="firebaseLocalStorage",Ew="fbase_key";class Ra{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xu(t,e){return t.transaction([jc],e?"readwrite":"readonly").objectStore(jc)}function PN(){const t=indexedDB.deleteDatabase(ww);return new Ra(t).toPromise()}function Gh(){const t=indexedDB.open(ww,AN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jc,{keyPath:Ew})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jc)?e(r):(r.close(),await PN(),e(await Gh()))})})}async function Hy(t,e,n){const r=xu(t,!0).put({[Ew]:e,value:n});return new Ra(r).toPromise()}async function RN(t,e){const n=xu(t,!1).get(e),r=await new Ra(n).toPromise();return r===void 0?null:r.value}function Ky(t,e){const n=xu(t,!0).delete(e);return new Ra(n).toPromise()}const jN=800,DN=3;class bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _w()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vu._getInstance(kN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NN(),!this.activeServiceWorker)return;this.sender=new TN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gh();return await Hy(e,Rc,"1"),await Ky(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ky(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xu(s,!1).getAll();return new Ra(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bw.type="LOCAL";const ON=bw;new ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e){return e?Gn(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends _m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LN(t){return mw(t.auth,new Im(t),t.bypassAuthState)}function MN(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),fN(n,new Im(t),t.bypassAuthState)}async function VN(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),hN(n,new Im(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LN;case"linkViaPopup":case"linkViaRedirect":return VN;case"reauthViaPopup":case"reauthViaRedirect":return MN;default:cn(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new ka(2e3,1e4);async function UN(t,e,n){if(yn(t.app))return Promise.reject(wn(t,"operation-not-supported-in-this-environment"));const r=ur(t);xS(t,e,Em);const s=Iw(r,n);return new gs(r,"signInViaPopup",e,s).executeNotNull()}class gs extends Tw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FN.get())};e()}}gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="pendingRedirect",Gl=new Map;class BN extends Tw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gl.get(this.auth._key());if(!e){try{const r=await zN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gl.set(this.auth._key(),e)}return this.bypassAuthState||Gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zN(t,e){const n=HN(e),r=WN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function qN(t,e){Gl.set(t._key(),e)}function WN(t){return Gn(t._redirectPersistence)}function HN(t){return Kl($N,t.config.apiKey,t.name)}async function KN(t,e,n=!1){if(yn(t.app))return Promise.reject(Yn(t));const r=ur(t),s=Iw(r,e),o=await new BN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=10*60*1e3;class QN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Sw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gy(e))}saveEventToCache(e){this.cachedEventUids.add(Gy(e)),this.lastProcessedEventTime=Date.now()}}function Gy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Sw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e={}){return cr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZN=/^https?/;async function eC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XN(t);for(const n of e)try{if(tC(n))return}catch{}cn(t,"unauthorized-domain")}function tC(t){const e=Hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZN.test(n))return!1;if(JN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=new ka(3e4,6e4);function Qy(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rC(t){return new Promise((e,n)=>{var r,s,i;function o(){Qy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qy(),n(wn(t,"network-request-failed"))},timeout:nC.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const c=KS("iframefcb");return An()[c]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},uw(`${HS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ql=null,e})}let Ql=null;function sC(t){return Ql=Ql||rC(t),Ql}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new ka(5e3,15e3),oC="__/auth/iframe",aC="emulator/auth/iframe",lC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uC(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ym(e,aC):`https://${t.config.authDomain}/${oC}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},s=cC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ca(r).slice(1)}`}async function dC(t){const e=await sC(t),n=An().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:uC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=An().setTimeout(()=>{i(o)},iC.get());function u(){An().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fC=500,mC=600,pC="_blank",gC="http://localhost";class Yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yC(t,e,n,r=fC,s=mC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},hC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Et().toLowerCase();n&&(c=rw(d)?pC:n),tw(d)&&(e=e||gC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[x,C])=>`${g}${x}=${C},`,"");if(MS(d)&&c!=="_self")return vC(e||"",c),new Yy(null);const p=window.open(e||"",c,f);ie(p,t,"popup-blocked");try{p.focus()}catch{}return new Yy(p)}function vC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="__/auth/handler",_C="emulator/auth/handler",wC=encodeURIComponent("fac");async function Xy(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:s};if(e instanceof Em){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Pa){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${wC}=${encodeURIComponent(u)}`:"";return`${EC(t)}?${Ca(c).slice(1)}${d}`}function EC({config:t}){return t.emulator?ym(t,_C):`https://${t.authDomain}/${xC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="webStorageSupport";class bC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xw,this._completeRedirectFn=KN,this._overrideRedirectResult=qN}async _openPopup(e,n,r,s){var i;rr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Xy(e,n,r,Hh(),s);return yC(e,o,bm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Xy(e,n,r,Hh(),s);return SN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(rr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dC(e),r=new QN(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Md,{type:Md},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Md];o!==void 0&&n(!!o),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lw()||nw()||xm()}}const IC=bC;var Jy="@firebase/auth",Zy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NC(t){bn(new ln("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cw(t)},d=new zS(r,s,i,u);return JS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bn(new ln("auth-internal",e=>{const n=ur(e.getProvider("auth").getImmediate());return(r=>new TC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bt(Jy,Zy,SC(t)),Bt(Jy,Zy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=5*60,kC=L_("authIdTokenMaxAge")||CC;let e0=null;const AC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kC)return;const s=n==null?void 0:n.token;e0!==s&&(e0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function PC(t=gu()){const e=Zr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XS(t,{popupRedirectResolver:IC,persistence:[ON,bN,xw]}),r=L_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=AC(i.toString());xN(n,o,()=>o(n.currentUser)),vN(n,c=>o(c))}}const s=j_("auth");return s&&ZS(n,`http://${s}`),n}function RC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",RC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NC("Browser");var jC="firebase",DC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt(jC,DC,"app");const Nw="@firebase/installations",Tm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=1e4,kw=`w:${Tm}`,Aw="FIS_v2",OC="https://firebaseinstallations.googleapis.com/v1",LC=60*60*1e3,MC="installations",VC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},As=new Ms(MC,VC,FC);function Pw(t){return t instanceof un&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw({projectId:t}){return`${OC}/projects/${t}/installations`}function jw(t){return{token:t.token,requestStatus:2,expiresIn:$C(t.expiresIn),creationTime:Date.now()}}async function Dw(t,e){const r=(await e.json()).error;return As.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Ow({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function UC(t,{refreshToken:e}){const n=Ow(t);return n.append("Authorization",BC(e)),n}async function Lw(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $C(t){return Number(t.replace("s","000"))}function BC(t){return`${Aw} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Rw(t),s=Ow(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:Aw,appId:t.appId,sdkVersion:kw},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await Lw(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:jw(d.authToken)}}else throw await Dw("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^[cdef][\w-]{21}$/,Qh="";function HC(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=KC(t);return WC.test(n)?n:Qh}catch{return Qh}}function KC(t){return qC(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;function Fw(t,e){const n=_u(t);Uw(n,e),GC(n,e)}function Uw(t,e){const n=Vw.get(t);if(n)for(const r of n)r(e)}function GC(t,e){const n=QC();n&&n.postMessage({key:t,fid:e}),YC()}let ys=null;function QC(){return!ys&&"BroadcastChannel"in self&&(ys=new BroadcastChannel("[Firebase] FID Change"),ys.onmessage=t=>{Uw(t.data.key,t.data.fid)}),ys}function YC(){Vw.size===0&&ys&&(ys.close(),ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebase-installations-database",JC=1,Ps="firebase-installations-store";let Vd=null;function Sm(){return Vd||(Vd=z_(XC,JC,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ps)}}})),Vd}async function Dc(t,e){const n=_u(t),s=(await Sm()).transaction(Ps,"readwrite"),i=s.objectStore(Ps),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Fw(t,e.fid),e}async function $w(t){const e=_u(t),r=(await Sm()).transaction(Ps,"readwrite");await r.objectStore(Ps).delete(e),await r.done}async function wu(t,e){const n=_u(t),s=(await Sm()).transaction(Ps,"readwrite"),i=s.objectStore(Ps),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&Fw(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(t){let e;const n=await wu(t.appConfig,r=>{const s=ZC(r),i=ek(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Qh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ZC(t){const e=t||{fid:HC(),registrationStatus:0};return Bw(e)}function ek(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(As.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=tk(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nk(t)}:{installationEntry:e}}async function tk(t,e){try{const n=await zC(t,e);return Dc(t.appConfig,n)}catch(n){throw Pw(n)&&n.customData.serverCode===409?await $w(t.appConfig):await Dc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function nk(t){let e=await t0(t.appConfig);for(;e.registrationStatus===1;)await Mw(100),e=await t0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Nm(t);return r||n}return e}function t0(t){return wu(t,e=>{if(!e)throw As.create("installation-not-found");return Bw(e)})}function Bw(t){return rk(t)?{fid:t.fid,registrationStatus:0}:t}function rk(t){return t.registrationStatus===1&&t.registrationTime+Cw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk({appConfig:t,heartbeatServiceProvider:e},n){const r=ik(t,n),s=UC(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:kw,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await Lw(()=>fetch(r,c));if(u.ok){const d=await u.json();return jw(d)}else throw await Dw("Generate Auth Token",u)}function ik(t,{fid:e}){return`${Rw(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cm(t,e=!1){let n;const r=await wu(t.appConfig,i=>{if(!zw(i))throw As.create("not-registered");const o=i.authToken;if(!e&&lk(o))return i;if(o.requestStatus===1)return n=ok(t,e),i;{if(!navigator.onLine)throw As.create("app-offline");const c=uk(i);return n=ak(t,c),c}});return n?await n:r.authToken}async function ok(t,e){let n=await n0(t.appConfig);for(;n.authToken.requestStatus===1;)await Mw(100),n=await n0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Cm(t,e):r}function n0(t){return wu(t,e=>{if(!zw(e))throw As.create("not-registered");const n=e.authToken;return dk(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ak(t,e){try{const n=await sk(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Dc(t.appConfig,r),n}catch(n){if(Pw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $w(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dc(t.appConfig,r)}throw n}}function zw(t){return t!==void 0&&t.registrationStatus===2}function lk(t){return t.requestStatus===2&&!ck(t)}function ck(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+LC}function uk(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function dk(t){return t.requestStatus===1&&t.requestTime+Cw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t){const e=t,{installationEntry:n,registrationPromise:r}=await Nm(e);return r?r.catch(console.error):Cm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e=!1){const n=t;return await mk(n),(await Cm(n,e)).token}async function mk(t){const{registrationPromise:e}=await Nm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){if(!t||!t.options)throw Fd("App Configuration");if(!t.name)throw Fd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fd(t){return As.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="installations",gk="installations-internal",yk=t=>{const e=t.getProvider("app").getImmediate(),n=pk(e),r=Zr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},vk=t=>{const e=t.getProvider("app").getImmediate(),n=Zr(e,qw).getImmediate();return{getId:()=>hk(n),getToken:s=>fk(n,s)}};function xk(){bn(new ln(qw,yk,"PUBLIC")),bn(new ln(gk,vk,"PRIVATE"))}xk();Bt(Nw,Tm);Bt(Nw,Tm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="analytics",_k="firebase_id",wk="origin",Ek=60*1e3,bk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",km="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=new pu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Yt=new Ms("analytics","Analytics",Ik);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){if(!t.startsWith(km)){const e=Yt.create("invalid-gtag-resource",{gtagURL:t});return zt.warn(e.message),""}return t}function Ww(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Sk(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Nk(t,e){const n=Sk("firebase-js-sdk-policy",{createScriptURL:Tk}),r=document.createElement("script"),s=`${km}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Ck(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kk(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await Ww(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){zt.error(c)}t("config",s,i)}async function Ak(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await Ww(n);for(const u of o){const d=c.find(p=>p.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){zt.error(i)}}function Pk(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[c,u]=o;await Ak(t,e,n,c,u)}else if(i==="config"){const[c,u]=o;await kk(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=o;t("consent",c,u)}else if(i==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(i==="set"){const[c]=o;t("set",c)}else t(i,...o)}catch(c){zt.error(c)}}return s}function Rk(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Pk(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function jk(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(km)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=30,Ok=1e3;class Lk{constructor(e={},n=Ok){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Hw=new Lk;function Mk(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Vk(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Mk(r)},i=bk.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let c="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Yt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function Fk(t,e=Hw,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Yt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Yt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Bk;return setTimeout(async()=>{c.abort()},Ek),Kw({appId:r,apiKey:s,measurementId:i},o,c,e)}async function Kw(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Hw){var i;const{appId:o,measurementId:c}=t;try{await Uk(r,e)}catch(u){if(c)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:c};throw u}try{const u=await Vk(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!$k(d)){if(s.deleteThrottleMetadata(o),c)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?Sy(n,s.intervalMillis,Dk):Sy(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,p),zt.debug(`Calling attemptFetch again in ${f} millis`),Kw(t,p,r,s)}}function Uk(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Yt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $k(t){if(!(t instanceof un)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Bk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function zk(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(){if(F_())try{await U_()}catch(t){return zt.warn(Yt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zt.warn(Yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Wk(t,e,n,r,s,i,o){var c;const u=Fk(t);u.then(x=>{n[x.measurementId]=x.appId,t.options.measurementId&&x.measurementId!==t.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>zt.error(x)),e.push(u);const d=qk().then(x=>{if(x)return r.getId()}),[f,p]=await Promise.all([u,d]);jk(i)||Nk(i,f.measurementId),s("js",new Date);const g=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return g[wk]="firebase",g.update=!0,p!=null&&(g[_k]=p),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.app=e}_delete(){return delete $o[this.app.options.appId],Promise.resolve()}}let $o={},r0=[];const s0={};let Ud="dataLayer",Kk="gtag",i0,Gw,o0=!1;function Gk(){const t=[];if(V_()&&t.push("This is a browser extension environment."),ZI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Yt.create("invalid-analytics-context",{errorInfo:e});zt.warn(n.message)}}function Qk(t,e,n){Gk();const r=t.options.appId;if(!r)throw Yt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Yt.create("no-api-key");if($o[r]!=null)throw Yt.create("already-exists",{id:r});if(!o0){Ck(Ud);const{wrappedGtag:i,gtagCore:o}=Rk($o,r0,s0,Ud,Kk);Gw=i,i0=o,o0=!0}return $o[r]=Wk(t,r0,s0,e,i0,Ud,n),new Hk(t)}function Yk(t=gu()){t=Pe(t);const e=Zr(t,Oc);return e.isInitialized()?e.getImmediate():Xk(t)}function Xk(t,e={}){const n=Zr(t,Oc);if(n.isInitialized()){const s=n.getImmediate();if(ua(e,n.getOptions()))return s;throw Yt.create("already-initialized")}return n.initialize({options:e})}function Jk(t,e,n,r){t=Pe(t),zk(Gw,$o[t.app.options.appId],e,n,r).catch(s=>zt.error(s))}const a0="@firebase/analytics",l0="0.10.8";function Zk(){bn(new ln(Oc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Qk(r,s,n)},"PUBLIC")),bn(new ln("analytics-internal",t,"PRIVATE")),Bt(a0,l0),Bt(a0,l0,"esm2017");function t(e){try{const n=e.getProvider(Oc).getImmediate();return{logEvent:(r,s,i)=>Jk(n,r,s,i)}}catch(n){throw Yt.create("interop-component-reg-failed",{reason:n})}}}Zk();var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Qw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function T(){}T.prototype=y.prototype,b.D=y.prototype,b.prototype=new T,b.prototype.constructor=b,b.C=function(N,I,k){for(var v=Array(arguments.length-2),H=2;H<arguments.length;H++)v[H-2]=arguments[H];return y.prototype[I].apply(N,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,T){T||(T=0);var N=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)N[I]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(I=0;16>I;++I)N[I]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=b.g[0],T=b.g[1],I=b.g[2];var k=b.g[3],v=y+(k^T&(I^k))+N[0]+3614090360&4294967295;y=T+(v<<7&4294967295|v>>>25),v=k+(I^y&(T^I))+N[1]+3905402710&4294967295,k=y+(v<<12&4294967295|v>>>20),v=I+(T^k&(y^T))+N[2]+606105819&4294967295,I=k+(v<<17&4294967295|v>>>15),v=T+(y^I&(k^y))+N[3]+3250441966&4294967295,T=I+(v<<22&4294967295|v>>>10),v=y+(k^T&(I^k))+N[4]+4118548399&4294967295,y=T+(v<<7&4294967295|v>>>25),v=k+(I^y&(T^I))+N[5]+1200080426&4294967295,k=y+(v<<12&4294967295|v>>>20),v=I+(T^k&(y^T))+N[6]+2821735955&4294967295,I=k+(v<<17&4294967295|v>>>15),v=T+(y^I&(k^y))+N[7]+4249261313&4294967295,T=I+(v<<22&4294967295|v>>>10),v=y+(k^T&(I^k))+N[8]+1770035416&4294967295,y=T+(v<<7&4294967295|v>>>25),v=k+(I^y&(T^I))+N[9]+2336552879&4294967295,k=y+(v<<12&4294967295|v>>>20),v=I+(T^k&(y^T))+N[10]+4294925233&4294967295,I=k+(v<<17&4294967295|v>>>15),v=T+(y^I&(k^y))+N[11]+2304563134&4294967295,T=I+(v<<22&4294967295|v>>>10),v=y+(k^T&(I^k))+N[12]+1804603682&4294967295,y=T+(v<<7&4294967295|v>>>25),v=k+(I^y&(T^I))+N[13]+4254626195&4294967295,k=y+(v<<12&4294967295|v>>>20),v=I+(T^k&(y^T))+N[14]+2792965006&4294967295,I=k+(v<<17&4294967295|v>>>15),v=T+(y^I&(k^y))+N[15]+1236535329&4294967295,T=I+(v<<22&4294967295|v>>>10),v=y+(I^k&(T^I))+N[1]+4129170786&4294967295,y=T+(v<<5&4294967295|v>>>27),v=k+(T^I&(y^T))+N[6]+3225465664&4294967295,k=y+(v<<9&4294967295|v>>>23),v=I+(y^T&(k^y))+N[11]+643717713&4294967295,I=k+(v<<14&4294967295|v>>>18),v=T+(k^y&(I^k))+N[0]+3921069994&4294967295,T=I+(v<<20&4294967295|v>>>12),v=y+(I^k&(T^I))+N[5]+3593408605&4294967295,y=T+(v<<5&4294967295|v>>>27),v=k+(T^I&(y^T))+N[10]+38016083&4294967295,k=y+(v<<9&4294967295|v>>>23),v=I+(y^T&(k^y))+N[15]+3634488961&4294967295,I=k+(v<<14&4294967295|v>>>18),v=T+(k^y&(I^k))+N[4]+3889429448&4294967295,T=I+(v<<20&4294967295|v>>>12),v=y+(I^k&(T^I))+N[9]+568446438&4294967295,y=T+(v<<5&4294967295|v>>>27),v=k+(T^I&(y^T))+N[14]+3275163606&4294967295,k=y+(v<<9&4294967295|v>>>23),v=I+(y^T&(k^y))+N[3]+4107603335&4294967295,I=k+(v<<14&4294967295|v>>>18),v=T+(k^y&(I^k))+N[8]+1163531501&4294967295,T=I+(v<<20&4294967295|v>>>12),v=y+(I^k&(T^I))+N[13]+2850285829&4294967295,y=T+(v<<5&4294967295|v>>>27),v=k+(T^I&(y^T))+N[2]+4243563512&4294967295,k=y+(v<<9&4294967295|v>>>23),v=I+(y^T&(k^y))+N[7]+1735328473&4294967295,I=k+(v<<14&4294967295|v>>>18),v=T+(k^y&(I^k))+N[12]+2368359562&4294967295,T=I+(v<<20&4294967295|v>>>12),v=y+(T^I^k)+N[5]+4294588738&4294967295,y=T+(v<<4&4294967295|v>>>28),v=k+(y^T^I)+N[8]+2272392833&4294967295,k=y+(v<<11&4294967295|v>>>21),v=I+(k^y^T)+N[11]+1839030562&4294967295,I=k+(v<<16&4294967295|v>>>16),v=T+(I^k^y)+N[14]+4259657740&4294967295,T=I+(v<<23&4294967295|v>>>9),v=y+(T^I^k)+N[1]+2763975236&4294967295,y=T+(v<<4&4294967295|v>>>28),v=k+(y^T^I)+N[4]+1272893353&4294967295,k=y+(v<<11&4294967295|v>>>21),v=I+(k^y^T)+N[7]+4139469664&4294967295,I=k+(v<<16&4294967295|v>>>16),v=T+(I^k^y)+N[10]+3200236656&4294967295,T=I+(v<<23&4294967295|v>>>9),v=y+(T^I^k)+N[13]+681279174&4294967295,y=T+(v<<4&4294967295|v>>>28),v=k+(y^T^I)+N[0]+3936430074&4294967295,k=y+(v<<11&4294967295|v>>>21),v=I+(k^y^T)+N[3]+3572445317&4294967295,I=k+(v<<16&4294967295|v>>>16),v=T+(I^k^y)+N[6]+76029189&4294967295,T=I+(v<<23&4294967295|v>>>9),v=y+(T^I^k)+N[9]+3654602809&4294967295,y=T+(v<<4&4294967295|v>>>28),v=k+(y^T^I)+N[12]+3873151461&4294967295,k=y+(v<<11&4294967295|v>>>21),v=I+(k^y^T)+N[15]+530742520&4294967295,I=k+(v<<16&4294967295|v>>>16),v=T+(I^k^y)+N[2]+3299628645&4294967295,T=I+(v<<23&4294967295|v>>>9),v=y+(I^(T|~k))+N[0]+4096336452&4294967295,y=T+(v<<6&4294967295|v>>>26),v=k+(T^(y|~I))+N[7]+1126891415&4294967295,k=y+(v<<10&4294967295|v>>>22),v=I+(y^(k|~T))+N[14]+2878612391&4294967295,I=k+(v<<15&4294967295|v>>>17),v=T+(k^(I|~y))+N[5]+4237533241&4294967295,T=I+(v<<21&4294967295|v>>>11),v=y+(I^(T|~k))+N[12]+1700485571&4294967295,y=T+(v<<6&4294967295|v>>>26),v=k+(T^(y|~I))+N[3]+2399980690&4294967295,k=y+(v<<10&4294967295|v>>>22),v=I+(y^(k|~T))+N[10]+4293915773&4294967295,I=k+(v<<15&4294967295|v>>>17),v=T+(k^(I|~y))+N[1]+2240044497&4294967295,T=I+(v<<21&4294967295|v>>>11),v=y+(I^(T|~k))+N[8]+1873313359&4294967295,y=T+(v<<6&4294967295|v>>>26),v=k+(T^(y|~I))+N[15]+4264355552&4294967295,k=y+(v<<10&4294967295|v>>>22),v=I+(y^(k|~T))+N[6]+2734768916&4294967295,I=k+(v<<15&4294967295|v>>>17),v=T+(k^(I|~y))+N[13]+1309151649&4294967295,T=I+(v<<21&4294967295|v>>>11),v=y+(I^(T|~k))+N[4]+4149444226&4294967295,y=T+(v<<6&4294967295|v>>>26),v=k+(T^(y|~I))+N[11]+3174756917&4294967295,k=y+(v<<10&4294967295|v>>>22),v=I+(y^(k|~T))+N[2]+718787259&4294967295,I=k+(v<<15&4294967295|v>>>17),v=T+(k^(I|~y))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(I+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+k&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var T=y-this.blockSize,N=this.B,I=this.h,k=0;k<y;){if(I==0)for(;k<=T;)s(this,b,k),k+=this.blockSize;if(typeof b=="string"){for(;k<y;)if(N[I++]=b.charCodeAt(k++),I==this.blockSize){s(this,N),I=0;break}}else for(;k<y;)if(N[I++]=b[k++],I==this.blockSize){s(this,N),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var T=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=T&255,T/=256;for(this.u(b),b=Array(16),y=T=0;4>y;++y)for(var N=0;32>N;N+=8)b[T++]=this.g[y]>>>N&255;return b};function i(b,y){var T=c;return Object.prototype.hasOwnProperty.call(T,b)?T[b]:T[b]=y(b)}function o(b,y){this.h=y;for(var T=[],N=!0,I=b.length-1;0<=I;I--){var k=b[I]|0;N&&k==y||(T[I]=k,N=!1)}this.g=T}var c={};function u(b){return-128<=b&&128>b?i(b,function(y){return new o([y|0],0>y?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return j(d(-b));for(var y=[],T=1,N=0;b>=T;N++)y[N]=b/T|0,T*=4294967296;return new o(y,0)}function f(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return j(f(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),N=p,I=0;I<b.length;I+=8){var k=Math.min(8,b.length-I),v=parseInt(b.substring(I,I+k),y);8>k?(k=d(Math.pow(y,k)),N=N.j(k).add(d(v))):(N=N.j(T),N=N.add(d(v)))}return N}var p=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-j(this).m();for(var b=0,y=1,T=0;T<this.g.length;T++){var N=this.i(T);b+=(0<=N?N:4294967296+N)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(P(this))return"-"+j(this).toString(b);for(var y=d(Math.pow(b,6)),T=this,N="";;){var I=D(T,y).g;T=w(T,I.j(y));var k=((0<T.g.length?T.g[0]:T.h)>>>0).toString(b);if(T=I,C(T))return k+N;for(;6>k.length;)k="0"+k;N=k+N}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function P(b){return b.h==-1}t.l=function(b){return b=w(this,b),P(b)?-1:C(b)?0:1};function j(b){for(var y=b.g.length,T=[],N=0;N<y;N++)T[N]=~b.g[N];return new o(T,~b.h).add(g)}t.abs=function(){return P(this)?j(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),T=[],N=0,I=0;I<=y;I++){var k=N+(this.i(I)&65535)+(b.i(I)&65535),v=(k>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);N=v>>>16,k&=65535,v&=65535,T[I]=v<<16|k}return new o(T,T[T.length-1]&-2147483648?-1:0)};function w(b,y){return b.add(j(y))}t.j=function(b){if(C(this)||C(b))return p;if(P(this))return P(b)?j(this).j(j(b)):j(j(this).j(b));if(P(b))return j(this.j(j(b)));if(0>this.l(x)&&0>b.l(x))return d(this.m()*b.m());for(var y=this.g.length+b.g.length,T=[],N=0;N<2*y;N++)T[N]=0;for(N=0;N<this.g.length;N++)for(var I=0;I<b.g.length;I++){var k=this.i(N)>>>16,v=this.i(N)&65535,H=b.i(I)>>>16,L=b.i(I)&65535;T[2*N+2*I]+=v*L,E(T,2*N+2*I),T[2*N+2*I+1]+=k*L,E(T,2*N+2*I+1),T[2*N+2*I+1]+=v*H,E(T,2*N+2*I+1),T[2*N+2*I+2]+=k*H,E(T,2*N+2*I+2)}for(N=0;N<y;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=y;N<2*y;N++)T[N]=0;return new o(T,0)};function E(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function S(b,y){this.g=b,this.h=y}function D(b,y){if(C(y))throw Error("division by zero");if(C(b))return new S(p,p);if(P(b))return y=D(j(b),y),new S(j(y.g),j(y.h));if(P(y))return y=D(b,j(y)),new S(j(y.g),y.h);if(30<b.g.length){if(P(b)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,N=y;0>=N.l(b);)T=F(T),N=F(N);var I=R(T,1),k=R(N,1);for(N=R(N,2),T=R(T,2);!C(N);){var v=k.add(N);0>=v.l(b)&&(I=I.add(T),k=v),N=R(N,1),T=R(T,1)}return y=w(b,I.j(y)),new S(I,y)}for(I=p;0<=b.l(y);){for(T=Math.max(1,Math.floor(b.m()/y.m())),N=Math.ceil(Math.log(T)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),k=d(T),v=k.j(y);P(v)||0<v.l(b);)T-=N,k=d(T),v=k.j(y);C(k)&&(k=g),I=I.add(k),b=w(b,v)}return new S(I,b)}t.A=function(b){return D(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),T=[],N=0;N<y;N++)T[N]=this.i(N)&b.i(N);return new o(T,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),T=[],N=0;N<y;N++)T[N]=this.i(N)|b.i(N);return new o(T,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),T=[],N=0;N<y;N++)T[N]=this.i(N)^b.i(N);return new o(T,this.h^b.h)};function F(b){for(var y=b.g.length+1,T=[],N=0;N<y;N++)T[N]=b.i(N)<<1|b.i(N-1)>>>31;return new o(T,b.h)}function R(b,y){var T=y>>5;y%=32;for(var N=b.g.length-T,I=[],k=0;k<N;k++)I[k]=0<y?b.i(k+T)>>>y|b.i(k+T+1)<<32-y:b.i(k+T);return new o(I,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Es=o}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yw,No,Xw,Yl,Yh,Jw,Zw,e1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in m))break e;m=m[O]}l=l[l.length-1],_=m[l],h=h(_),h!=_&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,_=!1,O={next:function(){if(!_&&m<l.length){var V=m++;return{value:h(V,l[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,m){return l.call.apply(l.bind,arguments)}function p(l,h,m){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function g(l,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function x(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function C(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(_,O,V){for(var Q=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)Q[Ie-2]=arguments[Ie];return h.prototype[O].apply(_,Q)}}function P(l){const h=l.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=l[_];return m}return[]}function j(l,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const O=l.length||0,V=_.length||0;l.length=O+V;for(let Q=0;Q<V;Q++)l[O+Q]=_[Q]}else l.push(_)}}class w{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function R(l,h,m){for(const _ in l)h.call(m,l[_],_,l)}function b(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function y(l){const h={};for(const m in l)h[m]=l[m];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(l,h){let m,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(m in _)l[m]=_[m];for(let V=0;V<T.length;V++)m=T[V],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function I(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function k(l){c.setTimeout(()=>{throw l},0)}function v(){var l=q;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class H{constructor(){this.h=this.g=null}add(h,m){const _=L.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var L=new w(()=>new z,l=>l.reset());class z{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let G,M=!1,q=new H,Y=()=>{const l=c.Promise.resolve(void 0);G=()=>{l.then(X)}};var X=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(m){k(m)}var h=L;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}M=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};c.addEventListener("test",m,h),c.removeEventListener("test",m,h)}catch{}return l}();function De(l,h){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(F){e:{try{D(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:bt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&De.aa.h.call(this)}}C(De,ue);var bt={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),$u=0;function Bu(l,h,m,_,O){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=O,this.key=++$u,this.da=this.fa=!1}function qs(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ws(l){this.src=l,this.g={},this.h=0}Ws.prototype.add=function(l,h,m,_,O){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var Q=Gi(l,h,_,O);return-1<Q?(h=l[Q],m||(h.fa=!1)):(h=new Bu(h,this.src,V,!!_,O),h.fa=m,l.push(h)),h};function Ki(l,h){var m=h.type;if(m in l.g){var _=l.g[m],O=Array.prototype.indexOf.call(_,h,void 0),V;(V=0<=O)&&Array.prototype.splice.call(_,O,1),V&&(qs(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Gi(l,h,m,_){for(var O=0;O<l.length;++O){var V=l[O];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==_)return O}return-1}var U="closure_lm_"+(1e6*Math.random()|0),ee={};function ce(l,h,m,_,O){if(Array.isArray(h)){for(var V=0;V<h.length;V++)ce(l,h[V],m,_,O);return null}return m=Yi(m),l&&l[Re]?l.K(h,m,d(_)?!!_.capture:!1,O):xe(l,h,m,!1,_,O)}function xe(l,h,m,_,O,V){if(!h)throw Error("Invalid event type");var Q=d(O)?!!O.capture:!!O,Ie=fr(l);if(Ie||(l[U]=Ie=new Ws(l)),m=Ie.add(h,m,_,Q,V),m.proxy)return m;if(_=Ot(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)ge||(O=Q),O===void 0&&(O=!1),l.addEventListener(h.toString(),_,O);else if(l.attachEvent)l.attachEvent(It(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ot(){function l(m){return h.call(l.src,l.listener,m)}const h=ss;return l}function We(l,h,m,_,O){if(Array.isArray(h))for(var V=0;V<h.length;V++)We(l,h[V],m,_,O);else _=d(_)?!!_.capture:!!_,m=Yi(m),l&&l[Re]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],m=Gi(V,m,_,O),-1<m&&(qs(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=fr(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Gi(h,m,_,O)),(m=-1<l?h[l]:null)&&be(m))}function be(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Re])Ki(h.i,l);else{var m=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(m,_,l.capture):h.detachEvent?h.detachEvent(It(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=fr(h))?(Ki(m,l),m.h==0&&(m.src=null,h[U]=null)):qs(l)}}}function It(l){return l in ee?ee[l]:ee[l]="on"+l}function ss(l,h){if(l.da)l=!0;else{h=new De(h,this);var m=l.listener,_=l.ha||l.src;l.fa&&be(l),l=m.call(_,h)}return l}function fr(l){return l=l[U],l instanceof Ws?l:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yi(l){return typeof l=="function"?l:(l[Qi]||(l[Qi]=function(h){return l.handleEvent(h)}),l[Qi])}function dt(){re.call(this),this.i=new Ws(this),this.M=this,this.F=null}C(dt,re),dt.prototype[Re]=!0,dt.prototype.removeEventListener=function(l,h,m,_){We(this,l,h,m,_)};function Tt(l,h){var m,_=l.F;if(_)for(m=[];_;_=_.F)m.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new ue(h,l);else if(h instanceof ue)h.target=h.target||l;else{var O=h;h=new ue(_,l),N(h,O)}if(O=!0,m)for(var V=m.length-1;0<=V;V--){var Q=h.g=m[V];O=Ka(Q,_,!0,h)&&O}if(Q=h.g=l,O=Ka(Q,_,!0,h)&&O,O=Ka(Q,_,!1,h)&&O,m)for(V=0;V<m.length;V++)Q=h.g=m[V],O=Ka(Q,_,!1,h)&&O}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],_=0;_<m.length;_++)qs(m[_]);delete l.g[h],l.h--}}this.F=null},dt.prototype.K=function(l,h,m,_){return this.i.add(String(l),h,!1,m,_)},dt.prototype.L=function(l,h,m,_){return this.i.add(String(l),h,!0,m,_)};function Ka(l,h,m,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,V=0;V<h.length;++V){var Q=h[V];if(Q&&!Q.da&&Q.capture==m){var Ie=Q.listener,tt=Q.ha||Q.src;Q.fa&&Ki(l.i,Q),O=Ie.call(tt,_)!==!1&&O}}return O&&!_.defaultPrevented}function _p(l,h,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function wp(l){l.g=_p(()=>{l.g=null,l.i&&(l.i=!1,wp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class VE extends re{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(l){re.call(this),this.h=l,this.g={}}C(Xi,re);var Ep=[];function bp(l){R(l.g,function(h,m){this.g.hasOwnProperty(m)&&be(h)},l),l.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),bp(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zu=c.JSON.stringify,FE=c.JSON.parse,UE=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function qu(){}qu.prototype.h=null;function Ip(l){return l.h||(l.h=l.i())}function Tp(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wu(){ue.call(this,"d")}C(Wu,ue);function Hu(){ue.call(this,"c")}C(Hu,ue);var is={},Sp=null;function Ga(){return Sp=Sp||new dt}is.La="serverreachability";function Np(l){ue.call(this,is.La,l)}C(Np,ue);function Zi(l){const h=Ga();Tt(h,new Np(h))}is.STAT_EVENT="statevent";function Cp(l,h){ue.call(this,is.STAT_EVENT,l),this.stat=h}C(Cp,ue);function St(l){const h=Ga();Tt(h,new Cp(h,l))}is.Ma="timingevent";function kp(l,h){ue.call(this,is.Ma,l),this.size=h}C(kp,ue);function eo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function $E(l,h,m,_,O,V){l.info(function(){if(l.g)if(V)for(var Q="",Ie=V.split("&"),tt=0;tt<Ie.length;tt++){var ye=Ie[tt].split("=");if(1<ye.length){var ht=ye[0];ye=ye[1];var ft=ht.split("_");Q=2<=ft.length&&ft[1]=="type"?Q+(ht+"="+ye+"&"):Q+(ht+"=redacted&")}}else Q=null;else Q=V;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+m+`
`+Q})}function BE(l,h,m,_,O,V,Q){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+m+`
`+V+" "+Q})}function Hs(l,h,m,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qE(l,m)+(_?" "+_:"")})}function zE(l,h){l.info(function(){return"TIMEOUT: "+h})}to.prototype.info=function(){};function qE(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var _=m[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Q=1;Q<O.length;Q++)O[Q]=""}}}}return zu(m)}catch{return h}}var Qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ap={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ku;function Ya(){}C(Ya,qu),Ya.prototype.g=function(){return new XMLHttpRequest},Ya.prototype.i=function(){return{}},Ku=new Ya;function mr(l,h,m,_){this.j=l,this.i=h,this.l=m,this.R=_||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pp}function Pp(){this.i=null,this.g="",this.h=!1}var Rp={},Gu={};function Qu(l,h,m){l.L=1,l.v=el(Mn(h)),l.m=m,l.P=!0,jp(l,null)}function jp(l,h){l.F=Date.now(),Xa(l),l.A=Mn(l.v);var m=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Kp(m.i,"t",_),l.C=0,m=l.j.J,l.h=new Pp,l.g=dg(l.j,m?h:null,!l.m),0<l.O&&(l.M=new VE(g(l.Y,l,l.g),l.O)),h=l.U,m=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ep[0]=O.toString()),O=Ep);for(var V=0;V<O.length;V++){var Q=ce(m,O[V],_||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Zi(),$E(l.i,l.u,l.A,l.l,l.R,l.m)}mr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Vn(l)==3?h.j():this.Y(l)},mr.prototype.Y=function(l){try{if(l==this.g)e:{const ft=Vn(this.g);var h=this.g.Ba();const Qs=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||eg(this.g)))){this.J||ft!=4||h==7||(h==8||0>=Qs?Zi(3):Zi(2)),Yu(this);var m=this.g.Z();this.X=m;t:if(Dp(this)){var _=eg(this.g);l="";var O=_.length,V=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),no(this);var Q="";break t}this.h.i=new c.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(V&&h==O-1)});_.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=m==200,BE(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,tt=this.g;if((Ie=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ie)){var ye=Ie;break t}}ye=null}if(m=ye)Hs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xu(this,m);else{this.o=!1,this.s=3,St(12),os(this),no(this);break e}}if(this.P){m=!0;let dn;for(;!this.J&&this.C<Q.length;)if(dn=WE(this,Q),dn==Gu){ft==4&&(this.s=4,St(14),m=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Rp){this.s=4,St(15),Hs(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}else Hs(this.i,this.l,dn,null),Xu(this,dn);if(Dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||Q.length!=0||this.h.h||(this.s=1,St(16),m=!1),this.o=this.o&&m,!m)Hs(this.i,this.l,Q,"[Invalid Chunked Response]"),os(this),no(this);else if(0<Q.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),rd(ht),ht.M=!0,St(11))}}else Hs(this.i,this.l,Q,null),Xu(this,Q);ft==4&&os(this),this.o&&!this.J&&(ft==4?ag(this.j,this):(this.o=!1,Xa(this)))}else l2(this.g),m==400&&0<Q.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),os(this),no(this)}}}catch{}finally{}};function Dp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function WE(l,h){var m=l.C,_=h.indexOf(`
`,m);return _==-1?Gu:(m=Number(h.substring(m,_)),isNaN(m)?Rp:(_+=1,_+m>h.length?Gu:(h=h.slice(_,_+m),l.C=_+m,h)))}mr.prototype.cancel=function(){this.J=!0,os(this)};function Xa(l){l.S=Date.now()+l.I,Op(l,l.I)}function Op(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=eo(g(l.ba,l),h)}function Yu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}mr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(zE(this.i,this.A),this.L!=2&&(Zi(),St(17)),os(this),this.s=2,no(this)):Op(this,this.S-l)};function no(l){l.j.G==0||l.J||ag(l.j,l)}function os(l){Yu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,bp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Xu(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Ju(m.h,l))){if(!l.K&&Ju(m.h,l)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)ol(m),sl(m);else break e;nd(m),St(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=eo(g(m.Za,m),6e3));if(1>=Vp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ls(m,11)}else if((l.K||m.g==l)&&ol(m),!E(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let ye=O[h];if(m.T=ye[0],ye=ye[1],m.G==2)if(ye[0]=="c"){m.K=ye[1],m.ia=ye[2];const ht=ye[3];ht!=null&&(m.la=ht,m.j.info("VER="+m.la));const ft=ye[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const Qs=ye[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(_=1.5*Qs,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const dn=l.g;if(dn){const ll=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var V=_.h;V.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zu(V,V.h),V.h=null))}if(_.D){const sd=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;sd&&(_.ya=sd,Se(_.I,_.D,sd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var Q=l;if(_.qa=ug(_,_.J?_.ia:null,_.W),Q.K){Fp(_.h,Q);var Ie=Q,tt=_.L;tt&&(Ie.I=tt),Ie.B&&(Yu(Ie),Xa(Ie)),_.g=Q}else ig(_);0<m.i.length&&il(m)}else ye[0]!="stop"&&ye[0]!="close"||ls(m,7);else m.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ls(m,7):td(m):ye[0]!="noop"&&m.l&&m.l.ta(ye),m.v=0)}}Zi(4)}catch{}}var HE=class{constructor(l,h){this.g=l,this.map=h}};function Lp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Vp(l){return l.h?1:l.g?l.g.size:0}function Ju(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Zu(l,h){l.g?l.g.add(h):l.h=h}function Fp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Lp.prototype.cancel=function(){if(this.i=Up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Up(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return P(l.i)}function KE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,_=0;_<m;_++)h.push(l[_]);return h}h=[],m=0;for(_ in l)h[m++]=l[_];return h}function GE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const _ in l)h[m++]=_;return h}}}function $p(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=GE(l),_=KE(l),O=_.length,V=0;V<O;V++)h.call(void 0,_[V],m&&m[V],l)}var Bp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QE(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var _=l[m].indexOf("="),O=null;if(0<=_){var V=l[m].substring(0,_);O=l[m].substring(_+1)}else V=l[m];h(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function as(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof as){this.h=l.h,Ja(this,l.j),this.o=l.o,this.g=l.g,Za(this,l.s),this.l=l.l;var h=l.i,m=new io;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),zp(this,m),this.m=l.m}else l&&(h=String(l).match(Bp))?(this.h=!1,Ja(this,h[1]||"",!0),this.o=ro(h[2]||""),this.g=ro(h[3]||"",!0),Za(this,h[4]),this.l=ro(h[5]||"",!0),zp(this,h[6]||"",!0),this.m=ro(h[7]||"")):(this.h=!1,this.i=new io(null,this.h))}as.prototype.toString=function(){var l=[],h=this.j;h&&l.push(so(h,qp,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(so(h,qp,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(so(m,m.charAt(0)=="/"?JE:XE,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",so(m,e2)),l.join("")};function Mn(l){return new as(l)}function Ja(l,h,m){l.j=m?ro(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Za(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function zp(l,h,m){h instanceof io?(l.i=h,t2(l.i,l.h)):(m||(h=so(h,ZE)),l.i=new io(h,l.h))}function Se(l,h,m){l.i.set(h,m)}function el(l){return Se(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ro(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function so(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,YE),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function YE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qp=/[#\/\?@]/g,XE=/[#\?:]/g,JE=/[#\?]/g,ZE=/[#\?@]/g,e2=/#/g;function io(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function pr(l){l.g||(l.g=new Map,l.h=0,l.i&&QE(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=io.prototype,t.add=function(l,h){pr(this),this.i=null,l=Ks(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Wp(l,h){pr(l),h=Ks(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Hp(l,h){return pr(l),h=Ks(l,h),l.g.has(h)}t.forEach=function(l,h){pr(this),this.g.forEach(function(m,_){m.forEach(function(O){l.call(h,O,_,this)},this)},this)},t.na=function(){pr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const O=l[_];for(let V=0;V<O.length;V++)m.push(h[_])}return m},t.V=function(l){pr(this);let h=[];if(typeof l=="string")Hp(this,l)&&(h=h.concat(this.g.get(Ks(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return pr(this),this.i=null,l=Ks(this,l),Hp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Kp(l,h,m){Wp(l,h),0<m.length&&(l.i=null,l.g.set(Ks(l,h),P(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const V=encodeURIComponent(String(_)),Q=this.V(_);for(_=0;_<Q.length;_++){var O=V;Q[_]!==""&&(O+="="+encodeURIComponent(String(Q[_]))),l.push(O)}}return this.i=l.join("&")};function Ks(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function t2(l,h){h&&!l.j&&(pr(l),l.i=null,l.g.forEach(function(m,_){var O=_.toLowerCase();_!=O&&(Wp(this,_),Kp(this,O,m))},l)),l.j=h}function n2(l,h){const m=new to;if(c.Image){const _=new Image;_.onload=x(gr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=x(gr,m,"TestLoadImage: error",!1,h,_),_.onabort=x(gr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=x(gr,m,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function r2(l,h){const m=new to,_=new AbortController,O=setTimeout(()=>{_.abort(),gr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(V=>{clearTimeout(O),V.ok?gr(m,"TestPingServer: ok",!0,h):gr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),gr(m,"TestPingServer: error",!1,h)})}function gr(l,h,m,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(m)}catch{}}function s2(){this.g=new UE}function i2(l,h,m){const _=m||"";try{$p(l,function(O,V){let Q=O;d(O)&&(Q=zu(O)),h.push(_+V+"="+encodeURIComponent(Q))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function tl(l){this.l=l.Ub||null,this.j=l.eb||!1}C(tl,qu),tl.prototype.g=function(){return new nl(this.l,this.j)},tl.prototype.i=function(l){return function(){return l}}({});function nl(l,h){dt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(nl,dt),t=nl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ao(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?oo(this):ao(this),this.readyState==3&&Gp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,oo(this))},t.Qa=function(l){this.g&&(this.response=l,oo(this))},t.ga=function(){this.g&&oo(this)};function oo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ao(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function ao(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qp(l){let h="";return R(l,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function ed(l,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Qp(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Se(l,h,m))}function Ue(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ue,dt);var o2=/^https?$/i,a2=["POST","PUT"];t=Ue.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ku.g(),this.v=this.o?Ip(this.o):Ip(Ku),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Yp(this,V);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)m.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())m.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),O=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(a2,h,void 0))||_||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Q]of m)this.g.setRequestHeader(V,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zp(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Yp(this,V)}};function Yp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Xp(l),rl(l)}function Xp(l){l.A||(l.A=!0,Tt(l,"complete"),Tt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Tt(this,"complete"),Tt(this,"abort"),rl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jp(this):this.bb())},t.bb=function(){Jp(this)};function Jp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)_p(l.Ea,0,l);else if(Tt(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=Q===0){var O=String(l.D).match(Bp)[1]||null;!O&&c.self&&c.self.location&&(O=c.self.location.protocol.slice(0,-1)),_=!o2.test(O?O.toLowerCase():"")}m=_}if(m)Tt(l,"complete"),Tt(l,"success");else{l.m=6;try{var V=2<Vn(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Xp(l)}}finally{rl(l)}}}}function rl(l,h){if(l.g){Zp(l);const m=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Tt(l,"ready");try{m.onreadystatechange=_}catch{}}}function Zp(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),FE(h)}};function eg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function l2(l){const h={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(E(l[_]))continue;var m=I(l[_]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[O]||[];h[O]=V,V.push(m)}b(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function tg(l){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,l),this.cb=lo("retryDelaySeedMs",1e4,l),this.Wa=lo("forwardChannelMaxRetries",2,l),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Lp(l&&l.concurrentRequestLimit),this.Da=new s2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tg.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,_){St(0),this.W=l,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=ug(this,null,this.W),il(this)};function td(l){if(ng(l),l.G==3){var h=l.U++,m=Mn(l.I);if(Se(m,"SID",l.K),Se(m,"RID",h),Se(m,"TYPE","terminate"),co(l,m),h=new mr(l,l.j,h),h.L=2,h.v=el(Mn(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=h.v,m=!0),m||(h.g=dg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Xa(h)}cg(l)}function sl(l){l.g&&(rd(l),l.g.cancel(),l.g=null)}function ng(l){sl(l),l.u&&(c.clearTimeout(l.u),l.u=null),ol(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function il(l){if(!Mp(l.h)&&!l.s){l.s=!0;var h=l.Ga;G||Y(),M||(G(),M=!0),q.add(h,l),l.B=0}}function c2(l,h){return Vp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=eo(g(l.Ga,l,h),lg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new mr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=y(V),N(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=sg(this,O,h),m=Mn(this.I),Se(m,"RID",l),Se(m,"CVER",22),this.D&&Se(m,"X-HTTP-Session-Id",this.D),co(this,m),V&&(this.O?h="headers="+encodeURIComponent(String(Qp(V)))+"&"+h:this.m&&ed(m,this.m,V)),Zu(this.h,O),this.Ua&&Se(m,"TYPE","init"),this.P?(Se(m,"$req",h),Se(m,"SID","null"),O.T=!0,Qu(O,m,null)):Qu(O,m,h),this.G=2}}else this.G==3&&(l?rg(this,l):this.i.length==0||Mp(this.h)||rg(this))};function rg(l,h){var m;h?m=h.l:m=l.U++;const _=Mn(l.I);Se(_,"SID",l.K),Se(_,"RID",m),Se(_,"AID",l.T),co(l,_),l.m&&l.o&&ed(_,l.m,l.o),m=new mr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=sg(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Zu(l.h,m),Qu(m,_,h)}function co(l,h){l.H&&R(l.H,function(m,_){Se(h,_,m)}),l.l&&$p({},function(m,_){Se(h,_,m)})}function sg(l,h,m){m=Math.min(l.i.length,m);var _=l.l?g(l.l.Na,l.l,l):null;e:{var O=l.i;let V=-1;for(;;){const Q=["count="+m];V==-1?0<m?(V=O[0].g,Q.push("ofs="+V)):V=0:Q.push("ofs="+V);let Ie=!0;for(let tt=0;tt<m;tt++){let ye=O[tt].g;const ht=O[tt].map;if(ye-=V,0>ye)V=Math.max(0,O[tt].g-100),Ie=!1;else try{i2(ht,Q,"req"+ye+"_")}catch{_&&_(ht)}}if(Ie){_=Q.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,_}function ig(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;G||Y(),M||(G(),M=!0),q.add(h,l),l.v=0}}function nd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=eo(g(l.Fa,l),lg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,og(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=eo(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),sl(this),og(this))};function rd(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function og(l){l.g=new mr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Mn(l.qa);Se(h,"RID","rpc"),Se(h,"SID",l.K),Se(h,"AID",l.T),Se(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Se(h,"TO",l.ja),Se(h,"TYPE","xmlhttp"),co(l,h),l.m&&l.o&&ed(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=el(Mn(h)),m.m=null,m.P=!0,jp(m,l)}t.Za=function(){this.C!=null&&(this.C=null,sl(this),nd(this),St(19))};function ol(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function ag(l,h){var m=null;if(l.g==h){ol(l),rd(l),l.g=null;var _=2}else if(Ju(l.h,h))m=h.D,Fp(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;_=Ga(),Tt(_,new kp(_,m)),il(l)}else ig(l);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&c2(l,h)||_==2&&nd(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),O){case 1:ls(l,5);break;case 4:ls(l,10);break;case 3:ls(l,6);break;default:ls(l,2)}}}function lg(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function ls(l,h){if(l.j.info("Error code "+h),h==2){var m=g(l.fb,l),_=l.Xa;const O=!_;_=new as(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ja(_,"https"),el(_),O?n2(_.toString(),m):r2(_.toString(),m)}else St(2);l.G=0,l.l&&l.l.sa(h),cg(l),ng(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function cg(l){if(l.G=0,l.ka=[],l.l){const h=Up(l.h);(h.length!=0||l.i.length!=0)&&(j(l.ka,h),j(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function ug(l,h,m){var _=m instanceof as?Mn(m):new as(m);if(_.g!="")h&&(_.g=h+"."+_.g),Za(_,_.s);else{var O=c.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var V=new as(null);_&&Ja(V,_),h&&(V.g=h),O&&Za(V,O),m&&(V.l=m),_=V}return m=l.D,h=l.ya,m&&h&&Se(_,m,h),Se(_,"VER",l.la),co(l,_),_}function dg(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ue(new tl({eb:m})):new Ue(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hg(){}t=hg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function al(){}al.prototype.g=function(l,h){return new qt(l,h)};function qt(l,h){dt.call(this),this.g=new tg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Gs(this)}C(qt,dt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){td(this.g)},qt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=zu(l),l=m);h.i.push(new HE(h.Ya++,l)),h.G==3&&il(h)},qt.prototype.N=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,qt.aa.N.call(this)};function fg(l){Wu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(fg,Wu);function mg(){Hu.call(this),this.status=1}C(mg,Hu);function Gs(l){this.g=l}C(Gs,hg),Gs.prototype.ua=function(){Tt(this.g,"a")},Gs.prototype.ta=function(l){Tt(this.g,new fg(l))},Gs.prototype.sa=function(l){Tt(this.g,new mg)},Gs.prototype.ra=function(){Tt(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,e1=function(){return new al},Zw=function(){return Ga()},Jw=is,Yh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Yl=Qa,Ap.COMPLETE="complete",Xw=Ap,Tp.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",dt.prototype.listen=dt.prototype.K,No=Tp,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,Yw=Ue}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});const u0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new pu("@firebase/firestore");function xo(){return Rs.logLevel}function te(t,...e){if(Rs.logLevel<=fe.DEBUG){const n=e.map(Am);Rs.debug(`Firestore (${zi}): ${t}`,...n)}}function sr(t,...e){if(Rs.logLevel<=fe.ERROR){const n=e.map(Am);Rs.error(`Firestore (${zi}): ${t}`,...n)}}function Ai(t,...e){if(Rs.logLevel<=fe.WARN){const n=e.map(Am);Rs.warn(`Firestore (${zi}): ${t}`,...n)}}function Am(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function Ee(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends un{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class tA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nA{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new t1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new yt(e)}}class rA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new iA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=aA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Xe(0,0))}static max(){return new ae(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ma?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends ma{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const lA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ma{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return lA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new J($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new J($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(ke.fromString(e))}static fromName(e){return new se(ke.fromString(e).popFirst(5))}static empty(){return new se(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new ke(e.slice()))}}function cA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Kr(s,se.empty(),e)}function uA(t){return new Kr(t.readTime,t.key,-1)}class Kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kr(ae.min(),se.empty(),-1)}static max(){return new Kr(ae.max(),se.empty(),-1)}}function dA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==hA)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function mA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Da(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pm.oe=-1;function Eu(t){return t==null}function Lc(t){return t===0&&1/t==-1/0}function pA(t){return typeof t=="number"&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new s1("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const gA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=gA.exec(t);if(Ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jm(t){const e=t.mapValue.fields.__previous_value__;return Rm(e)?jm(e):e}function pa(t){const e=Gr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r,s,i,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl={mapValue:{}};function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rm(t)?4:xA(t)?9007199254740991:vA(t)?10:11:oe()}function jn(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pa(t).isEqual(pa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gr(s.timestampValue),c=Gr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return js(s.bytesValue).isEqual(js(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),c=Be(i.doubleValue);return o===c?Lc(o)===Lc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Pi(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(d0(o)!==d0(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!jn(o[u],c[u])))return!1;return!0}(t,e);default:return oe()}}function ya(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Ri(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Be(i.integerValue||i.doubleValue),u=Be(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return f0(t.timestampValue,e.timestampValue);case 4:return f0(pa(t),pa(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,o){const c=js(i),u=js(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ve(c[d],u[d]);if(f!==0)return f}return ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ve(Be(i.latitude),Be(o.latitude));return c!==0?c:ve(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,f;const p=i.fields||{},g=o.fields||{},x=(c=p.value)===null||c===void 0?void 0:c.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=ve(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:m0(x,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===kl.mapValue&&o===kl.mapValue)return 0;if(i===kl.mapValue)return 1;if(o===kl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=ve(u[p],f[p]);if(g!==0)return g;const x=Ri(c[u[p]],d[f[p]]);if(x!==0)return x}return ve(u.length,f.length)}(t.mapValue,e.mapValue);default:throw oe()}}function f0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Gr(t),r=Gr(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function m0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ri(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function ji(t){return Xh(t)}function Xh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Xh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Xh(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function p0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jh(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function g0(t){return!!t&&"nullValue"in t}function y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xl(t){return!!t&&"mapValue"in t}function vA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Bo(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mt(Bo(this.value))}}function i1(t){const e=[];return Fs(t.fields,(n,r)=>{const s=new ot([n]);if(Xl(r)){const i=i1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new xt(e,0,ae.min(),ae.min(),ae.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,ae.min(),ae.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ae.min(),ae.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.position=e,this.inclusive=n}}function v0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function x0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function _A(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{}class Ge extends o1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EA(e,n,r):n==="array-contains"?new TA(e,r):n==="in"?new SA(e,r):n==="not-in"?new NA(e,r):n==="array-contains-any"?new CA(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bA(e,r):new IA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ri(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends o1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new In(e,n)}matches(e){return a1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function a1(t){return t.op==="and"}function l1(t){return wA(t)&&a1(t)}function wA(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function Zh(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+ji(t.value);if(l1(t))return t.filters.map(e=>Zh(e)).join(",");{const e=t.filters.map(n=>Zh(n)).join(",");return`${t.op}(${e})`}}function c1(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof In?function(r,s){return s instanceof In&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&c1(o,s.filters[c]),!0):!1}(t,e):void oe()}function u1(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${ji(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(u1).join(" ,")+"}"}(t):"Filter"}class EA extends Ge{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class bA extends Ge{constructor(e,n){super(e,"in",n),this.keys=d1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IA extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=d1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class TA extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dm(n)&&ya(n.arrayValue,this.value)}}class SA extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ya(this.value.arrayValue,n)}}class NA extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ya(this.value.arrayValue,n)}}class CA extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ya(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function _0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new kA(t,e,n,r,s,i,o)}function Om(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Eu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ji(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ji(r)).join(",")),e.ue=n}return e.ue}function Lm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_A(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x0(t.startAt,e.startAt)&&x0(t.endAt,e.endAt)}function ef(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function AA(t,e,n,r,s,i,o,c){return new Oa(t,e,n,r,s,i,o,c)}function bu(t){return new Oa(t)}function w0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h1(t){return t.collectionGroup!==null}function zo(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new lt(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Vc(i,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new Vc(ot.keyField(),r))}return e.ce}function Pn(t){const e=le(t);return e.le||(e.le=PA(e,zo(t))),e.le}function PA(t,e){if(t.limitType==="F")return _0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vc(s.field,i)});const n=t.endAt?new Mc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mc(t.startAt.position,t.startAt.inclusive):null;return _0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tf(t,e){const n=t.filters.concat([e]);return new Oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nf(t,e,n){return new Oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Iu(t,e){return Lm(Pn(t),Pn(e))&&t.limitType===e.limitType}function f1(t){return`${Om(Pn(t))}|lt:${t.limitType}`}function Xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>u1(s)).join(", ")}]`),Eu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ji(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ji(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function Tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=v0(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,zo(r),s)||r.endAt&&!function(o,c,u){const d=v0(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,zo(r),s))}(t,e)}function RA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m1(t){return(e,n)=>{let r=!1;for(const s of zo(t)){const i=jA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jA(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Ri(u,d):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new Fe(se.comparator);function ir(){return DA}const p1=new Fe(se.comparator);function Co(...t){let e=p1;for(const n of t)e=e.insert(n.key,n);return e}function g1(t){let e=p1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vs(){return qo()}function y1(){return qo()}function qo(){return new qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const OA=new Fe(se.comparator),LA=new lt(se.comparator);function he(...t){let e=LA;for(const n of t)e=e.add(n);return e}const MA=new lt(ve);function VA(){return MA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function v1(t){return{integerValue:""+t}}function FA(t,e){return pA(e)?v1(e):Mm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this._=void 0}}function UA(t,e,n){return t instanceof va?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rm(i)&&(i=jm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof xa?_1(t,e):t instanceof _a?w1(t,e):function(s,i){const o=x1(s,i),c=E0(o)+E0(s.Pe);return Jh(o)&&Jh(s.Pe)?v1(c):Mm(s.serializer,c)}(t,e)}function $A(t,e,n){return t instanceof xa?_1(t,e):t instanceof _a?w1(t,e):n}function x1(t,e){return t instanceof Fc?function(r){return Jh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class va extends Su{}class xa extends Su{constructor(e){super(),this.elements=e}}function _1(t,e){const n=E1(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends Su{constructor(e){super(),this.elements=e}}function w1(t,e){let n=E1(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class Fc extends Su{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function E0(t){return Be(t.integerValue||t.doubleValue)}function E1(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.field=e,this.transform=n}}function zA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof xa&&s instanceof xa||r instanceof _a&&s instanceof _a?Pi(r.elements,s.elements,jn):r instanceof Fc&&s instanceof Fc?jn(r.Pe,s.Pe):r instanceof va&&s instanceof va}(t.transform,e.transform)}class qA{constructor(e,n){this.version=e,this.transformResults=n}}class At{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new At}static exists(e){return new At(void 0,e)}static updateTime(e){return new At(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nu{}function b1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cu(t.key,At.none()):new La(t.key,t.data,At.none());{const n=t.data,r=Mt.empty();let s=new lt(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new es(t.key,r,new Kt(s.toArray()),At.none())}}function WA(t,e,n){t instanceof La?function(s,i,o){const c=s.value.clone(),u=I0(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof es?function(s,i,o){if(!Jl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=I0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(I1(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof La?function(i,o,c,u){if(!Jl(i.precondition,o))return c;const d=i.value.clone(),f=T0(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(i,o,c,u){if(!Jl(i.precondition,o))return c;const d=T0(i.fieldTransforms,u,o),f=o.data;return f.setAll(I1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return Jl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function HA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=x1(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function b0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pi(r,s,(i,o)=>zA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class La extends Nu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class es extends Nu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function I1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I0(t,e,n){const r=new Map;Ee(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,$A(o,c,n[s]))}return r}function T0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,UA(i,o,e))}return r}class Cu extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KA extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=y1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=b1(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,(n,r)=>b0(n,r))&&Pi(this.baseMutations,e.baseMutations,(n,r)=>b0(n,r))}}class Vm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length);let s=function(){return OA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,me;function XA(t){switch(t){default:return oe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function T1(t){if(t===void 0)return sr("GRPC error has no .code"),$.UNKNOWN;switch(t){case He.OK:return $.OK;case He.CANCELLED:return $.CANCELLED;case He.UNKNOWN:return $.UNKNOWN;case He.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case He.INTERNAL:return $.INTERNAL;case He.UNAVAILABLE:return $.UNAVAILABLE;case He.UNAUTHENTICATED:return $.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case He.NOT_FOUND:return $.NOT_FOUND;case He.ALREADY_EXISTS:return $.ALREADY_EXISTS;case He.PERMISSION_DENIED:return $.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case He.ABORTED:return $.ABORTED;case He.OUT_OF_RANGE:return $.OUT_OF_RANGE;case He.UNIMPLEMENTED:return $.UNIMPLEMENTED;case He.DATA_LOSS:return $.DATA_LOSS;default:return oe()}}(me=He||(He={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new Es([4294967295,4294967295],0);function S0(t){const e=JA().encode(t),n=new Qw;return n.update(e),new Uint8Array(n.digest())}function N0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Es([n,r],0),new Es([s,i],0)]}class Fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ko(`Invalid padding: ${n}`);if(r<0)throw new ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ko(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Es.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Es.fromNumber(r)));return s.compare(ZA)===1&&(s=new Es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=S0(e),[r,s]=N0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fm(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=S0(e),[r,s]=N0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ku(ae.min(),s,new Fe(ve),ir(),he())}}class Ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ma(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class S1{constructor(e,n){this.targetId=e,this.me=n}}class N1{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class C0{constructor(){this.fe=0,this.ge=A0(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new Ma(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=A0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eP{constructor(e){this.Le=e,this.Be=new Map,this.ke=ir(),this.qe=k0(),this.Qe=new Fe(ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(ef(i))if(r===0){const o=new se(i.path);this.Ue(n,o,xt.newNoDocument(o,ae.min()))}else Ee(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=js(r).toUint8Array()}catch(u){if(u instanceof s1)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Fm(o,s,i)}catch(u){return Ai(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&ef(c.target)){const u=new se(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,xt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=he();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ku(e,n,this.Qe,this.ke,r);return this.ke=ir(),this.qe=k0(),this.Qe=new Fe(ve),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new C0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new C0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function k0(){return new Fe(se.comparator)}function A0(){return new Fe(se.comparator)}const tP={asc:"ASCENDING",desc:"DESCENDING"},nP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class sP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rf(t,e){return t.useProto3Json||Eu(e)?e:{value:e}}function Uc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iP(t,e){return Uc(t,e.toTimestamp())}function Rn(t){return Ee(!!t),ae.fromTimestamp(function(n){const r=Gr(n);return new Xe(r.seconds,r.nanos)}(t))}function Um(t,e){return sf(t,e).canonicalString()}function sf(t,e){const n=function(s){return new ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function k1(t){const e=ke.fromString(t);return Ee(D1(e)),e}function of(t,e){return Um(t.databaseId,e.path)}function $d(t,e){const n=k1(e);if(n.get(1)!==t.databaseId.projectId)throw new J($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(P1(n))}function A1(t,e){return Um(t.databaseId,e)}function oP(t){const e=k1(t);return e.length===4?ke.emptyPath():P1(e)}function af(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function P1(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function P0(t,e,n){return{name:of(t,e),fields:n.value.mapValue.fields}}function aP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Ee(f===void 0||typeof f=="string"),ut.fromBase64String(f||"")):(Ee(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ut.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?$.UNKNOWN:T1(d.code);return new J(f,d.message||"")}(o);n=new N1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$d(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ae.min(),c=new Mt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Zl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$d(t,r.document),i=r.readTime?Rn(r.readTime):ae.min(),o=xt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Zl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$d(t,r.document),i=r.removedTargetIds||[];n=new Zl([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new YA(s,i),c=r.targetId;n=new S1(c,o)}}return n}function lP(t,e){let n;if(e instanceof La)n={update:P0(t,e.key,e.value)};else if(e instanceof Cu)n={delete:of(t,e.key)};else if(e instanceof es)n={update:P0(t,e.key,e.data),updateMask:yP(e.fieldMask)};else{if(!(e instanceof KA))return oe();n={verify:of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _a)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function cP(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(ae.min())&&(o=Rn(i)),new qA(o,s.transformResults||[])}(n,e))):[]}function uP(t,e){return{documents:[A1(t,e.path)]}}function dP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=A1(t,s);const i=function(d){if(d.length!==0)return j1(In.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Js(g.field),direction:mP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=rf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function hP(t){let e=oP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=R1(p);return g instanceof In&&l1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Vc(Zs(C.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Eu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,x=p.values||[];return new Mc(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new Mc(x,g)}(n.endAt)),AA(e,s,o,i,c,"F",u,d)}function fP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function R1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zs(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zs(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zs(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zs(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Zs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(r=>R1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function mP(t){return tP[t]}function pP(t){return nP[t]}function gP(t){return rP[t]}function Js(t){return{fieldPath:t.canonicalString()}}function Zs(t){return ot.fromServerFormat(t.fieldPath)}function j1(t){return t instanceof Ge?function(n){if(n.op==="=="){if(y0(n.value))return{unaryFilter:{field:Js(n.field),op:"IS_NAN"}};if(g0(n.value))return{unaryFilter:{field:Js(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y0(n.value))return{unaryFilter:{field:Js(n.field),op:"IS_NOT_NAN"}};if(g0(n.value))return{unaryFilter:{field:Js(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(n.field),op:pP(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(s=>j1(s));return r.length===1?r[0]:{compositeFilter:{op:gP(n.op),filters:r}}}(t):oe()}function yP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function D1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,s,i=ae.min(),o=ae.min(),c=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.ct=e}}function xP(t){const e=hP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.un=new wP}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Kr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class wP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Di(0)}static kn(){return new Di(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.changes=new qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,Kt.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=vs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Co();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=ir();const o=qo(),c=function(){return qo()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof es)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Wo(f.mutation,d,f.mutation.getFieldMask(),Xe.now())):o.set(d.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new bP(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=qo();let s=new Fe((o,c)=>o-c),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Kt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const p=(s.get(c.batchId)||he()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,p=y1();f.forEach(g=>{if(!i.has(g)){const x=b1(n.get(g),r.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(vs());let c=-1,u=i;return o.next(d=>B.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(f=>({batchId:c,changes:g1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Co();return this.indexManager.getCollectionParents(e,i).next(c=>B.forEach(c,u=>{const d=function(p,g){return new Oa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,xt.newInvalidDocument(f)))});let c=Co();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Wo(f.mutation,d,Kt.empty(),Xe.now()),Tu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:xP(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.overlays=new Fe(se.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vs();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=vs(),i=n.length+1,o=new se(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=vs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=vs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return B.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QA(n,r));let i=this.Ir.get(n);i===void 0&&(i=he(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Tr=new lt(Je.Er),this.dr=new lt(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new ke([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new ke([])),r=new Je(n,e),s=new Je(n,e+1);let i=he();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Je.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GA(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new Je(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(ve);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new Je(new se(i),0);let c=new lt(ve);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),B.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.Mr=e,this.docs=function(){return new Fe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ir();const o=n.path,c=new se(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||dA(uA(f),r)<=0||(s.has(f.key)||Tu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AP(this)}getSize(e){return B.resolve(this.size)}}class AP extends EP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.persistence=e,this.Nr=new qi(n=>Om(n),Lm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $m,this.targetCount=0,this.kr=Di.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Di(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Pm(0),this.Kr=!1,this.Kr=!0,this.$r=new NP,this.referenceDelegate=e(this),this.Ur=new PP(this),this.indexManager=new _P,this.remoteDocumentCache=function(s){return new kP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new vP(n),this.Gr=new TP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new CP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new jP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class jP extends fA{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Jr=new $m,this.Yr=null}static Zr(e){return new Bm(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JI()?8:mA(Et())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new DP;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(xo()<=fe.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(xo()<=fe.DEBUG&&te("QueryEngine","Query:",Xs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(xo()<=fe.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):B.resolve())}Yi(e,n){if(w0(n))return B.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nf(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,nf(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return w0(n)||s.isEqual(ae.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?B.resolve(null):(xo()<=fe.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xs(n)),this.rs(e,o,n,cA(s,-1)).next(c=>c))})}ts(e,n){let r=new lt(m1(e));return n.forEach((s,i)=>{Tu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return xo()<=fe.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Kr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Fe(ve),this._s=new qi(i=>Om(i),Lm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function MP(t,e,n,r){return new LP(t,e,n,r)}async function O1(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=he();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function VP(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const p=d.batch,g=p.keys();let x=B.resolve();return g.forEach(C=>{x=x.next(()=>f.getEntry(u,C)).next(P=>{const j=d.docVersions.get(C);Ee(j!==null),P.version.compareTo(j)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=he();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function L1(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FP(t,e){const n=le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(ut.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(p,x),function(P,j,w){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,x,f)&&c.push(n.Ur.updateTargetData(i,x))});let u=ir(),d=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(UP(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ae.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return B.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function UP(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):te("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function $P(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BP(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function lf(t,e,n){const r=le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Da(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function R0(t,e,n){const r=le(t);let s=ae.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=le(u),g=p._s.get(f);return g!==void 0?B.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,Pn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:he())).next(c=>(zP(r,RA(e),c),{documents:c,Ts:i})))}function zP(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class j0{constructor(){this.activeTargetIds=VA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qP{constructor(){this.so=new j0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new j0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al=null;function Bd(){return Al===null?Al=function(){return 268435456+Math.round(2147483648*Math.random())}():Al++,"0x"+Al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class GP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=Bd(),u=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(te("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Ai("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=HP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bd();return new Promise((o,c)=>{const u=new Yw;u.setWithCredentials(!0),u.listenOnce(Xw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yl.NO_ERROR:const f=u.getResponseJson();te(gt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Yl.TIMEOUT:te(gt,`RPC '${e}' ${i} timed out`),c(new J($.DEADLINE_EXCEEDED,"Request time out"));break;case Yl.HTTP_ERROR:const p=u.getStatus();if(te(gt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const C=function(j){const w=j.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(x.status);c(new J(C,x.message))}else c(new J($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new J($.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{te(gt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);te(gt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Bd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e1(),c=Zw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");te(gt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,x=!1;const C=new KP({Io:j=>{x?te(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(te(gt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),te(gt,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},To:()=>p.close()}),P=(j,w,E)=>{j.listen(w,S=>{try{E(S)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,No.EventType.OPEN,()=>{x||(te(gt,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),P(p,No.EventType.CLOSE,()=>{x||(x=!0,te(gt,`RPC '${e}' stream ${s} transport closed`),C.So())}),P(p,No.EventType.ERROR,j=>{x||(x=!0,Ai(gt,`RPC '${e}' stream ${s} transport errored:`,j),C.So(new J($.UNAVAILABLE,"The operation could not be completed")))}),P(p,No.EventType.MESSAGE,j=>{var w;if(!x){const E=j.data[0];Ee(!!E);const S=E,D=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(D){te(gt,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let R=function(T){const N=He[T];if(N!==void 0)return T1(N)}(F),b=D.message;R===void 0&&(R=$.INTERNAL,b="Unknown error status: "+F+" with message "+D.message),x=!0,C.So(new J(R,b)),p.close()}else te(gt,`RPC '${e}' stream ${s} received:`,E),C.bo(E)}}),P(c,Jw.STAT_EVENT,j=>{j.stat===Yh.PROXY?te(gt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Yh.NOPROXY&&te(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){return new sP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new M1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new J($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QP extends V1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=aP(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Rn(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=af(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=ef(u)?{documents:uP(i,u)}:{query:dP(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=C1(i,o.resumeToken);const d=rf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ae.min())>0){c.readTime=Uc(i,o.snapshotVersion.toTimestamp());const d=rf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=fP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=af(this.serializer),n.removeTarget=e,this.a_(n)}}class YP extends V1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cP(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=af(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,sf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J($.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,sf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Us(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=le(u);d.L_.add(4),await Va(d),d.q_.set("Unknown"),d.L_.delete(4),await Pu(d)}(this))})}),this.q_=new JP(r,s)}}async function Pu(t){if(Us(t))for(const e of t.B_)await e(!0)}async function Va(t){for(const e of t.B_)await e(!1)}function F1(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Km(n)?Hm(n):Wi(n).r_()&&Wm(n,e))}function qm(t,e){const n=le(t),r=Wi(n);n.N_.delete(e),r.r_()&&U1(n,e),n.N_.size===0&&(r.r_()?r.o_():Us(n)&&n.q_.set("Unknown"))}function Wm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wi(t).A_(e)}function U1(t,e){t.Q_.xe(e),Wi(t).R_(e)}function Hm(t){t.Q_=new eP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wi(t).start(),t.q_.v_()}function Km(t){return Us(t)&&!Wi(t).n_()&&t.N_.size>0}function Us(t){return le(t).L_.size===0}function $1(t){t.Q_=void 0}async function eR(t){t.q_.set("Online")}async function tR(t){t.N_.forEach((e,n)=>{Wm(t,e)})}async function nR(t,e){$1(t),Km(t)?(t.q_.M_(e),Hm(t)):t.q_.set("Unknown")}async function rR(t,e,n){if(t.q_.set("Online"),e instanceof N1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $c(t,r)}else if(e instanceof Zl?t.Q_.Ke(e):e instanceof S1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await L1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(ut.EMPTY_BYTE_STRING,f.snapshotVersion)),U1(i,u);const p=new kr(f.target,u,d,f.sequenceNumber);Wm(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await $c(t,r)}}async function $c(t,e,n){if(!Da(e))throw e;t.L_.add(1),await Va(t),t.q_.set("Offline"),n||(n=()=>L1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Pu(t)})}function B1(t,e){return e().catch(n=>$c(t,n,e))}async function Ru(t){const e=le(t),n=Qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sR(e);)try{const s=await $P(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,iR(e,s)}catch(s){await $c(e,s)}z1(e)&&q1(e)}function sR(t){return Us(t)&&t.O_.length<10}function iR(t,e){t.O_.push(e);const n=Qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function z1(t){return Us(t)&&!Qr(t).n_()&&t.O_.length>0}function q1(t){Qr(t).start()}async function oR(t){Qr(t).p_()}async function aR(t){const e=Qr(t);for(const n of t.O_)e.m_(n.mutations)}async function lR(t,e,n){const r=t.O_.shift(),s=Vm.from(r,e,n);await B1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ru(t)}async function cR(t,e){e&&Qr(t).V_&&await async function(r,s){if(function(o){return XA(o)&&o!==$.ABORTED}(s.code)){const i=r.O_.shift();Qr(r).s_(),await B1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ru(r)}}(t,e),z1(t)&&q1(t)}async function O0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Us(n);n.L_.add(3),await Va(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Pu(n)}async function uR(t,e){const n=le(t);e?(n.L_.delete(2),await Pu(n)):e||(n.L_.add(2),await Va(n),n.q_.set("Unknown"))}function Wi(t){return t.K_||(t.K_=function(n,r,s){const i=le(n);return i.w_(),new QP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:eR.bind(null,t),Ro:tR.bind(null,t),mo:nR.bind(null,t),d_:rR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Km(t)?Hm(t):t.q_.set("Unknown")):(await t.K_.stop(),$1(t))})),t.K_}function Qr(t){return t.U_||(t.U_=function(n,r,s){const i=le(n);return i.w_(),new YP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oR.bind(null,t),mo:cR.bind(null,t),f_:aR.bind(null,t),g_:lR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ru(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Gm(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Da(t))return new J($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Ei(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.W_=new Fe(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Oi(e,n,Ei.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hR{constructor(){this.queries=M0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=M0(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new J($.ABORTED,"Firestore shutting down"))}}function M0(){return new qi(t=>f1(t),Iu)}async function Ym(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new dR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Qm(o,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Jm(n)}async function Xm(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fR(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Jm(n)}function mR(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Jm(t){t.Y_.forEach(e=>{e.next()})}var cf,V0;(V0=cf||(cf={})).ea="default",V0.Cache="cache";class Zm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.key=e}}class H1{constructor(e){this.key=e}}class pR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=m1(e),this.Ra=new Ei(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new L0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),x=Tu(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let j=!1;g&&x?g.data.isEqual(x.data)?C!==P&&(r.track({type:3,doc:x}),j=!0):this.ga(g,x)||(r.track({type:2,doc:x}),j=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(c=!0)):!g&&x?(r.track({type:0,doc:x}),j=!0):g&&!x&&(r.track({type:1,doc:g}),j=!0,(u||d)&&(c=!0)),j&&(x?(o=o.add(x),i=P?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(x,C){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return P(x)-P(C)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Oi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new L0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new H1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new W1(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yR{constructor(e){this.key=e,this.va=!1}}class vR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new qi(c=>f1(c),Iu),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(se.comparator),this.Na=new Map,this.La=new $m,this.Ba={},this.ka=new Map,this.qa=Di.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function xR(t,e,n=!0){const r=J1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await K1(r,e,n,!0),s}async function _R(t,e){const n=J1(t);await K1(n,e,!0,!1)}async function K1(t,e,n,r){const s=await BP(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await wR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&F1(t.remoteStore,s),c}async function wR(t,e,n,r,s){t.Ka=(p,g,x)=>async function(P,j,w,E){let S=j.view.ma(w);S.ns&&(S=await R0(P.localStore,j.query,!1).then(({documents:b})=>j.view.ma(b,S)));const D=E&&E.targetChanges.get(j.targetId),F=E&&E.targetMismatches.get(j.targetId)!=null,R=j.view.applyChanges(S,P.isPrimaryClient,D,F);return U0(P,j.targetId,R.wa),R.snapshot}(t,p,g,x);const i=await R0(t.localStore,e,!0),o=new pR(e,i.Ts),c=o.ma(i.documents),u=Ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);U0(t,n,d.wa);const f=new gR(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function ER(t,e,n){const r=le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Iu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qm(r.remoteStore,s.targetId),uf(r,s.targetId)}).catch(ja)):(uf(r,s.targetId),await lf(r.localStore,s.targetId,!0))}async function bR(t,e){const n=le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qm(n.remoteStore,r.targetId))}async function IR(t,e,n){const r=PR(t);try{const s=await function(o,c){const u=le(o),d=Xe.now(),f=c.reduce((x,C)=>x.add(C.key),he());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=ir(),P=he();return u.cs.getEntries(x,f).next(j=>{C=j,C.forEach((w,E)=>{E.isValidDocument()||(P=P.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,C)).next(j=>{p=j;const w=[];for(const E of c){const S=HA(E,p.get(E.key).overlayedDocument);S!=null&&w.push(new es(E.key,S,i1(S.value.mapValue),At.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,w,c)}).next(j=>{g=j;const w=j.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(x,j.batchId,w)})}).then(()=>({batchId:g.batchId,changes:g1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Fe(ve)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Fa(r,s.changes),await Ru(r.remoteStore)}catch(s){const i=Qm(s,"Failed to persist write");n.reject(i)}}async function G1(t,e){const n=le(t);try{const r=await FP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ee(o.va):s.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),await Fa(n,r,e)}catch(r){await ja(r)}}function F0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=le(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&Jm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TR(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Fe(se.comparator);o=o.insert(i,xt.newNoDocument(i,ae.min()));const c=he().add(i),u=new ku(ae.min(),new Map,new Fe(ve),o,c);await G1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),ep(r)}else await lf(r.localStore,e,!1).then(()=>uf(r,e,n)).catch(ja)}async function SR(t,e){const n=le(t),r=e.batch.batchId;try{const s=await VP(n.localStore,e);Y1(n,r,null),Q1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fa(n,s)}catch(s){await ja(s)}}async function NR(t,e,n){const r=le(t);try{const s=await function(o,c){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Ee(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Y1(r,e,n),Q1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fa(r,s)}catch(s){await ja(s)}}function Q1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Y1(t,e,n){const r=le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function uf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||X1(t,r)})}function X1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(qm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ep(t))}function U0(t,e,n){for(const r of n)r instanceof W1?(t.La.addReference(r.key,e),CR(t,r)):r instanceof H1?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||X1(t,r.key)):oe()}function CR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),ep(t))}function ep(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(ke.fromString(e)),r=t.qa.next();t.Na.set(r,new yR(n)),t.Oa=t.Oa.insert(n,r),F1(t.remoteStore,new kr(Pn(bu(n.path)),r,"TargetPurposeLimboResolution",Pm.oe))}}async function Fa(t,e,n){const r=le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=zm.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=le(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(d,g=>B.forEach(g.$i,x=>f.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>B.forEach(g.Ui,x=>f.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!Da(p))throw p;te("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=f.os.get(g),C=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,P)}}}(r.localStore,i))}async function kR(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await O1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new J($.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fa(n,r.hs)}}function AR(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let s=he();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function J1(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TR.bind(null,e),e.Ca.d_=fR.bind(null,e.eventManager),e.Ca.$a=mR.bind(null,e.eventManager),e}function PR(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NR.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Au(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return MP(this.persistence,new OP,e.initialUser,this.serializer)}Ga(e){return new RP(Bm.Zr,this.serializer)}Wa(e){return new qP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class df{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kR.bind(null,this.syncEngine),await uR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hR}()}createDatastore(e){const n=Au(e.databaseInfo.databaseId),r=function(i){return new GP(i)}(e.databaseInfo);return function(i,o,c,u){return new XP(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new ZP(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>F0(this.syncEngine,n,0),function(){return D0.D()?new D0:new WP}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const p=new vR(s,i,o,c,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Va(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}df.provider={build:()=>new df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=n1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qd(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await O1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jR(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>O0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>O0(e.remoteStore,s)),t._onlineComponents=e}async function jR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await qd(t,new Bc)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await qd(t,new Bc);return t._offlineComponents}async function Z1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await $0(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await $0(t,new df))),t._onlineComponents}function DR(t){return Z1(t).then(e=>e.syncEngine)}async function zc(t){const e=await Z1(t),n=e.eventManager;return n.onListen=xR.bind(null,e.syncEngine),n.onUnlisten=ER.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_R.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bR.bind(null,e.syncEngine),n}function OR(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new tp({next:g=>{f.Za(),o.enqueueAndForget(()=>Xm(i,p));const x=g.docs.has(c);!x&&g.fromCache?d.reject(new J($.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new J($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Zm(bu(c.path),f,{includeMetadataChanges:!0,_a:!0});return Ym(i,p)}(await zc(t),t.asyncQueue,e,n,r)),r.promise}function LR(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new tp({next:g=>{f.Za(),o.enqueueAndForget(()=>Xm(i,p)),g.fromCache&&u.source==="server"?d.reject(new J($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Zm(c,f,{includeMetadataChanges:!0,_a:!0});return Ym(i,p)}(await zc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){if(!n)throw new J($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MR(t,e,n,r){if(e===!0&&r===!0)throw new J($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z0(t){if(!se.isDocumentKey(t))throw new J($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q0(t){if(se.isDocumentKey(t))throw new J($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ju(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ju(t);throw new J($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Du{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eA;switch(r.type){case"firstParty":return new sA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B0.get(n);r&&(te("ComponentProvider","Removing Datastore"),B0.delete(n),r.terminate())}(this),Promise.resolve()}}function VR(t,e,n,r={}){var s;const i=(t=Pt(t,Du))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=yt.MOCK_USER;else{c=M_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yt(d)}t._authCredentials=new tA(new t1(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}}class Br extends $s{constructor(e,n,r){super(e,n,bu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new se(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function Ce(t,e,...n){if(t=Pe(t),tE("collection","path",e),t instanceof Du){const r=ke.fromString(e,...n);return q0(r),new Br(t,null,r)}{if(!(t instanceof _t||t instanceof Br))throw new J($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return q0(r),new Br(t.firestore,null,r)}}function _e(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=n1.newId()),tE("doc","path",e),t instanceof Du){const r=ke.fromString(e,...n);return z0(r),new _t(t,null,new se(r))}{if(!(t instanceof _t||t instanceof Br))throw new J($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return z0(r),new _t(t.firestore,t instanceof Br?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new M1(this,"async_queue_retry"),this.Vu=()=>{const r=zd();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Da(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw sr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Gm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function K0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Dn extends Du{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new H0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H0(e),this._firestoreClient=void 0,await e}}}function FR(t,e){const n=typeof t=="object"?t:gu(),r=typeof t=="string"?t:"(default)",s=Zr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=D_("firestore");i&&VR(s,...i)}return s}function Ua(t){if(t._terminated)throw new J($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UR(t),t._firestoreClient}function UR(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new yA(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,eE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new RR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(ut.fromBase64String(e))}catch(n){throw new J($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Li(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=/^__.*__$/;class BR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new La(e,this.data,n,this.fieldTransforms)}}class nE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class sp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(rE(this.Cu)&&$R.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Au(e)}Qu(e,n,r,s=!1){return new sp({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ba(t){const e=t._freezeSettings(),n=Au(t._databaseId);return new zR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ip(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ap("Data must be an object, but it was:",o,r);const c=oE(r,o);let u,d;if(i.merge)u=new Kt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=hf(e,p,n);if(!o.contains(g))throw new J($.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);lE(f,g)||f.push(g)}u=new Kt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new BR(new Mt(c),u,d)}class Lu extends Ou{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lu}}class op extends Ou{_toFieldTransform(e){return new BA(e.path,new va)}isEqual(e){return e instanceof op}}function sE(t,e,n,r){const s=t.Qu(1,e,n);ap("Data must be an object, but it was:",s,r);const i=[],o=Mt.empty();Fs(r,(u,d)=>{const f=lp(e,u,n);d=Pe(d);const p=s.Nu(f);if(d instanceof Lu)i.push(f);else{const g=za(d,p);g!=null&&(i.push(f),o.set(f,g))}});const c=new Kt(i);return new nE(o,c,s.fieldTransforms)}function iE(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[hf(e,r,n)],u=[s];if(i.length%2!=0)throw new J($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(hf(e,i[g])),u.push(i[g+1]);const d=[],f=Mt.empty();for(let g=c.length-1;g>=0;--g)if(!lE(d,c[g])){const x=c[g];let C=u[g];C=Pe(C);const P=o.Nu(x);if(C instanceof Lu)d.push(x);else{const j=za(C,P);j!=null&&(d.push(x),f.set(x,j))}}const p=new Kt(d);return new nE(f,p,o.fieldTransforms)}function qR(t,e,n,r=!1){return za(n,t.Qu(r?4:3,e))}function za(t,e){if(aE(t=Pe(t)))return ap("Unsupported field value:",e,t),oE(t,e);if(t instanceof Ou)return function(r,s){if(!rE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=za(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Uc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uc(s.serializer,i)}}if(r instanceof np)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:C1(s.serializer,r._byteString)};if(r instanceof _t){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Um(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rp)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Mm(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ju(r)}`)}(t,e)}function oE(t,e){const n={};return r1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,s)=>{const i=za(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function aE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof np||t instanceof Li||t instanceof _t||t instanceof Ou||t instanceof rp)}function ap(t,e,n){if(!aE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ju(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function hf(t,e,n){if((e=Pe(e))instanceof $a)return e._internalPath;if(typeof e=="string")return lp(t,e);throw qc("Field path arguments must be of type string or ",t,!1,void 0,n)}const WR=new RegExp("[~\\*/\\[\\]]");function lp(t,e,n){if(e.search(WR)>=0)throw qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $a(...e.split("."))._internalPath}catch{throw qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new J($.INVALID_ARGUMENT,c+t+u)}function lE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HR extends cE{data(){return super.data()}}function cp(t,e){return typeof e=="string"?lp(t,e):e instanceof $a?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class up{}class KR extends up{}function st(t,e,...n){let r=[];e instanceof up&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof dp).length,c=i.filter(u=>u instanceof Mu).length;if(o>1||o>0&&c>0)throw new J($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mu extends KR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mu(e,n,r)}_apply(e){const n=this._parse(e);return dE(e._query,n),new $s(e.firestore,e.converter,tf(e._query,n))}_parse(e){const n=Ba(e.firestore);return function(i,o,c,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new J($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Q0(p,f);const x=[];for(const C of p)x.push(G0(u,i,C));g={arrayValue:{values:x}}}else g=G0(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Q0(p,f),g=qR(c,o,p,f==="in"||f==="not-in");return Ge.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Oe(t,e,n){const r=e,s=cp("where",t);return Mu._create(s,r,n)}class dp extends up{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)dE(o,u),o=tf(o,u)}(e._query,n),new $s(e.firestore,e.converter,tf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G0(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new J($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h1(e)&&n.indexOf("/")!==-1)throw new J($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!se.isDocumentKey(r))throw new J($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return p0(t,new se(r))}if(n instanceof _t)return p0(t,n._key);throw new J($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ju(n)}.`)}function Q0(t,e){if(!Array.isArray(t)||t.length===0)throw new J($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GR{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Be(o.doubleValue));return new rp(i)}convertGeoPoint(e){return new np(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pa(e));default:return null}}convertTimestamp(e){const n=Gr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);Ee(D1(r));const s=new ga(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||sr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hE extends cE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ec extends hE{data(e={}){return super.data(e)}}class fE{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ao(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ec(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new ec(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ao(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new ec(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ao(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:QR(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){t=Pt(t,_t);const e=Pt(t.firestore,Dn);return OR(Ua(e),t._key).then(n=>mE(e,t,n))}class fp extends GR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function en(t){t=Pt(t,$s);const e=Pt(t.firestore,Dn),n=Ua(e),r=new fp(e);return uE(t._query),LR(n,t._query).then(s=>new fE(e,r,t,s))}function Wc(t,e,n){t=Pt(t,_t);const r=Pt(t.firestore,Dn),s=hp(t.converter,e,n);return qa(r,[ip(Ba(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,At.none())])}function it(t,e,n,...r){t=Pt(t,_t);const s=Pt(t.firestore,Dn),i=Ba(s);let o;return o=typeof(e=Pe(e))=="string"||e instanceof $a?iE(i,"updateDoc",t._key,e,n,r):sE(i,"updateDoc",t._key,e),qa(s,[o.toMutation(t._key,At.exists(!0))])}function mp(t){return qa(Pt(t.firestore,Dn),[new Cu(t._key,At.none())])}function Mi(t,e){const n=Pt(t.firestore,Dn),r=_e(t),s=hp(t.converter,e);return qa(n,[ip(Ba(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,At.exists(!1))]).then(()=>r)}function Vi(t,...e){var n,r,s;t=Pe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||K0(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(K0(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof _t)d=Pt(t.firestore,Dn),f=bu(t._key.path),u={next:p=>{e[o]&&e[o](mE(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Pt(t,$s);d=Pt(p.firestore,Dn),f=p._query;const g=new fp(d);u={next:x=>{e[o]&&e[o](new fE(d,g,p,x))},error:e[o+1],complete:e[o+2]},uE(t._query)}return function(g,x,C,P){const j=new tp(P),w=new Zm(x,j,C);return g.asyncQueue.enqueueAndForget(async()=>Ym(await zc(g),w)),()=>{j.Za(),g.asyncQueue.enqueueAndForget(async()=>Xm(await zc(g),w))}}(Ua(d),f,c,u)}function qa(t,e){return function(r,s){const i=new Xn;return r.asyncQueue.enqueueAndForget(async()=>IR(await DR(r),s,i)),i.promise}(Ua(t),e)}function mE(t,e,n){const r=n.docs.get(e._key),s=new fp(t);return new hE(t,s,e._key,r,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ba(e)}set(e,n,r){this._verifyNotCommitted();const s=Wd(e,this._firestore),i=hp(s.converter,n,r),o=ip(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,At.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Wd(e,this._firestore);let o;return o=typeof(n=Pe(n))=="string"||n instanceof $a?iE(this._dataReader,"WriteBatch.update",i._key,n,r,s):sE(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,At.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(n._key,At.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(t,e){if((t=Pe(t)).firestore!==e)throw new J($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function $n(){return new op("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){return Ua(t=Pt(t,Dn)),new YR(t,e=>qa(t,e))}(function(e,n=!0){(function(s){zi=s})(Vs),bn(new ln("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Dn(new nA(r.getProvider("auth-internal")),new oA(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Bt(u0,"4.7.3",e),Bt(u0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebasestorage.googleapis.com",JR="storageBucket",ZR=2*60*1e3,ej=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends un{constructor(e,n,r=0){super(Hd(e),`Firebase Storage: ${n} (${Hd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var On;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(On||(On={}));function Hd(t){return"storage/"+t}function tj(){const t="An unknown error occurred, please check the error payload for server response.";return new Ln(On.UNKNOWN,t)}function nj(){return new Ln(On.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rj(){return new Ln(On.CANCELED,"User canceled the upload/download.")}function sj(t){return new Ln(On.INVALID_URL,"Invalid URL '"+t+"'.")}function ij(t){return new Ln(On.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Y0(t){return new Ln(On.INVALID_ARGUMENT,t)}function gE(){return new Ln(On.APP_DELETED,"The Firebase app was deleted.")}function oj(t){return new Ln(On.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vn.makeFromUrl(e,n)}catch{return new vn(e,"")}if(r.path==="")return r;throw ij(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},P=n===pE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",w=new RegExp(`^https?://${P}/${s}/${j}`,"i"),S=[{regex:c,indices:u,postModify:i},{regex:x,indices:C,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<S.length;D++){const F=S[D],R=F.regex.exec(e);if(R){const b=R[F.indices.bucket];let y=R[F.indices.path];y||(y=""),r=new vn(b,y),F.postModify(r);break}}if(r==null)throw sj(e);return r}}class aj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...j){d||(d=!0,e.apply(null,j))}function p(j){s=setTimeout(()=>{s=null,t(x,u())},j)}function g(){i&&clearTimeout(i)}function x(j,...w){if(d){g();return}if(j){g(),f.call(null,j,...w);return}if(u()||o){g(),f.call(null,j,...w);return}r<64&&(r*=2);let S;c===1?(c=2,S=0):S=(r+Math.random())*1e3,p(S)}let C=!1;function P(j){C||(C=!0,g(),!d&&(s!==null?(j||(c=2),clearTimeout(s),p(0)):j||(c=1)))}return p(0),i=setTimeout(()=>{o=!0,P(!0)},n),P}function cj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){return t!==void 0}function X0(t,e,n,r){if(r<e)throw Y0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Y0(`Invalid value for '${t}'. Expected ${n} or less.`)}function dj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Hc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hc||(Hc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n,r,s,i,o,c,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,C)=>{this.resolve_=x,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Pl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Hc.NO_ERROR,u=i.getStatus();if(!c||hj(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Hc.ABORT;r(!1,new Pl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Pl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());uj(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=tj();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?gE():rj();o(u)}else{const u=nj();o(u)}};this.canceled_?n(!1,new Pl(!1,null,!0)):this.backoffId_=lj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function mj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function gj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function yj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vj(t,e,n,r,s,i,o=!0){const c=dj(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return gj(d,e),mj(d,n),pj(d,i),yj(d,r),new fj(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _j(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this._service=e,n instanceof vn?this._location=n:this._location=vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kc(e,n)}get root(){const e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _j(this._location.path)}get storage(){return this._service}get parent(){const e=xj(this._location.path);if(e===null)return null;const n=new vn(this._location.bucket,e);return new Kc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw oj(e)}}function J0(t,e){const n=e==null?void 0:e[JR];return n==null?null:vn.makeFromBucketSpec(n,t)}function wj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:M_(s,t.app.options.projectId))}class Ej{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=pE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZR,this._maxUploadRetryTime=ej,this._requests=new Set,s!=null?this._bucket=vn.makeFromBucketSpec(s,this._host):this._bucket=J0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=J0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){X0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){X0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new aj(gE());{const o=vj(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Z0="@firebase/storage",ev="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="storage";function bj(t=gu(),e){t=Pe(t);const r=Zr(t,yE).getImmediate({identifier:e}),s=D_("storage");return s&&Ij(r,...s),r}function Ij(t,e,n,r={}){wj(t,e,n,r)}function Tj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ej(n,r,s,e,Vs)}function Sj(){bn(new ln(yE,Tj,"PUBLIC").setMultipleInstances(!0)),Bt(Z0,ev,""),Bt(Z0,ev,"esm2017")}Sj();const Nj={apiKey:"AIzaSyAv7dVQEs6vHY_HlnDXfqqTdCtekxx1ggs",authDomain:"campuscrave-4f784.firebaseapp.com",projectId:"campuscrave-4f784",storageBucket:"campuscrave-4f784.firebasestorage.app",messagingSenderId:"611702574603",appId:"1:611702574603:web:88af21ef9f93e8febf810e",measurementId:"G-F5LSYDF5ZH"},Vu=q_(Nj);Yk(Vu);const pn=PC(Vu),ne=FR(Vu);bj(Vu);const vE=A.createContext();function Dt(){return A.useContext(vE)}function Cj({children:t}){const[e,n]=A.useState(null),[r,s]=A.useState(!0);function i(x,C){return gN(pn,x,C)}async function o(x,C){const P=await yN(pn,x,C);if(!P.user.emailVerified)throw await Wy(P.user),await hi(pn),new Error("Email not verified. A new verification email has been sent.");return P}function c(){return hi(pn)}function u(){const x=new zn;return UN(pn,x)}function d(x){return Wy(x)}function f(x){return pN(pn,x)}function p(){return e&&e.emailVerified}A.useEffect(()=>_N(pn,C=>{n(C),s(!1)}),[]);const g={currentUser:e,signup:i,login:o,logout:c,signInWithGoogle:u,sendVerificationEmail:d,resetPassword:f,isEmailVerified:p};return a.jsx(vE.Provider,{value:g,children:!r&&t})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wa.apply(this,arguments)}var Ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ar||(Ar={}));const tv="popstate";function kj(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:c="",hash:u=""}=Bs(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ff("",{pathname:o,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof i=="string"?i:Gc(i))}function r(s,i){pp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Pj(e,n,r,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Aj(){return Math.random().toString(36).substr(2,8)}function nv(t,e){return{usr:t.state,key:t.key,idx:e}}function ff(t,e,n,r){return n===void 0&&(n=null),wa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bs(e):e,{state:n,key:e&&e.key||r||Aj()})}function Gc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Pj(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Ar.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(wa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=Ar.Pop;let j=f(),w=j==null?null:j-d;d=j,u&&u({action:c,location:P.location,delta:w})}function g(j,w){c=Ar.Push;let E=ff(P.location,j,w);n&&n(E,j),d=f()+1;let S=nv(E,d),D=P.createHref(E);try{o.pushState(S,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(D)}i&&u&&u({action:c,location:P.location,delta:1})}function x(j,w){c=Ar.Replace;let E=ff(P.location,j,w);n&&n(E,j),d=f();let S=nv(E,d),D=P.createHref(E);o.replaceState(S,"",D),i&&u&&u({action:c,location:P.location,delta:0})}function C(j){let w=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof j=="string"?j:Gc(j);return E=E.replace(/ $/,"%20"),qe(w,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,w)}let P={get action(){return c},get location(){return t(s,o)},listen(j){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(tv,p),u=j,()=>{s.removeEventListener(tv,p),u=null}},createHref(j){return e(s,j)},createURL:C,encodeLocation(j){let w=C(j);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:x,go(j){return o.go(j)}};return P}var rv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rv||(rv={}));function Rj(t,e,n){return n===void 0&&(n="/"),jj(t,e,n)}function jj(t,e,n,r){let s=typeof e=="string"?Bs(e):e,i=gp(s.pathname||"/",n);if(i==null)return null;let o=xE(t);Dj(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=Hj(i);c=zj(o[u],d)}return c}function xE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(qe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=zr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),xE(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:$j(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of _E(i.path))s(i,o,u)}),e}function _E(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_E(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Dj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Bj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Oj=/^:[\w-]+$/,Lj=3,Mj=2,Vj=1,Fj=10,Uj=-2,sv=t=>t==="*";function $j(t,e){let n=t.split("/"),r=n.length;return n.some(sv)&&(r+=Uj),e&&(r+=Mj),n.filter(s=>!sv(s)).reduce((s,i)=>s+(Oj.test(i)?Lj:i===""?Vj:Fj),r)}function Bj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zj(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=qj({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:zr([i,p.pathname]),pathnameBase:Yj(zr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=zr([i,p.pathnameBase]))}return o}function qj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Wj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let P=c[p]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const C=c[p];return x&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Wj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Hj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Kj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bs(t):t;return{pathname:n?n.startsWith("/")?n:Gj(n,e):e,search:Xj(r),hash:Jj(s)}}function Gj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yp(t,e){let n=Qj(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bs(t):(s=wa({},t),qe(!s.pathname||!s.pathname.includes("?"),Kd("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Kd("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Kd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=Kj(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const zr=t=>t.join("/").replace(/\/\/+/g,"/"),Yj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Xj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Jj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Zj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wE=["post","put","patch","delete"];new Set(wE);const e4=["get",...wE];new Set(e4);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ea.apply(this,arguments)}const xp=A.createContext(null),t4=A.createContext(null),ts=A.createContext(null),Fu=A.createContext(null),dr=A.createContext({outlet:null,matches:[],isDataRoute:!1}),EE=A.createContext(null);function n4(t,e){let{relative:n}=e===void 0?{}:e;Hi()||qe(!1);let{basename:r,navigator:s}=A.useContext(ts),{hash:i,pathname:o,search:c}=IE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:zr([r,o])),s.createHref({pathname:u,search:c,hash:i})}function Hi(){return A.useContext(Fu)!=null}function Wa(){return Hi()||qe(!1),A.useContext(Fu).location}function bE(t){A.useContext(ts).static||A.useLayoutEffect(t)}function ns(){let{isDataRoute:t}=A.useContext(dr);return t?g4():r4()}function r4(){Hi()||qe(!1);let t=A.useContext(xp),{basename:e,future:n,navigator:r}=A.useContext(ts),{matches:s}=A.useContext(dr),{pathname:i}=Wa(),o=JSON.stringify(yp(s,n.v7_relativeSplatPath)),c=A.useRef(!1);return bE(()=>{c.current=!0}),A.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=vp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:zr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function s4(){let{matches:t}=A.useContext(dr),e=t[t.length-1];return e?e.params:{}}function IE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(ts),{matches:s}=A.useContext(dr),{pathname:i}=Wa(),o=JSON.stringify(yp(s,r.v7_relativeSplatPath));return A.useMemo(()=>vp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function i4(t,e){return o4(t,e)}function o4(t,e,n,r){Hi()||qe(!1);let{navigator:s,static:i}=A.useContext(ts),{matches:o}=A.useContext(dr),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=Wa(),p;if(e){var g;let w=typeof e=="string"?Bs(e):e;d==="/"||(g=w.pathname)!=null&&g.startsWith(d)||qe(!1),p=w}else p=f;let x=p.pathname||"/",C=x;if(d!=="/"){let w=d.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(w.length).join("/")}let P=Rj(t,{pathname:C}),j=d4(P&&P.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:zr([d,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:zr([d,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return e&&j?A.createElement(Fu.Provider,{value:{location:Ea({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ar.Pop}},j):j}function a4(){let t=p4(),e=Zj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const l4=A.createElement(a4,null);class c4 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(dr.Provider,{value:this.props.routeContext},A.createElement(EE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u4(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(xp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(dr.Provider,{value:e},r)}function d4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||qe(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:x}=n,C=p.route.loader&&g[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||C){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let x,C=!1,P=null,j=null;n&&(x=c&&p.route.id?c[p.route.id]:void 0,P=p.route.errorElement||l4,u&&(d<0&&g===0?(y4("route-fallback"),C=!0,j=null):d===g&&(C=!0,j=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),E=()=>{let S;return x?S=P:C?S=j:p.route.Component?S=A.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=f,A.createElement(u4,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(c4,{location:n.location,revalidation:n.revalidation,component:P,error:x,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):E()},null)}var TE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TE||{}),SE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SE||{});function h4(t){let e=A.useContext(xp);return e||qe(!1),e}function f4(t){let e=A.useContext(t4);return e||qe(!1),e}function m4(t){let e=A.useContext(dr);return e||qe(!1),e}function NE(t){let e=m4(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function p4(){var t;let e=A.useContext(EE),n=f4(),r=NE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function g4(){let{router:t}=h4(TE.UseNavigateStable),e=NE(SE.UseNavigateStable),n=A.useRef(!1);return bE(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ea({fromRouteId:e},i)))},[t,e])}const iv={};function y4(t,e,n){iv[t]||(iv[t]=!0)}function v4(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mf(t){let{to:e,replace:n,state:r,relative:s}=t;Hi()||qe(!1);let{future:i,static:o}=A.useContext(ts),{matches:c}=A.useContext(dr),{pathname:u}=Wa(),d=ns(),f=vp(e,yp(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return A.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function hs(t){qe(!1)}function x4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ar.Pop,navigator:i,static:o=!1,future:c}=t;Hi()&&qe(!1);let u=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:u,navigator:i,static:o,future:Ea({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=Bs(r));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:C="default"}=r,P=A.useMemo(()=>{let j=gp(f,u);return j==null?null:{location:{pathname:j,search:p,hash:g,state:x,key:C},navigationType:s}},[u,f,p,g,x,C,s]);return P==null?null:A.createElement(ts.Provider,{value:d},A.createElement(Fu.Provider,{children:n,value:P}))}function _4(t){let{children:e,location:n}=t;return i4(pf(e),n)}new Promise(()=>{});function pf(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,pf(r.props.children,i));return}r.type!==hs&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gf(){return gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gf.apply(this,arguments)}function w4(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function E4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function b4(t,e){return t.button===0&&(!e||e==="_self")&&!E4(t)}const I4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T4="6";try{window.__reactRouterVersion=T4}catch{}const S4="startTransition",ov=N2[S4];function N4(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=kj({window:s,v5Compat:!0}));let o=i.current,[c,u]=A.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=A.useCallback(p=>{d&&ov?ov(()=>u(p)):u(p)},[u,d]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>v4(r),[r]),A.createElement(x4,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const C4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qr=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=w4(e,I4),{basename:x}=A.useContext(ts),C,P=!1;if(typeof d=="string"&&k4.test(d)&&(C=d,C4))try{let S=new URL(window.location.href),D=d.startsWith("//")?new URL(S.protocol+d):new URL(d),F=gp(D.pathname,x);D.origin===S.origin&&F!=null?d=F+D.search+D.hash:P=!0}catch{}let j=n4(d,{relative:s}),w=A4(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p});function E(S){r&&r(S),S.defaultPrevented||w(S)}return A.createElement("a",gf({},g,{href:C||j,onClick:P||i?r:E,ref:n,target:u}))});var av;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(av||(av={}));var lv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lv||(lv={}));function A4(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=ns(),d=Wa(),f=IE(t,{relative:o});return A.useCallback(p=>{if(b4(p,n)){p.preventDefault();let g=r!==void 0?r:Gc(d)===Gc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,f,r,s,n,t,i,o,c])}let P4={data:""},R4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||P4,j4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,D4=/\/\*[^]*?\*\/|  +/g,cv=/\n+/g,Sr=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Sr(o,i):i+"{"+Sr(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Sr(o,e?e.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Sr.p?Sr.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Fn={},CE=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+CE(t[n]);return e}return t},O4=(t,e,n,r,s)=>{let i=CE(t),o=Fn[i]||(Fn[i]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(i));if(!Fn[o]){let u=i!==t?t:(d=>{let f,p,g=[{}];for(;f=j4.exec(d.replace(D4,""));)f[4]?g.shift():f[3]?(p=f[3].replace(cv," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][f[1]]=f[2].replace(cv," ").trim();return g[0]})(t);Fn[o]=Sr(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let c=n&&Fn.g?Fn.g:null;return n&&(Fn.g=Fn[o]),((u,d,f,p)=>{p?d.data=d.data.replace(p,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(Fn[o],e,r,c),o},L4=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let c=o(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":Sr(c,""):c===!1?"":c}return r+s+(o??"")},"");function Uu(t){let e=this||{},n=t.call?t(e.p):t;return O4(n.unshift?n.raw?L4(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,R4(e.target),e.g,e.o,e.k)}let kE,yf,vf;Uu.bind({g:1});let or=Uu.bind({k:1});function M4(t,e,n,r){Sr.p=e,kE=t,yf=n,vf=r}function rs(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let c=Object.assign({},i),u=c.className||s.className;n.p=Object.assign({theme:yf&&yf()},c),n.o=/ *go\d+/.test(u),c.className=Uu.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),vf&&d[0]&&vf(c),kE(d,c)}return s}}var V4=t=>typeof t=="function",Qc=(t,e)=>V4(t)?t(e):t,F4=(()=>{let t=0;return()=>(++t).toString()})(),AE=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),U4=20,PE=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,U4)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return PE(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},tc=[],xs={toasts:[],pausedAt:void 0},zs=t=>{xs=PE(xs,t),tc.forEach(e=>{e(xs)})},$4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},B4=(t={})=>{let[e,n]=A.useState(xs),r=A.useRef(xs);A.useEffect(()=>(r.current!==xs&&n(xs),tc.push(n),()=>{let i=tc.indexOf(n);i>-1&&tc.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,c,u;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||$4[i.type],style:{...t.style,...(u=t[i.type])==null?void 0:u.style,...i.style}}});return{...e,toasts:s}},z4=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||F4()}),Ha=t=>(e,n)=>{let r=z4(e,t,n);return zs({type:2,toast:r}),r.id},Ct=(t,e)=>Ha("blank")(t,e);Ct.error=Ha("error");Ct.success=Ha("success");Ct.loading=Ha("loading");Ct.custom=Ha("custom");Ct.dismiss=t=>{zs({type:3,toastId:t})};Ct.remove=t=>zs({type:4,toastId:t});Ct.promise=(t,e,n)=>{let r=Ct.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Qc(e.success,s):void 0;return i?Ct.success(i,{id:r,...n,...n==null?void 0:n.success}):Ct.dismiss(r),s}).catch(s=>{let i=e.error?Qc(e.error,s):void 0;i?Ct.error(i,{id:r,...n,...n==null?void 0:n.error}):Ct.dismiss(r)}),t};var q4=(t,e)=>{zs({type:1,toast:{id:t,height:e}})},W4=()=>{zs({type:5,time:Date.now()})},Ho=new Map,H4=1e3,K4=(t,e=H4)=>{if(Ho.has(t))return;let n=setTimeout(()=>{Ho.delete(t),zs({type:4,toastId:t})},e);Ho.set(t,n)},G4=t=>{let{toasts:e,pausedAt:n}=B4(t);A.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(i-c.createdAt);if(u<0){c.visible&&Ct.dismiss(c.id);return}return setTimeout(()=>Ct.dismiss(c.id),u)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,n]);let r=A.useCallback(()=>{n&&zs({type:6,time:Date.now()})},[n]),s=A.useCallback((i,o)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:d}=o||{},f=e.filter(x=>(x.position||d)===(i.position||d)&&x.height),p=f.findIndex(x=>x.id===i.id),g=f.filter((x,C)=>C<p&&x.visible).length;return f.filter(x=>x.visible).slice(...c?[g+1]:[0,g]).reduce((x,C)=>x+(C.height||0)+u,0)},[e]);return A.useEffect(()=>{e.forEach(i=>{if(i.dismissed)K4(i.id,i.removeDelay);else{let o=Ho.get(i.id);o&&(clearTimeout(o),Ho.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:q4,startPause:W4,endPause:r,calculateOffset:s}}},Q4=or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Y4=or`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X4=or`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,J4=rs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Y4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${X4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Z4=or`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,eD=rs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Z4} 1s linear infinite;
`,tD=or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,nD=or`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,rD=rs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tD} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${nD} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,sD=rs("div")`
  position: absolute;
`,iD=rs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,oD=or`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,aD=rs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${oD} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,lD=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?A.createElement(aD,null,e):e:n==="blank"?null:A.createElement(iD,null,A.createElement(eD,{...r}),n!=="loading"&&A.createElement(sD,null,n==="error"?A.createElement(J4,{...r}):A.createElement(rD,{...r})))},cD=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,uD=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,dD="0%{opacity:0;} 100%{opacity:1;}",hD="0%{opacity:1;} 100%{opacity:0;}",fD=rs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,mD=rs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,pD=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=AE()?[dD,hD]:[cD(n),uD(n)];return{animation:e?`${or(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${or(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},gD=A.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?pD(t.position||e||"top-center",t.visible):{opacity:0},i=A.createElement(lD,{toast:t}),o=A.createElement(mD,{...t.ariaProps},Qc(t.message,t));return A.createElement(fD,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):A.createElement(A.Fragment,null,i,o))});M4(A.createElement);var yD=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=A.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return A.createElement("div",{ref:i,className:e,style:n},s)},vD=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:AE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},xD=Uu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Rl=16,_D=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:c,handlers:u}=G4(n);return A.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Rl,left:Rl,right:Rl,bottom:Rl,pointerEvents:"none",...i},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||e,p=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),g=vD(f,p);return A.createElement(yD,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?xD:"",style:g},d.type==="custom"?Qc(d.message,d):s?s(d):A.createElement(gD,{toast:d,position:f}))}))},W=Ct;function wD(){const{currentUser:t,logout:e}=Dt(),n=ns(),r=async()=>{try{await e(),n("/login")}catch(s){console.error("Failed to log out:",s)}};return a.jsx("nav",{className:"bg-white shadow-lg fixed top-0 left-0 right-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx(qr,{to:"/",className:"text-xl font-bold text-orange-900",children:a.jsx("img",{src:"/header.png",alt:"Campus Crave Logo",style:{width:"100px",height:"auto"}})})}),a.jsx("div",{className:"flex items-center space-x-4",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("a",{href:"https://discord.gg/kGp6885raj",target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary flex items-center",style:{backgroundColor:"#6F826A",color:"white"},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"mr-1",viewBox:"0 0 16 16",children:a.jsx("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"})}),"Discord"]}),a.jsx("button",{onClick:r,className:"btn btn-primary bg-[#333d29]",children:"Logout"})]}):a.jsxs(a.Fragment,{children:[a.jsx(qr,{to:"/login",className:"btn btn-secondary",style:{backgroundColor:"#22223b",color:"white"},children:"Login"}),a.jsx(qr,{to:"/register",className:"btn btn-primary",style:{backgroundColor:"#22223b",color:"white"},children:"Register"})]})})]})})})}const ED=()=>a.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md shadow-sm space-y-2 mb-[50px]",children:[a.jsxs("p",{className:"text-sm font-medium",children:["Disclaimer: ",a.jsx("span",{className:"font-normal",children:"This service is not directly affiliated with BRAC University. It is independently managed by a group of students."})]}),a.jsxs("ul",{className:"list-disc pl-5 text-sm font-medium",children:[a.jsx("li",{className:"font-normal",children:"Do not order food to the library or labs. Bringing any kind of food into labs or libraries is strictly forbidden."}),a.jsx("li",{className:"font-normal",children:"Actions will be taken against anyone associated with food orders made to labs or libraries."})]})]});function bD(){const{currentUser:t}=Dt();return t?a.jsx(mf,{to:"/dashboard"}):a.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-4xl font-bold text-gray-900 sm:text-5xl md:text-6xl",children:["CampusCrave  Food Delivery at BRAC University",a.jsx("span",{className:"block",style:{color:"#7f4f24"},children:"Right to You"})]}),a.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Whether you're in class, at the library, or anywhere on campus, weve got your cravings covered."}),a.jsx("div",{className:"mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8",children:a.jsx(qr,{style:{backgroundColor:"#4a4e69",color:"white"},to:"/register",className:"btn btn-primary text-lg px-8 py-3",children:"Get Started"})})]})})})}var RE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uv=Pr.createContext&&Pr.createContext(RE),ID=["attr","size","title"];function TD(t,e){if(t==null)return{};var n=SD(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SD(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yc(){return Yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yc.apply(this,arguments)}function dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dv(Object(n),!0).forEach(function(r){ND(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ND(t,e,n){return e=CD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CD(t){var e=kD(t,"string");return typeof e=="symbol"?e:e+""}function kD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jE(t){return t&&t.map((e,n)=>Pr.createElement(e.tag,Xc({key:n},e.attr),jE(e.child)))}function AD(t){return e=>Pr.createElement(PD,Yc({attr:Xc({},t.attr)},e),jE(t.child))}function PD(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=TD(t,ID),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Pr.createElement("svg",Yc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Xc(Xc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&Pr.createElement("title",null,i),t.children)};return uv!==void 0?Pr.createElement(uv.Consumer,null,n=>e(n)):e(RE)}function DE(t){return AD({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function RD(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(!1),{login:o,signInWithGoogle:c,resetPassword:u}=Dt(),d=ns(),f=async x=>{x.preventDefault();try{i(!0),await o(t,n),W.success("Successfully logged in!"),d("/dashboard")}catch(C){C.message&&C.message.includes("Email not verified")?W.error("Your email is not verified. A new verification email has been sent."):W.error("Failed to log in. Please check your credentials.")}finally{i(!1)}},p=async()=>{try{i(!0),await c(),W.success("Successfully logged in with Google!"),d("/dashboard")}catch{W.error("Failed to log in with Google.")}finally{i(!1)}},g=async()=>{if(!t)return W.error("Please enter your email address first");try{i(!0),await u(t),W.success("Password reset email sent! Check your inbox.")}catch{W.error("Failed to send password reset email.")}finally{i(!1)}};return a.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 p-6 card",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-center text-3xl font-bold text-gray-900",children:"Sign in to your account"})}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),a.jsx("input",{id:"email",type:"email",required:!0,className:"input mt-1",value:t,onChange:x=>e(x.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{id:"password",type:"password",required:!0,className:"input mt-1",value:n,onChange:x=>r(x.target.value)}),a.jsx("div",{className:"text-right mt-1",children:a.jsx("button",{type:"button",onClick:g,className:"text-sm text-blue-600 hover:text-blue-500 focus:outline-none",style:{color:"#414833"},children:"Forgot password?"})})]})]}),a.jsx("button",{style:{backgroundColor:"#4a4e69",color:"white"},type:"submit",className:"btn btn-primary w-full",disabled:s,children:s?"Signing in...":"Sign in"}),a.jsxs("div",{className:"relative my-4",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),a.jsxs("button",{type:"button",className:"btn btn-outline w-full flex items-center justify-center gap-2",onClick:p,disabled:s,children:[a.jsx(DE,{className:"text-xl"}),"Sign in with Google"]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx(qr,{to:"/register",className:"text-blue-600 hover:text-blue-500",style:{color:"#414833"},children:"Don't have an account? Sign up"})})]})]})})}function jD({email:t}){const e=ns();return a.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:a.jsx("svg",{className:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Registration Successful!"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Your account has been created. We've sent a verification email to:"}),a.jsx("p",{className:"mt-1 text-center text-lg font-medium text-gray-900",children:t})]}),a.jsxs("div",{className:"mt-8 space-y-6",children:[a.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important"}),a.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:a.jsx("p",{children:"Please check your email inbox and click the verification link before logging in. If you don't see the email, please check your spam or junk folder."})})]})]})}),a.jsx("div",{className:"space-y-4",children:a.jsx("button",{onClick:()=>e("/login"),className:"w-full py-2 px-4 text-white font-medium rounded-md",style:{backgroundColor:"#4a4e69"},children:"Go to Login"})})]})]})})}function DD(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(""),[o,c]=A.useState(!1),[u,d]=A.useState(!1),[f,p]=A.useState(""),[g,x]=A.useState(!1),{signup:C,signInWithGoogle:P,sendVerificationEmail:j}=Dt(),w=ns(),E=["@g.bracu.ac.bd"],S=b=>b?E.some(y=>b.toLowerCase().endsWith(y)):!1,D=b=>{var N;const y=["temp-mail.org","tempmail.com","guerrillamail.com","mailinator.com","getairmail.com","yopmail.com","10minutemail.com","mintemail.com","tempmail.plus","throwawaymail.com","emailondeck.com","tempinbox.com","mailnesia.com","maildrop.cc","fakeinbox.com","tempail.com","dispostable.com","sharklasers.com","trashmail.com","dropmail.me","tempr.email","10mail.org","spamgourmet.com","getnada.com","mohmal.com","temp-mails.com","emailtemp.org","tempmailaddress.com"],T=(N=b.split("@")[1])==null?void 0:N.toLowerCase();return y.includes(T)},F=async b=>{if(b.preventDefault(),!g)return W.error("You must accept the Terms and Conditions to create an account");if(n!==s)return W.error("Passwords do not match");if(D(t))return W.error("Temporary email addresses are not allowed. Please use a permanent email address.");if(!S(t))return W.error("Registration is only available for authorized university email addresses");try{c(!0);const y=await C(t,n);await j(y.user);const T=y.user.uid;await Wc(_e(ne,"users",T),{email:t,admin:!1,delivery:!0,emailVerified:!1,createdAt:new Date().toISOString(),termsAccepted:!0,termsAcceptedDate:new Date().toISOString()}),await hi(pn),p(t),d(!0)}catch(y){console.error("Registration error:",y),W.error("Failed to create an account.")}finally{c(!1)}},R=async()=>{if(!g)return W.error("You must accept the Terms and Conditions to create an account");try{c(!0);const b=await P(),y=b.user.uid,T=b.user.email;if(D(T)){await hi(pn),W.error("Temporary email addresses are not allowed. Please use a permanent email address."),c(!1);return}if(!S(T)){await hi(pn),W.error("Registration is only available for authorized university email addresses"),c(!1);return}const N=b.user.emailVerified,I={email:T,admin:!1,delivery:!0,emailVerified:N,createdAt:new Date().toISOString(),termsAccepted:!0,termsAcceptedDate:new Date().toISOString()};if(await Wc(_e(ne,"users",y),I,{merge:!0}),!N){await j(b.user),await hi(pn),p(T),d(!0);return}W.success("Account created successfully with Google!"),w("/dashboard")}catch(b){console.error("Google registration error:",b),W.error("Failed to create an account with Google.")}finally{c(!1)}};return a.jsx(a.Fragment,{children:u?a.jsx(jD,{email:f}):a.jsxs("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center ",children:[" ",a.jsxs("div",{className:"max-w-md w-full space-y-8 p-6 card",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-center text-3xl font-bold text-gray-900 mt-[50px] ",children:"Create your account"}),a.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:"Only authorized university email addresses are accepted"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:F,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"University Email address"}),a.jsx("input",{id:"email",type:"email",required:!0,className:"input mt-1",value:t,onChange:b=>e(b.target.value),placeholder:"your.name@g.bracu.ac.bd"}),t&&!S(t)&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Only authorized university email addresses are allowed."}),t&&S(t)&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:" Valid university email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{id:"password",type:"password",required:!0,className:"input mt-1",value:n,onChange:b=>r(b.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),a.jsx("input",{id:"confirm-password",type:"password",required:!0,className:"input mt-1",value:s,onChange:b=>i(b.target.value)})]}),a.jsxs("div",{className:"mt-4 border border-gray-300 rounded-md p-3 bg-gray-50",children:[a.jsxs("div",{className:"max-h-32 overflow-y-auto mb-2 text-xs text-gray-600 p-2 bg-white rounded",children:[a.jsx("h1",{children:"CampusCrave  Terms and Conditions"}),a.jsxs("p",{children:["Welcome to ",a.jsx("strong",{children:"CampusCrave"}),". By using our website and delivery services, you agree to the following Terms and Conditions. Please read them carefully before placing an order."]}),a.jsx("h2",{children:"1. Service Overview"}),a.jsx("p",{children:"CampusCrave is a campus-based delivery coordination platform. We help connect students and campus residents to local food and product vendors by providing on-demand delivery within the university area."}),a.jsxs("p",{children:["We are ",a.jsx("strong",{children:"not the seller or owner"})," of any food or product listed  our role is solely to facilitate delivery."]}),a.jsx("h2",{children:"2. Eligibility"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Be a student, staff member, or resident of the university campus."}),a.jsx("li",{children:"Provide accurate personal, contact, and delivery information."}),a.jsx("li",{children:"Accept these terms in full."})]}),a.jsx("h2",{children:"3. Payments"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Cash on Delivery (COD)"})," is the standard method for most orders."]}),a.jsxs("li",{children:["Some orders may require ",a.jsx("strong",{children:"advance payment"}),":",a.jsxs("ul",{children:[a.jsxs("li",{children:["This will be either ",a.jsx("strong",{children:"clearly written on the product listing"}),", or"]}),a.jsxs("li",{children:["The ",a.jsx("strong",{children:"delivery person will inform you before pickup"}),"."]})]})]}),a.jsxs("li",{children:["Only shops ",a.jsx("strong",{children:"affiliated with CampusCrave"})," guarantee COD  others may require prepayment."]}),a.jsxs("li",{children:["Prepayments are handled ",a.jsx("strong",{children:"outside the platform"})," via bKash, Nagad, or Rocket. CampusCrave ",a.jsx("strong",{children:"does not offer integrated payment systems"}),"."]}),a.jsx("li",{children:a.jsx("strong",{children:"You must pay in full at the time of delivery. Delaying payment is strictly prohibited."})})]}),a.jsx("h2",{children:"4. Delivery Policy"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Deliveries are limited to the designated university campus area."}),a.jsx("li",{children:"Delivery times may vary depending on vendor readiness, weather, or volume."}),a.jsxs("li",{children:["For prepaid orders, delivery personnel are advised to ",a.jsx("strong",{children:"confirm availability with the shop"})," before pickup."]}),a.jsx("li",{children:"Users must be available at the delivery location at the specified time."})]}),a.jsx("h2",{children:"5. Cancellations and Refunds"}),a.jsxs("ul",{children:[a.jsxs("li",{children:["Order cancellation is allowed only within the ",a.jsx("strong",{children:"specified cancellation time"})," shown during ordering."]}),a.jsxs("li",{children:["Once an order is ",a.jsx("strong",{children:"confirmed"}),", it ",a.jsx("strong",{children:"cannot be canceled"}),", especially if prepaid."]}),a.jsx("li",{children:"Refunds for prepaid items are issued only if the vendor is unable to fulfill the order."}),a.jsxs("li",{children:["CampusCrave is ",a.jsx("strong",{children:"not responsible for product quality issues"}),". Report these to the vendor and through our Discord server."]})]}),a.jsx("h2",{children:"6. Food & Product Quality"}),a.jsxs("p",{children:["CampusCrave does not cook, prepare, or inspect food or products. We are ",a.jsx("strong",{children:"not responsible"})," for freshness, taste, hygiene, or packaging."]}),a.jsx("p",{children:"Report product-related issues in our official Discord server."}),a.jsx("h2",{children:"7. Conduct Expectations"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Treat delivery personnel respectfully."}),a.jsx("li",{children:"Pay promptly and in full."}),a.jsx("li",{children:"Do not engage in fraudulent, abusive, or harassing behavior."})]}),a.jsx("h2",{children:"8. Reporting Issues"}),a.jsxs("p",{children:["All reports regarding products, vendors, or delivery personnel must be submitted via our ",a.jsx("strong",{children:"official Discord server"}),"."]}),a.jsx("p",{children:"We will review each case and take appropriate actions."}),a.jsx("h2",{children:"9. Limitation of Liability"}),a.jsxs("ul",{children:[a.jsx("li",{children:"CampusCrave is not responsible for food or product quality."}),a.jsx("li",{children:"We are not liable for payment disputes, delivery failures, or vendor misrepresentations."})]}),a.jsx("h2",{children:"10. Modifications"}),a.jsx("p",{children:"We reserve the right to update these Terms and Conditions at any time. Updates will be posted on our website, and continued use of the service implies agreement."}),a.jsx("h2",{children:"11. Support & Contact"}),a.jsx("p",{children:"For help or to report an issue, please contact us through our official Discord server:"}),a.jsxs("p",{children:[" ",a.jsx("a",{href:"https://discord.com/invite/kGp6885raj",target:"_blank",rel:"noopener noreferrer",children:"https://discord.com/invite/kGp6885raj"})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex items-center h-5",children:a.jsx("input",{id:"terms",type:"checkbox",className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded",checked:g,onChange:b=>x(b.target.checked)})}),a.jsx("div",{className:"ml-3 text-sm",children:a.jsx("label",{htmlFor:"terms",className:"font-medium text-gray-700",children:"I accept the Terms and Conditions"})})]})]})]}),a.jsx(ED,{}),a.jsx("button",{style:{backgroundColor:"#4a4e69",color:"white"},type:"submit",className:"btn btn-primary w-full",disabled:o,children:o?"Creating account...":"Create Account"}),a.jsxs("div",{className:"relative my-4",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),a.jsxs("button",{type:"button",className:"btn btn-outline w-full flex items-center justify-center gap-2",onClick:R,disabled:o,children:[a.jsx(DE,{className:"text-xl"}),"Sign up with Google"]}),a.jsxs("div",{className:"text-center mt-2",children:[a.jsxs("p",{className:"text-xs text-gray-500",children:["Currently supports: ",E.join(", ")," domains"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A verification email will be sent to your email address."})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx(qr,{to:"/login",className:"text-blue-600 hover:text-blue-500",style:{color:"#414833"},children:"Already have an account? Sign in"})})]})]})]})})}function hv({onAddToCart:t}){const[e,n]=A.useState([]),[r,s]=A.useState(!0),[i,o]=A.useState(""),[c,u]=A.useState(""),[d,f]=A.useState([]),[p,g]=A.useState({customerCancellationTime:10,deliveryPersonCancellationTime:6}),[x,C]=A.useState(!1),[P,j]=A.useState({name:"",description:"",location:"",deliveryCharge:5}),[w,E]=A.useState(!1),[S,D]=A.useState(null),[F,R]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const Y=(await en(Ce(ne,"products"))).docs.map(ue=>({id:ue.id,...ue.data()}));n(Y);const X=[...new Set(Y.map(ue=>ue.category))];f(X);const re=await Gt(_e(ne,"systemSettings","cancellationTimes"));re.exists()&&g(re.data())}catch(q){console.error("Error fetching data:",q),W.error("Failed to load data")}finally{s(!1)}})()},[]);const b=e.filter(M=>{var X;const q=M.name.toLowerCase().includes(i.toLowerCase())||((X=M.description)==null?void 0:X.toLowerCase().includes(i.toLowerCase())),Y=c===""||M.category===c;return q&&Y}),y=M=>{o(M.target.value)},T=M=>{u(M.target.value)},N=()=>{o(""),u("")},I=()=>{C(!x)},k=M=>{const{name:q,value:Y}=M.target;j(X=>({...X,[q]:Y}))},v=M=>{if(M.preventDefault(),!P.name.trim()){W.error("Product name is required");return}const q={id:"custom-"+Date.now(),name:P.name,description:P.description,location:P.location,price:0,deliveryCharge:parseFloat(P.deliveryCharge),isCustomRequest:!0,category:"Custom Request"};t(q),W.success("Custom request added to cart"),j({name:"",description:"",location:"",deliveryCharge:5}),C(!1)},H=M=>{D(M),E(!0),R(!1)},L=()=>{E(!1),D(null),R(!1)},z=()=>{if(!S)return;const M=`${window.location.origin}/product/${S.id}`;navigator.clipboard.writeText(M).then(()=>{R(!0),W.success("Link copied to clipboard!"),setTimeout(()=>R(!1),3e3)}).catch(()=>{W.error("Failed to copy link")})},G=M=>{if(!S)return;const q=`${window.location.origin}/product/${S.id}`,Y=`Check out ${S.name} on our store!`;let X;switch(M){case"whatsapp":X=`https://wa.me/?text=${encodeURIComponent(`${Y} ${q}`)}`;break;case"facebook":X=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(q)}`,console.log("Generated Facebook Share URL:",X);break;case"twitter":X=`https://twitter.com/intent/tweet?text=${encodeURIComponent(Y)}&url=${encodeURIComponent(q)}`;break;case"email":X=`mailto:?subject=${encodeURIComponent(Y)}&body=${encodeURIComponent(`${Y}

${q}`)}`;break;default:return}window.open(X,"_blank","noopener,noreferrer"),L()};return r?a.jsx("div",{className:"text-center",children:"Loading products..."}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[a.jsx("div",{className:"flex-grow",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Search products...",value:i,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-blue-600 pl-10"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),a.jsx("div",{className:"w-full md:w-48",children:a.jsxs("select",{value:c,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-blue-600",children:[a.jsx("option",{value:"",children:"All Categories"}),d.map(M=>a.jsx("option",{value:M,children:M},M))]})}),(i||c)&&a.jsx("button",{onClick:N,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700",children:"Clear Filters"})]}),a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[b.length," ",b.length===1?"product":"products"," found"]}),a.jsxs("div",{className:"mt-4 p-3 rounded-lg border border-[#414833]",children:[a.jsx("h3",{className:"text-sm font-medium text-[#7f4f24]",children:"Order Cancellation Policy"}),a.jsxs("p",{className:"text-sm text-[#333d29] mt-1",children:[" Customers have ",p.customerCancellationTime," minutes to cancel an order after delivery begins"]}),a.jsxs("p",{className:"text-sm text-[#333d29]",children:[" Delivery personnel have ",p.deliveryPersonCancellationTime," minutes to cancel a delivery after pickup"]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsxs("button",{onClick:I,className:"flex items-center px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg transition-colors",children:[x?"Hide Custom Request":"Make Custom Request",a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:x?"M19 9l-7 7-7-7":"M12 4v16m8-8H4"})})]})})]}),x&&a.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg shadow border-2 border-[#c9ada7]",children:[a.jsx("h2",{className:"text-lg font-bold mb-4",children:"Custom Product Request"}),a.jsxs("form",{onSubmit:v,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",id:"name",name:"name",value:P.name,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-600 focus:border-green-600",placeholder:"Enter product name",required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:P.description,onChange:k,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-600 focus:border-green-600",placeholder:"Describe what you need (size, color, brand, etc.)"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Location"}),a.jsx("input",{type:"text",id:"location",name:"location",value:P.location,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-600 focus:border-green-600",placeholder:"Store name or address where to find this product"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"deliveryCharge",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Charge"}),a.jsxs("select",{id:"deliveryCharge",name:"deliveryCharge",value:P.deliveryCharge,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-600 focus:border-green-600",children:[a.jsx("option",{value:"5.00",children:"5.00 - Standard Delivery"}),a.jsx("option",{value:"10.00",children:"10.00 - Express Delivery"}),a.jsx("option",{value:"15.00",children:"15.00 - Priority Delivery"}),a.jsx("option",{value:"25.00",children:"25.00 - Urgent Delivery"}),a.jsx("option",{value:"45.00",children:"45.00 - Same-Day Special Delivery"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a delivery charge option based on your delivery needs"})]}),a.jsxs("div",{className:"mt-4 flex justify-end",children:[a.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 mr-2",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#9a8c98] hover:bg-[#9a8c98] text-white rounded-lg",children:"Add to Cart"})]}),a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[a.jsx("p",{children:"* Required field"}),a.jsx("p",{children:"Note: Product price will be determined by the seller based on the product."})]})]})]}),b.length===0&&!x?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{className:"text-xl font-medium text-gray-600 mt-4",children:"No products found"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search or filter criteria"}),a.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",children:"Request a Custom Product Instead"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(M=>a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow",children:[a.jsx(qr,{to:`/product/${M.id}`,children:a.jsx("img",{src:M.imageUrl,alt:M.name,className:"w-full h-48 object-cover rounded-lg"})}),a.jsxs("div",{className:"mt-4",children:[a.jsx(qr,{to:`/product/${M.id}`,children:a.jsx("h3",{className:"text-lg font-semibold hover:underline",children:M.name})}),a.jsx("p",{className:"text-gray-600",children:M.category}),M.description&&a.jsx("p",{className:"text-gray-600 mt-2 text-sm",children:M.description.length>100?M.description.slice(0,100)+"...":M.description}),a.jsxs("div",{className:"flex justify-between items-center mt-3",children:[a.jsxs("p",{className:"font-bold",style:{color:"#656d4a"},children:["",M.price]}),a.jsxs("div",{className:"text-sm",style:{color:"#656d4a"},children:["Delivery: ",M.deliveryCharge]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{onClick:()=>{t(M),W.success(`${M.name} added to cart`)},className:"btn btn-primary flex-grow",style:{backgroundColor:"#22333b",color:"white"},children:"Add to Cart"}),a.jsx("button",{onClick:()=>H(M),className:"btn w-10 h-10 flex items-center justify-center rounded-lg",style:{backgroundColor:"#4a5759",color:"white"},"aria-label":"Share product",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]})]},M.id))}),w&&S&&a.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full m-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Share Product"}),a.jsx("button",{onClick:L,className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("img",{src:S.imageUrl,alt:S.name,className:"w-16 h-16 object-cover rounded"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:S.name}),a.jsx("p",{className:"text-sm text-gray-600",children:S.category})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("button",{onClick:()=>G("whatsapp"),className:"flex items-center justify-center p-3 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),a.jsxs("button",{onClick:()=>G("facebook"),className:"flex items-center justify-center p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),a.jsxs("button",{onClick:()=>G("twitter"),className:"flex items-center justify-center p-3 bg-blue-400 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.937 4.937 0 004.604 3.417 9.868 9.868 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 002.46-2.548l-.047-.02z"})}),"Twitter"]}),a.jsxs("button",{onClick:()=>G("email"),className:"flex items-center justify-center p-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Or copy link"}),a.jsx("div",{className:"flex",children:a.jsx("button",{onClick:z,className:`flex-grow px-4 py-2 ${F?"bg-green-100 text-green-700 border-green-300":"bg-gray-100 hover:bg-gray-200 text-gray-800"} border rounded-lg transition-colors flex items-center justify-center`,children:F?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy Link"]})})})]})]})})]})}function OD({orderId:t=null,orderLocation:e="",onAssign:n=null,hasMultipleLocations:r=!1,locationsList:s=[]}){const[i,o]=A.useState([]),[c,u]=A.useState([]),[d,f]=A.useState(!0),[p,g]=A.useState(""),{currentUser:x}=Dt(),[C,P]=A.useState(!1),[j,w]=A.useState(.3),E=s.length>0?s:r&&e.includes(",")?e.split(",").map(I=>I.trim()).filter(I=>I!==""):e?[e]:[];A.useEffect(()=>{(async()=>{if(x)try{const k=_e(ne,"users",x.uid),v=await Gt(k);v.exists()&&P(v.data().isAdmin===!0)}catch(k){console.error("Error checking admin status:",k)}})()},[x]),A.useEffect(()=>{(async()=>{try{const k=st(Ce(ne,"deliveryPersons"),Oe("isAvailable","==",!0)),v=Vi(k,H=>{const L=H.docs.map(z=>({id:z.id,...z.data()}));o(L)});if(t)return f(!1),()=>{v()};{const H=st(Ce(ne,"orders"),Oe("status","==","pending")),L=Vi(H,z=>{const G=z.docs.map(M=>({id:M.id,...M.data()}));u(G)});return f(!1),()=>{v(),L()}}}catch(k){console.error("Error fetching data:",k),W.error("Failed to load data"),f(!1)}})()},[t]);const S=(I,k)=>{if(!I||!k)return 0;const v=I.toLowerCase(),H=k.toLowerCase();if(v.includes(H)||H.includes(v)){const X=Math.min(v.length,H.length),re=Math.max(v.length,H.length);return .7+.3*(X/re)}const L=X=>Array.from(new Set(X.toLowerCase().replace(/[^\w\s,]/g,"").split(/[,\s]+/).map(re=>re.trim()).filter(re=>re.length>1))),z=L(I),G=L(k);if(z.length===0||G.length===0)return 0;let M=0;const q=new Set;z.forEach(X=>{if(G.includes(X))M+=1,q.add(X);else for(const re of G)if(!q.has(re)&&(X.includes(re)||re.includes(X))){const ue=Math.min(X.length,re.length),ge=Math.max(X.length,re.length);M+=.5*(ue/ge),q.add(re);break}});const Y=new Set([...z,...G]).size;return Math.min(1,M/Math.max(1,Y))},D=(I,k)=>{if(!I||k.length===0)return 0;const v=k.map(H=>S(I,H));return Math.max(...v)},F=I=>!I||E.length===0?[]:E.map(k=>({location:k,score:S(I,k)})),R=async(I,k,v)=>{var H;try{const L=_e(ne,"orders",I),z=await Gt(L);if(await it(L,{hasActiveDeliveryRequest:!0}),!z.exists()){W.error("Order not found");return}const G=z.data();if(G.deliveryRequestSent){W.error("A delivery request has already been sent for this order");return}const M=G.locations||(G.items&&r?b(G.items):[G.deliveryLocation||G.location||""]);await Mi(Ce(ne,"deliveryRequests"),{orderId:I,deliveryPersonId:k,deliveryPersonEmail:v,orderLocation:G.deliveryLocation||G.location||"",orderLocations:M,orderTotal:G.total||0,orderItems:((H=G.items)==null?void 0:H.length)||0,status:"pending",createdAt:new Date().toISOString(),createdBy:(x==null?void 0:x.uid)||"system",hasMultipleLocations:G.hasMultipleLocations||r||!1}),await it(L,{deliveryRequestSent:!0,lastUpdated:new Date().toISOString(),deliveryPersonRequested:v}),W.success("Delivery request sent successfully"),n&&I===t&&n()}catch(L){console.error("Error sending delivery request:",L),W.error("Failed to send delivery request")}},b=I=>{if(!I||!Array.isArray(I))return[];const k=new Set;return I.forEach(v=>{v.location&&k.add(v.location),v.vendorLocation&&k.add(v.vendorLocation),v.storeLocation&&k.add(v.storeLocation)}),Array.from(k)},y=i.filter(I=>{var z,G;const k=(z=I.email)==null?void 0:z.toLowerCase().includes(p.toLowerCase()),v=(G=I.location)==null?void 0:G.toLowerCase().includes(p.toLowerCase()),H=k||v;if(E.length===0)return H;const L=D(I.location,E);return H&&L>=j}),T=[...y].sort((I,k)=>{if(E.length>0){const v=D(I.location,E);return D(k.location,E)-v}return 0}),N=I=>{if(!I||E.length===0)return"low";const k=D(I,E);return k>=.6?"high":k>=j?"medium":"low"};return d?a.jsx("div",{className:"text-center py-4",children:"Loading delivery personnel..."}):t?a.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm p-3 sm:p-4 mb-4 sm:mb-6 border border-gray-200",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Send Delivery Request"}),a.jsxs("div",{className:"mb-3 sm:mb-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-4 mb-3",children:[a.jsxs("h3",{className:"font-medium text-sm sm:text-base",children:["Available Delivery Personnel (",y.length," of ",i.length,")"]}),a.jsx("div",{className:"w-full sm:w-1/2",children:a.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 w-full",children:[a.jsx("input",{type:"text",placeholder:"Search by email or location...",className:"flex-1 p-2 text-sm border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500",value:p,onChange:I=>g(I.target.value)}),a.jsxs("select",{className:"p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm",value:j,onChange:I=>w(parseFloat(I.target.value)),children:[a.jsx("option",{value:"0.1",children:"Low Match (More options)"}),a.jsx("option",{value:"0.3",children:"Medium Match"}),a.jsx("option",{value:"0.5",children:"High Match (Fewer options)"})]})]})})]}),a.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-md mb-3 sm:mb-4",children:[E.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-blue-700 text-xs sm:text-sm font-medium mb-2",children:["Order Locations (",E.length,"):"]}),a.jsx("ul",{className:"text-blue-700 text-xs sm:text-sm space-y-1 pl-4 sm:pl-5 list-disc",children:E.map((I,k)=>a.jsx("li",{className:"break-words",children:I},k))})]}):a.jsxs("p",{className:"text-blue-700 text-xs sm:text-sm",children:[a.jsx("span",{className:"font-medium",children:"Order Location:"})," Not specified"]}),r&&a.jsxs("p",{className:"text-yellow-700 text-xs sm:text-sm mt-2 sm:mt-3",children:[a.jsx("span",{className:"font-medium",children:"Note:"})," This order contains items from multiple locations. The delivery person will need to pick up from different places."]})]}),T.length===0?a.jsxs("div",{className:"p-3 sm:p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[a.jsx("p",{className:"text-yellow-700 text-sm",children:"No delivery personnel available near these locations right now."}),a.jsx("p",{className:"text-xs sm:text-sm text-yellow-600 mt-1",children:"The order will remain in pending status until assigned."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:T.map(I=>{const k=N(I.location),v=D(I.location,E),H=F(I.location);return a.jsxs("div",{className:`border rounded-lg p-2 sm:p-3 ${k==="high"?"bg-green-50 border-green-200":k==="medium"?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"} hover:bg-opacity-80 transition-colors`,children:[a.jsxs("div",{className:"flex flex-col xs:flex-row justify-between items-start gap-1 sm:gap-2",children:[a.jsxs("div",{className:"w-full xs:w-auto",children:[a.jsx("h4",{className:"font-medium break-all text-sm sm:text-base",children:I.email}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:["Last updated: ",new Date(I.lastUpdated).toLocaleString()]})]}),a.jsxs("div",{className:"flex flex-row xs:flex-col items-start xs:items-end gap-1 mt-1 xs:mt-0 w-full xs:w-auto",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Available"}),a.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium 
                        ${k==="high"?"bg-green-100 text-green-800":k==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[k==="high"?"Excellent match":k==="medium"?"Location match":"Different area"," (",Math.round(v*100),"%)"]})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("h5",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Delivery Person Location:"}),a.jsx("p",{className:"text-xs sm:text-sm mt-0.5 sm:mt-1 break-words",children:I.location})]}),r&&H.length>0&&a.jsxs("div",{className:"mt-2 sm:mt-3 bg-gray-50 p-1.5 sm:p-2 rounded border border-gray-100",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-0.5 sm:mb-1",children:"Location Match Scores:"}),a.jsx("div",{className:"space-y-0.5 sm:space-y-1",children:H.map((L,z)=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"truncate max-w-xs",children:L.location}),a.jsxs("span",{className:L.score>=.6?"text-green-600 font-medium":L.score>=.3?"text-yellow-600":"text-gray-500",children:[Math.round(L.score*100),"%"]})]},z))})]}),a.jsx("button",{className:`mt-2 sm:mt-3 w-full ${k==="high"?"bg-green-500 hover:bg-green-600":k==="medium"?"bg-blue-500 hover:bg-blue-600":"bg-gray-500 hover:bg-gray-600"} text-white py-1.5 sm:py-2 px-3 sm:px-4 rounded-md transition-colors text-xs sm:text-sm`,onClick:()=>R(t,I.id,I.email),children:"Send Request"})]},I.id)})})]})]}):a.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm p-3 sm:p-4 mb-4 sm:mb-6 border border-gray-200",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Search someone available"}),a.jsxs("div",{className:"mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-4 mb-3",children:[a.jsxs("h3",{className:"font-medium text-sm sm:text-base",children:["Available Delivery Personnel (",y.length," of ",i.length,")"]}),a.jsx("div",{className:"w-full sm:w-1/2",children:a.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 w-full",children:[a.jsx("input",{type:"text",placeholder:"Search by email or location...",className:"flex-1 p-2 text-sm border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500",value:p,onChange:I=>g(I.target.value)}),a.jsxs("select",{className:"p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm",value:j,onChange:I=>w(parseFloat(I.target.value)),children:[a.jsx("option",{value:"0.1",children:"Low Match (More options)"}),a.jsx("option",{value:"0.3",children:"Medium Match"}),a.jsx("option",{value:"0.5",children:"High Match (Fewer options)"})]})]})})]}),T.length===0?a.jsxs("p",{className:"text-gray-500 py-2 text-sm",children:["No delivery personnel available",p?" matching your search":""]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:T.map(I=>a.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 bg-gray-50",children:[a.jsxs("div",{className:"flex flex-col xs:flex-row justify-between items-start gap-1 sm:gap-2",children:[a.jsxs("div",{className:"w-full xs:w-auto",children:[a.jsx("h4",{className:"font-medium break-all text-sm sm:text-base",children:I.email}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-0.5 sm:mt-1",children:["Last updated: ",new Date(I.lastUpdated).toLocaleString()]})]}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-1 xs:mt-0",children:"Available"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("h5",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Location:"}),a.jsx("p",{className:"text-xs sm:text-sm mt-0.5 sm:mt-1 break-words",children:I.location})]}),c.length>0&&a.jsxs("div",{className:"mt-2 sm:mt-3",children:[a.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Send Request:"}),a.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 mt-1",children:[c.slice(0,3).map(k=>{if(k.deliveryRequestSent)return null;const v=k.locations||(k.hasMultipleLocations&&k.items?b(k.items):[k.deliveryLocation||k.location||""]),H=D(I.location,v),L=H>=.6?"high":H>=.3?"medium":"low",z=v.length>1;return a.jsxs("button",{onClick:()=>R(k.id,I.id,I.email),className:`${L==="high"?"bg-green-500 hover:bg-green-600":L==="medium"?"bg-blue-500 hover:bg-blue-600":"bg-gray-500 hover:bg-gray-600"} text-white text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded transition-colors flex items-center`,title:`Order ID: ${k.id}
${z?"Multiple Locations":`Location: ${v[0]||"N/A"}`}
Match score: ${Math.round(H*100)}%`,children:[k.id.substring(0,6),"...",L==="high"&&"",z&&a.jsx("span",{className:"ml-1 inline-flex items-center justify-center w-3 h-3 sm:w-4 sm:h-4 bg-yellow-200 text-yellow-800 rounded-full text-xxs",children:v.length})]},k.id)}),c.filter(k=>!k.deliveryRequestSent).length>3&&a.jsxs("span",{className:"text-xs text-gray-500 self-center",children:["+",c.filter(k=>!k.deliveryRequestSent).length-3," more"]})]})]})]},I.id))})]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("h3",{className:"font-medium mb-2 sm:mb-3 text-sm sm:text-base",children:["Pending Orders (",c.length,")"]}),c.length===0?a.jsx("p",{className:"text-gray-500 py-2 text-sm",children:"No pending orders"}):a.jsx("div",{className:"min-w-full inline-block align-middle",children:a.jsx("div",{className:"overflow-hidden border rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xxs sm:text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),a.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xxs sm:text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xxs sm:text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),a.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xxs sm:text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xxs sm:text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-left text-xxs sm:text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(I=>{var H,L,z;const k=I.locations||(I.hasMultipleLocations&&I.items?b(I.items):[I.deliveryLocation||I.location||""]),v=k.length>1;return a.jsxs("tr",{children:[a.jsxs("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 whitespace-nowrap text-xs sm:text-sm",children:[I.id.substring(0,8),"..."]}),a.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm",children:v?a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"truncate max-w-[100px] sm:max-w-[150px]",children:k[0]||"N/A"}),a.jsxs("span",{className:"ml-1 inline-flex items-center justify-center w-4 h-4 sm:w-5 sm:h-5 bg-yellow-100 text-yellow-800 rounded-full text-xxs sm:text-xs font-medium",children:["+",k.length-1]})]}):a.jsx("span",{className:"max-w-[120px] sm:max-w-[200px] truncate",children:k[0]||"N/A"})}),a.jsxs("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm",children:[((H=I.items)==null?void 0:H.length)||0," items"]}),a.jsxs("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm",children:["",((L=I.total)==null?void 0:L.toFixed(2))||"0.00"]}),a.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm",children:I.deliveryRequestSent?a.jsx("span",{className:"inline-flex items-center px-1.5 sm:px-2.5 py-0.5 rounded-full text-xxs sm:text-xs font-medium bg-blue-100 text-blue-800",children:"Request Sent"}):a.jsx("span",{className:"inline-flex items-center px-1.5 sm:px-2.5 py-0.5 rounded-full text-xxs sm:text-xs font-medium bg-yellow-100 text-yellow-800",children:"Needs Delivery"})}),a.jsx("td",{className:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm",children:I.deliveryRequestSent?a.jsxs("span",{className:"text-gray-500 text-xs sm:text-sm",children:["Requested: ",((z=I.deliveryPersonRequested)==null?void 0:z.split("@")[0])||"Unknown"]}):a.jsxs("select",{className:"text-xs sm:text-sm border border-gray-300 rounded p-0.5 sm:p-1 w-full max-w-[150px] sm:max-w-[200px]",onChange:G=>{if(G.target.value){const[M,q]=G.target.value.split("|");R(I.id,M,q)}},defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Send request to..."}),T.map(G=>{const M=I.locations||(I.hasMultipleLocations&&I.items?b(I.items):[I.deliveryLocation||I.location||""]),q=D(G.location,M),Y=Math.round(q*100),X=M.map(re=>{const ue=S(G.location,re);return`${re}: ${Math.round(ue*100)}%`}).join(`
`);return a.jsxs("option",{value:`${G.id}|${G.email}`,title:X,children:[G.email," ",q>=.3?M.length>1?`(${Y}% best)`:`(${Y}%)`:""]},G.id)})]})})]},I.id)})})]})})})]})]})}const OE=({panel:t})=>a.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md shadow-sm space-y-2",children:t?a.jsxs("ul",{className:"list-disc pl-5 text-sm font-medium",children:[a.jsx("li",{className:"font-normal",children:"Delivery persons are strictly prohibited from delivering any orders to university library or labs."}),a.jsx("li",{className:"font-normal",children:"If a delivery is made to any lab or library, actions will be taken against the associated account and persons."})]}):a.jsxs("ul",{className:"list-disc pl-5 text-sm font-medium",children:[a.jsx("li",{className:"font-normal",children:"Do not order food to the library or labs. Bringing any kind of food into labs or library is strictly forbidden."}),a.jsx("li",{className:"font-normal",children:"Actions will be taken against anyone associated with food orders made to labs or library."})]})});function LD({items:t,onRemoveFromCart:e,onClearCart:n}){var F;const[r,s]=A.useState(!1),[i,o]=A.useState(""),[c,u]=A.useState(""),{currentUser:d}=Dt(),[f,p]=A.useState(!1),[g,x]=A.useState(!1),[C,P]=A.useState(null),j=t.reduce((R,b)=>R+b.price*b.quantity,0),w=t.reduce((R,b)=>{const y=b.deliveryCharge||0,T=Math.max(0,b.quantity-1),N=T>0?y*.3*T:0;return R+y+N},0),E=j+w,S=async()=>{if(!i.trim()){W.error("Please provide a contact number");return}if(!c.trim()){W.error("Please provide a delivery location");return}try{s(!0);const R=await Mi(Ce(ne,"orders"),{userId:d.uid,customerEmail:d.email,items:t,subtotal:j,deliveryCharge:w,total:E,status:"pending",customerConfirmed:!1,contactNumber:i.trim(),deliveryLocation:c.trim(),createdAt:new Date().toISOString(),location:c.trim()});W.success("Order placed successfully!"),P(R.id),x(!0),p(!0),s(!1)}catch(R){console.error("Error placing order:",R),W.error("Failed to place order"),s(!1)}},D=()=>{p(!1),o(""),u(""),n()};return a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Cart"}),t.length===0&&!g?a.jsx("p",{className:"text-gray-500",children:"Your cart is empty. If you ordered anything, check its status in the orders."}):a.jsxs(a.Fragment,{children:[!g&&a.jsx("div",{className:"space-y-4",children:t.map(R=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:R.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["",R.price," x ",R.quantity]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Delivery: ",R.deliveryCharge," + ",R.quantity>1?`${((R.deliveryCharge||0)*.3*(R.quantity-1)).toFixed(2)} (extra)`:""]})]}),a.jsx("button",{onClick:()=>e(R.id),className:"text-red-500 hover:text-red-700",children:"Remove"})]},R.id))}),a.jsxs("div",{className:"mt-6 pt-6 border-t space-y-2",children:[!g&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{children:["",j.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Delivery Charges:"}),a.jsxs("span",{children:["",w.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:["",E.toFixed(2)]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"contactNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number *"}),a.jsx("input",{type:"tel",id:"contactNumber",value:i,onChange:R=>o(R.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your contact number",required:!0})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"deliveryLocation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Location *"}),a.jsx("textarea",{id:"deliveryLocation",value:c,onChange:R=>u(R.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your delivery address",rows:"3",required:!0})]}),a.jsx(OE,{}),a.jsx("br",{}),a.jsx("button",{onClick:S,className:"btn btn-primary w-full mt-4",disabled:r,children:r?"Processing...":"Checkout"})]}),g&&f&&a.jsxs("div",{className:"mt-6 pt-6 border-t",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Find Delivery Person"}),a.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"Your order has been placed! You can now request the nearest person to pick it up, or leave it available for someone else to collect. "}),a.jsx(OD,{orderId:C,orderLocation:(F=t[0])==null?void 0:F.location,onAssign:D,hasMultipleLocations:t.length>1,locationsList:t.length>1?t.map(R=>R.location):[]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{onClick:D,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Skip for manual pickup by someone"})})]})]})]})]})}function MD(){const[t,e]=A.useState([]),[n,r]=A.useState(new Date),[s,i]=A.useState(!0),[o,c]=A.useState(5),{currentUser:u}=Dt(),[d,f]=A.useState({}),[p,g]=A.useState(""),[x,C]=A.useState("all"),[P,j]=A.useState("all");A.useEffect(()=>{(async()=>{try{const z=await Gt(_e(ne,"systemSettings","cancellationTimes"));z.exists()&&f(z.data())}catch(z){console.error("Error fetching system settings:",z)}})()},[]),A.useEffect(()=>{const L=setInterval(()=>{r(new Date)},5e3);return()=>clearInterval(L)},[]),A.useEffect(()=>{if(!u)return;i(!0);const L=st(Ce(ne,"orders"),Oe("userId","==",u.uid));try{const z=Vi(L,G=>{const M=G.docs.map(q=>({id:q.id,...q.data()}));e(M),i(!1)},G=>{console.error("Error fetching orders:",G),W.error("Failed to load orders"),i(!1)});return()=>z()}catch(z){console.error("Error setting up orders listener:",z),W.error("Failed to connect to database"),i(!1)}},[u]);const w=A.useCallback(async L=>{try{await it(_e(ne,"orders",L),{customerConfirmed:!0}),W.success("Delivery confirmed")}catch(z){console.error("Error confirming delivery:",z),W.error("Failed to confirm delivery")}},[]),E=A.useCallback(async L=>{try{await it(_e(ne,"orders",L),{status:"pending",deliveryPersonId:null,deliveryStartTime:null,cancelledByCustomer:!0}),W.success("Order cancelled successfully")}catch(z){console.error("Error cancelling order:",z),W.error("Failed to cancel order")}},[]),S=A.useCallback(async L=>{try{await mp(_e(ne,"orders",L)),W.success("Order deleted successfully")}catch(z){console.error("Error deleting order:",z),W.error("Failed to delete order")}},[]),D=L=>{if(!L.deliveryStartTime)return 0;const z=L.deliveryStartTime.toDate?L.deliveryStartTime.toDate():new Date(L.deliveryStartTime),G=n.getTime()-z.getTime(),M=Math.floor(G/1e3),q=d.customerCancellationTime*60;return Math.max(0,q-M)},F=A.useCallback(L=>{const z=Math.floor(L/60),G=L%60;return`${z.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`},[]),R=A.useCallback(L=>L.status==="in_progress"&&D(L)>0,[D]),b=A.useCallback(L=>L.status==="pending"&&!L.deliveryPersonId,[]),y=A.useCallback(L=>{try{return L?typeof L.toDate=="function"?L.toDate().toLocaleString():L.seconds?new Date(L.seconds*1e3).toLocaleString():new Date(L).toLocaleString():"N/A"}catch{return"Invalid Date"}},[]),T=A.useCallback(L=>{try{if(!L)return null;let z;return typeof L.toDate=="function"?z=L.toDate():L.seconds?z=new Date(L.seconds*1e3):z=new Date(L),z}catch{return null}},[]),N=A.useMemo(()=>t.length?t.filter(L=>{const z=p.toLowerCase().trim();if(!z){if(P==="all")return!0;const G=T(L.createdAt);if(!G)return!1;const M=new Date,q=G.getDate(),Y=G.getMonth(),X=G.getFullYear(),re=M.getDate(),ue=M.getMonth(),ge=M.getFullYear();if(P==="today")return q===re&&Y===ue&&X===ge;if(P==="week"){const De=new Date;return De.setDate(M.getDate()-7),G>=De}else if(P==="month")return Y===ue&&X===ge;return!0}return!!((x==="id"||x==="all")&&L.id.toLowerCase().includes(z)||(x==="status"||x==="all")&&L.status.toLowerCase().includes(z)||(x==="items"||x==="all")&&L.items&&L.items.some(G=>G.name.toLowerCase().includes(z)))}):[],[t,p,x,P,T]),I=A.useMemo(()=>N.length?[...N].sort((L,z)=>{var q,Y;if(L.status==="in_progress"&&z.status!=="in_progress")return-1;if(L.status!=="in_progress"&&z.status==="in_progress")return 1;if(L.status==="delivered"&&z.status!=="delivered"&&z.status!=="in_progress")return-1;if(L.status!=="delivered"&&L.status!=="in_progress"&&z.status==="delivered")return 1;const G=((q=L.createdAt)==null?void 0:q.seconds)||0;return(((Y=z.createdAt)==null?void 0:Y.seconds)||0)-G}):[],[N]),k=A.useMemo(()=>I.slice(0,o),[I,o]),v=A.useCallback(()=>{c(L=>L+5)},[]),H=A.useCallback(()=>{g(""),C("all"),j("all"),c(5)},[]);return s&&t.length===0?a.jsx("div",{className:"text-center py-8",children:"Loading your orders..."}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Your Orders"}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("div",{className:"flex-grow",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:p,onChange:L=>g(L.target.value),placeholder:"Search your orders...",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),a.jsx("div",{children:a.jsxs("select",{value:x,onChange:L=>C(L.target.value),className:"w-full sm:w-auto px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All fields"}),a.jsx("option",{value:"id",children:"Order ID"}),a.jsx("option",{value:"status",children:"Status"}),a.jsx("option",{value:"items",children:"Items"})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2",children:[a.jsx("div",{children:a.jsxs("select",{value:P,onChange:L=>j(L.target.value),className:"w-full sm:w-auto px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This week"}),a.jsx("option",{value:"month",children:"This month"})]})}),a.jsxs("div",{className:"text-sm",children:[a.jsx("button",{onClick:H,className:"text-blue-500 hover:text-blue-700 underline",children:"Reset filters"}),a.jsxs("span",{className:"ml-4 text-gray-500",children:[I.length," ",I.length===1?"order":"orders"," found"]})]})]})]}),I.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{className:"text-gray-500 mt-4",children:"No orders found"}),p||P!=="all"?a.jsx("button",{onClick:H,className:"mt-2 text-blue-500 hover:text-blue-700 underline",children:"Clear search filters"}):null]}):a.jsxs(a.Fragment,{children:[k.map(L=>{var q;const z=D(L),G=R(L),M=b(L);return a.jsxs("div",{className:`card p-4 border rounded-lg shadow-sm ${L.status==="in_progress"?"border-blue-500 bg-blue-50":L.status==="delivered"?"border-green-500 bg-green-50":""}`,children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Order ID: ",L.id]}),a.jsxs("p",{className:"text-sm text-black",children:["delivery person email: ",L.deliveryPersonMail]}),a.jsxs("p",{className:"text-sm",children:["Date: ",y(L.createdAt)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold",children:["",((q=L.total)==null?void 0:q.toFixed(2))||"0.00"]}),a.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${L.status==="completed"?"bg-green-100 text-green-800":L.status==="pending"?"bg-yellow-100 text-yellow-800":L.status==="in_progress"?"bg-blue-100 text-blue-800":L.status==="delivered"?"bg-green-100 text-green-800":L.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.status})]})]}),L.status==="in_progress"&&a.jsxs("div",{className:"mt-2 bg-yellow-100 p-2 rounded-md flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"text-yellow-800",children:"Someone picked up your order. If no one calls, you can cancel."}),a.jsx("br",{}),a.jsx("span",{className:"text-pink-700",children:z>0?`Cancel window: ${F(z)}`:"Cancel window expired"})]}),G&&a.jsx("button",{onClick:()=>E(L.id),className:"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded",children:"Cancel Order"})]}),M&&a.jsxs("div",{className:"mt-2 bg-gray-100 p-2 rounded-md flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-800",children:"This order hasn't been picked up yet"}),a.jsx("button",{onClick:()=>S(L.id),className:"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded",children:"Delete Order"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Items:"}),a.jsx("ul",{className:"space-y-2",children:(L.items||[]).map((Y,X)=>a.jsxs("li",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:Y.name}),a.jsxs("span",{children:["x",Y.quantity]})]},X))})]}),L.status==="delivered"&&!L.customerConfirmed&&a.jsx("button",{onClick:()=>w(L.id),className:"btn btn-primary w-full mt-4",children:"Confirm Delivery Received"})]},L.id)}),o<I.length&&a.jsx("div",{className:"text-center pt-4",children:a.jsxs("button",{onClick:v,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:["Load More (",I.length-o," remaining)"]})})]})]})}function VD({isAdmin:t=!1}){const[e,n]=A.useState([]),[r,s]=A.useState([]),{currentUser:i}=Dt(),[o,c]=A.useState(!0),[u,d]=A.useState(5),[f,p]=A.useState(0),[g,x]=A.useState(""),[C,P]=A.useState(window.innerWidth),j=()=>{d(R=>R+5),p(R=>R+5)},w=()=>{d(R=>R-5),p(R=>R-5)};A.useEffect(()=>{const R=()=>{P(window.innerWidth)};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),A.useEffect(()=>{E()},[i,t]),A.useEffect(()=>{if(g.trim()==="")s(e);else{const R=g.toLowerCase(),b=e.filter(y=>y.id.toLowerCase().includes(R)||y.status.toLowerCase().includes(R)||y.deliveryPersonMail&&y.deliveryPersonMail.toLowerCase().includes(R)||y.userId&&y.userId.toLowerCase().includes(R)||F(y.createdAt,C).toLowerCase().includes(R));s(b)}p(0)},[g,e,C]);const E=async()=>{try{let R;t?R=st(Ce(ne,"orders")):R=st(Ce(ne,"orders"),Oe("deliveryPersonId","==",i.uid));const y=(await en(R)).docs.map(T=>({id:T.id,...T.data()}));n(y),s(y)}catch(R){console.error("Error fetching deliveries:",R),W.error("Failed to fetch orders")}finally{c(!1)}},S=async R=>{try{await mp(_e(ne,"orders",R)),n(b=>b.filter(y=>y.id!==R)),W.success("Order deleted successfully")}catch(b){console.error("Error deleting delivery:",b),W.error("Failed to delete order")}},D=R=>{x(R.target.value)},F=(R,b)=>{if(!R)return"N/A";try{let y;return typeof R.toDate=="function"?y=R.toDate():R.seconds?y=new Date(R.seconds*1e3):y=new Date(R),isNaN(y.getTime())?"Invalid Date":b<=480?y.toLocaleDateString(void 0,{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):b<=768?y.toLocaleDateString(void 0,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):y.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0})}catch(y){return console.error("Date formatting error:",y),"Invalid Date"}};return o?a.jsx("div",{children:"Loading deliveries..."}):a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"All Orders (Admin Mode)":"Your Deliveries"}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:t?"Search all orders...":"Search deliveries...",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",value:g,onChange:D}),g&&a.jsx("button",{className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>x(""),children:""})]})}),r.length===0?a.jsx("p",{className:"text-center py-4 text-gray-500",children:t?"No orders found":"No matching deliveries found"}):a.jsxs(a.Fragment,{children:[r.slice(f,f+u).map(R=>a.jsxs("div",{className:"border rounded p-4 mb-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[a.jsxs("div",{className:"mb-2 sm:mb-0",children:[a.jsxs("p",{className:"font-medium",children:["Order #",R.id.slice(0,8)]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",R.status]}),R.deliveryPersonMail&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Delivered by: ",R.deliveryPersonMail]}),t&&R.userId&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Customer ID: ",R.userId.slice(0,8)]}),R.deliveryCharge&&a.jsx("p",{className:"text-sm text-gray-500",children:t?`Delivery Charge:  ${R.deliveryCharge.toFixed(2)}`:`Earnings: ${(R.deliveryCharge*.8).toFixed(2)}`}),R.total&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Total: ",R.total.toFixed(2)]})]}),a.jsxs("p",{className:"text-sm text-gray-500 break-words",children:["Date: ",(()=>{try{return R.createdAt?typeof R.createdAt.toDate=="function"?R.createdAt.toDate().toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):R.createdAt.seconds?new Date(R.createdAt.seconds*1e3).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):new Date(R.createdAt).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"}catch{return"Invalid Date"}})()]})]}),t&&R.items&&R.items.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Items:"}),a.jsx("ul",{className:"text-sm text-gray-600",children:R.items.map((b,y)=>a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:b.name}),a.jsxs("span",{children:["x",b.quantity]})]},y))})]}),t&&a.jsx("div",{className:"mt-3 text-right",children:a.jsx("button",{onClick:()=>S(R.id),className:"bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded",children:"Delete Order"})})]},R.id)),a.jsxs("div",{className:"flex justify-center pt-4",children:[f!==0&&a.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"<-Back"}),a.jsxs("span",{className:"px-4 py-2 text-gray-600",children:[f+1,"-",Math.min(f+u,r.length)," of ",r.length]}),f+u<r.length&&a.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Next->"})]})]})]})}function FD(){const[t,e]=A.useState({total:0,adminFee:0,netEarnings:0,paid:0,pending:0,listedPending:0,nonListedPending:0,completedDeliveries:0,paymentDetails:null}),[n,r]=A.useState({}),[s,i]=A.useState(!0),[o,c]=A.useState("total"),[u,d]=A.useState(new Date().toISOString().substring(0,7)),[f,p]=A.useState(!1),[g,x]=A.useState(!1),[C,P]=A.useState({paymentMethod:"onhand",receiverName:"",phoneNumber:"",transactionId:""}),[j,w]=A.useState([]),{currentUser:E}=Dt();A.useEffect(()=>{E!=null&&E.uid&&S()},[E]);const S=async()=>{try{i(!0);const I=st(Ce(ne,"orders"),Oe("deliveryPersonId","==",E.uid),Oe("status","==","completed")),k=await en(I);let v=0,H=0,L=0,z=0,G=k.docs.length,M=null,q=[],Y=!1;const X={};k.docs.forEach(ue=>{const ge=ue.data();if(ge.deliveryCharge){v+=ge.deliveryCharge;const De=ge.deliveryCharge*.2;if(ge.adminPaymentConfirmed?H+=De:ge.paymentListed?(L+=De,q.push({id:ue.id,...ge}),ge.paymentFormSubmitted&&(Y=!0),!M&&ge.paymentDetails&&(M=ge.paymentDetails)):z+=De,ge.completedAt){const bt=new Date(ge.completedAt.toDate()),Re=bt.toISOString().substring(0,7);X[Re]||(X[Re]={total:0,adminFee:0,netEarnings:0,paid:0,pending:0,listedPending:0,nonListedPending:0,completedDeliveries:0,monthName:bt.toLocaleString("default",{month:"long"}),year:bt.getFullYear()}),X[Re].total+=ge.deliveryCharge,X[Re].adminFee+=De,X[Re].netEarnings+=ge.deliveryCharge-De,X[Re].completedDeliveries+=1,ge.adminPaymentConfirmed?X[Re].paid+=De:ge.paymentListed?X[Re].listedPending+=De:X[Re].nonListedPending+=De,X[Re].pending=X[Re].adminFee-X[Re].paid}}});const re=v*.2;e({total:v,adminFee:re,netEarnings:v-re,paid:H,pending:re-H,listedPending:L,nonListedPending:z,completedDeliveries:G,paymentDetails:M}),w(q),r(X),x(Y)}catch(I){console.error("Error fetching earnings:",I),W.error("Failed to load earnings data")}finally{i(!1)}},D=()=>Object.keys(n).sort().reverse().map(k=>{const{monthName:v,year:H}=n[k];return a.jsxs("option",{value:k,children:[v," ",H]},k)}),F=I=>{d(I.target.value)},R=()=>{p(!0)},b=()=>{p(!1),P({paymentMethod:"onhand",receiverName:"",phoneNumber:"",transactionId:""})},y=I=>{P({...C,[I.target.name]:I.target.value})},T=async I=>{I.preventDefault();try{if(C.paymentMethod==="onhand"&&!C.receiverName){W.error("Please enter the receiver name");return}else if(C.paymentMethod!=="onhand"){if(!C.phoneNumber){W.error("Please enter the phone number");return}if(!C.transactionId){W.error("Please enter the transaction ID");return}}await Mi(Ce(ne,"paymentFormResponses"),{userId:E.uid,userName:E.displayName||E.email,amount:t.listedPending,paymentMethod:C.paymentMethod,receiverName:C.receiverName||null,phoneNumber:C.phoneNumber||null,transactionId:C.transactionId||null,orderIds:j.map(v=>v.id),submittedAt:new Date,status:"pending",read:!1});const k=XR(ne);j.forEach(v=>{const H=_e(ne,"orders",v.id);k.update(H,{paymentFormSubmitted:!0,paymentFormSubmittedAt:new Date})}),await k.commit(),W.success("Payment confirmation submitted successfully"),x(!0),b(),S()}catch(k){console.error("Error submitting payment form:",k),W.error("Failed to submit payment form")}};if(s)return a.jsx("div",{className:"text-center py-4",children:"Loading earnings data..."});const N=o==="monthly"&&n[u]?n[u]:t;return a.jsxs("div",{className:"card p-4",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Delivery Earnings"}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:`px-3 py-1 rounded-md ${o==="total"?"bg-[#758360] text-white":"bg-gray-200"}`,onClick:()=>c("total"),children:"All Time"}),a.jsx("button",{className:`px-3 py-1 rounded-md ${o==="monthly"?"bg-[#758360] text-white":"bg-gray-200"}`,onClick:()=>c("monthly"),children:"Monthly"})]}),o==="monthly"&&a.jsx("select",{className:"border rounded-md p-1",value:u,onChange:F,children:D()})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Completed Deliveries"}),a.jsx("p",{className:"text-2xl font-bold text-gray-700",children:N.completedDeliveries})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-green-800",children:"Total Earned"}),a.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["",N.total.toFixed(2)]})]}),a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-red-800",children:"Admin Fee (20%)"}),a.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["",N.adminFee.toFixed(2)]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-blue-800",children:"Your Net Earnings"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["",N.netEarnings.toFixed(2)]})]})]}),N.listedPending>0?a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-green-800",children:"Payment Listed (Pending Confirmation)"}),a.jsxs("p",{className:"text-xl font-bold text-green-700",children:["",N.listedPending.toFixed(2)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unlisted Pending"}),a.jsxs("p",{className:"font-medium",children:["",N.nonListedPending.toFixed(2)]})]})]}),t.paymentDetails&&a.jsxs("div",{className:"mt-2 p-3 bg-green-100 rounded-md space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"Payment Details:"}),t.paymentDetails.bkashNumber&&a.jsxs("p",{className:"text-sm text-green-700",children:[" bKash: ",t.paymentDetails.bkashNumber]}),t.paymentDetails.nagadNumber&&a.jsxs("p",{className:"text-sm text-green-700",children:[" Nagad: ",t.paymentDetails.nagadNumber]}),t.paymentDetails.rocketNumber&&a.jsxs("p",{className:"text-sm text-green-700",children:["Rocket: ",t.paymentDetails.rocketNumber]}),t.paymentDetails.receiverName&&a.jsxs("p",{className:"text-sm text-green-700",children:["Receiver: ",t.paymentDetails.receiverName]}),t.paymentDetails.note&&a.jsxs("p",{className:"text-sm italic text-green-700",children:["Note: ",t.paymentDetails.note]})]}),g?a.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-md",children:a.jsxs("p",{className:"text-sm font-medium text-blue-800",children:[a.jsx("span",{className:"inline-block animate-pulse mr-2",children:""}),"Payment confirmation submitted. Waiting for admin approval."]})}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-green-600 mt-2",children:"This amount has been marked as a pending payment. Please pay using the provided payment method and confirm your payment by filling out the form. Once your payment is confirmed by the admin, this form will disappear."}),a.jsx("button",{onClick:R,className:"mt-3 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"Confirm Payment Details"})]})]}):a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-yellow-800",children:"Pending Payment to Admin"}),a.jsxs("p",{className:"text-xl font-bold text-yellow-700",children:["",N.pending.toFixed(2)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Already Paid"}),a.jsxs("p",{className:"font-medium",children:["",N.paid.toFixed(2)]})]})]})}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Note: 20% of all delivery charges goes to the admin. Please contact admin for payment arrangements."}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Confirm Payment"}),a.jsxs("form",{onSubmit:T,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Amount Paid:"}),a.jsxs("div",{className:"font-bold text-lg",children:["",t.listedPending.toFixed(2)]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Payment Method:"}),a.jsxs("select",{name:"paymentMethod",className:"w-full p-2 border rounded-md",value:C.paymentMethod,onChange:y,children:[a.jsx("option",{value:"onhand",children:"On Hand"}),a.jsx("option",{value:"bkash",children:"bKash"}),a.jsx("option",{value:"nagad",children:"Nagad"}),a.jsx("option",{value:"rocket",children:"Rocket"})]})]}),C.paymentMethod==="onhand"?a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Receiver Name:"}),a.jsx("input",{type:"text",name:"receiverName",value:C.receiverName,onChange:y,className:"w-full p-2 border rounded-md",placeholder:"Enter receiver's name"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Phone Number:"}),a.jsx("input",{type:"text",name:"phoneNumber",value:C.phoneNumber,onChange:y,className:"w-full p-2 border rounded-md",placeholder:"Enter phone number"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Transaction ID:"}),a.jsx("input",{type:"text",name:"transactionId",value:C.transactionId,onChange:y,className:"w-full p-2 border rounded-md",placeholder:"Enter transaction ID"})]})]}),a.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-md",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"Submit"})]})]})]})})]})}/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$D=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),fv=t=>{const e=$D(t);return e.charAt(0).toUpperCase()+e.slice(1)},LE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),BD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},u)=>A.createElement("svg",{ref:u,...zD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:LE("lucide",s),...!i&&!BD(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,f])=>A.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(qD,{ref:i,iconNode:e,className:LE(`lucide-${UD(fv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=fv(t),n};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mv=hr("circle-alert",WD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ME=hr("circle-check-big",HD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_o=hr("circle-plus",KD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],jl=hr("package",GD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],pv=hr("pen-line",QD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],XD=hr("shopping-bag",YD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Gd=hr("store",JD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],e3=hr("trash-2",ZD);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],n3=hr("truck",t3);function r3({shop:t,refetchShop:e}){var u,d;const[n,r]=A.useState(!1),[s,i]=A.useState({paymentMethod:"bkash",phoneNumber:"",transactionId:""}),o=f=>{i({...s,[f.target.name]:f.target.value})},c=async f=>{f.preventDefault();try{const{paymentMethod:p,phoneNumber:g,transactionId:x}=s;if(!g||!x){W.error("Please fill in all required fields");return}const C=_e(ne,"shops",t.id);await it(C,{"utilityFeePayment.paymentFormSubmitted":!0}),await Mi(Ce(ne,"paymentResponses"),{shopId:t.id,shopName:t.name,paymentMethod:p,phoneNumber:g,transactionId:x,status:"pending",submittedAt:$n()}),e==null||e(),W.success("Payment details submitted successfully"),r(!1)}catch(p){console.error("Error submitting payment:",p),W.error("Failed to submit payment details")}};return t!=null&&t.utilityFeePayment?a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Utility Fee Payment Status"}),a.jsx("span",{className:"text-blue-500",children:"You need to pay the utility fee every month to keep your shop active. If you are no longer managing your shop, you don't need to pay. Approval will be automatically removed."}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Payment Amount:"}),a.jsxs("span",{className:"ml-2 font-semibold",children:["",((u=t.utilityFeePayment.paymentDetails)==null?void 0:u.amount)||0]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${t.utilityFeePayment.adminPaymentConfirmed?"bg-green-100 text-green-800":t.utilityFeePayment.paymentFormSubmitted?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.utilityFeePayment.adminPaymentConfirmed?"confirmed":t.utilityFeePayment.paymentFormSubmitted?"Submitted":"pending"})]}),t.utilityFeePayment.paymentDetails&&a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-700",children:"Payment Methods:"}),t.utilityFeePayment.paymentDetails.bkashNumber&&a.jsxs("p",{className:"text-sm",children:["bKash: ",t.utilityFeePayment.paymentDetails.bkashNumber]}),t.utilityFeePayment.paymentDetails.nagadNumber&&a.jsxs("p",{className:"text-sm",children:["Nagad: ",t.utilityFeePayment.paymentDetails.nagadNumber]}),t.utilityFeePayment.paymentDetails.rocketNumber&&a.jsxs("p",{className:"text-sm",children:["Rocket: ",t.utilityFeePayment.paymentDetails.rocketNumber]}),t.utilityFeePayment.paymentDetails.note&&a.jsxs("p",{className:"text-sm text-gray-600 italic",children:["Note: ",t.utilityFeePayment.paymentDetails.note]})]}),!t.utilityFeePayment.paymentFormSubmitted&&!t.utilityFeePayment.adminPaymentConfirmed&&a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:()=>r(!0),className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Submit Payment Details"})}),t.utilityFeePayment.paymentFormSubmitted&&!t.utilityFeePayment.adminPaymentConfirmed&&a.jsxs("div",{className:"mt-4 flex items-center text-blue-600",children:[a.jsx(ME,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Payment details submitted. Waiting for admin confirmation."})]})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Submit Payment Details"}),a.jsxs("form",{onSubmit:c,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Amount to Pay:"}),a.jsxs("div",{className:"font-bold text-lg",children:["",((d=t.utilityFeePayment.paymentDetails)==null?void 0:d.amount)||0]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Payment Method:"}),a.jsxs("select",{name:"paymentMethod",value:s.paymentMethod,onChange:o,className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"bkash",children:"bKash"}),a.jsx("option",{value:"nagad",children:"Nagad"}),a.jsx("option",{value:"rocket",children:"Rocket"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Phone Number:"}),a.jsx("input",{type:"text",name:"phoneNumber",value:s.phoneNumber,onChange:o,className:"w-full p-2 border rounded-md",placeholder:"Enter your phone number"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"Transaction ID:"}),a.jsx("input",{type:"text",name:"transactionId",value:s.transactionId,onChange:o,className:"w-full p-2 border rounded-md",placeholder:"Enter transaction ID"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-md",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"Submit"})]})]})]})})]}):null}const s3=()=>{const{currentUser:t}=Dt(),[e,n]=A.useState(null),[r,s]=A.useState("myShop"),[i,o]=A.useState(null),[c,u]=A.useState(!0),[d,f]=A.useState(!1),[p,g]=A.useState({name:"",description:"",address:"",phone:"",logo:null,logoUrl:"",banner:null,bannerUrl:"",categories:[],deliveryOptions:{selfDelivery:!0,platformDelivery:!1}}),[x,C]=A.useState(""),[P,j]=A.useState([]),[w,E]=A.useState({name:"",description:"",price:"",category:"",image:null,imageUrl:"",stock:"",deliveryCharge:"",selfDelivery:!0,platformDelivery:!1,location:""}),[S,D]=A.useState(!1),[F,R]=A.useState(null),[b,y]=A.useState({totalProducts:0,pendingApproval:0,totalOrders:0,totalRevenue:0}),[T,N]=A.useState([]),[I,k]=A.useState(new Date);A.useEffect(()=>{const U=setInterval(()=>{k(new Date)},1e3);return()=>clearInterval(U)},[]),A.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{try{const ee=await en(Ce(ne,"orders")),ce=[];let xe=0;ee.forEach(Ot=>{const We=Ot.data(),It=(We.items||[]).filter(ss=>ss.shopId===i.id);It.length>0&&(ce.push({id:Ot.id,...We}),We.status==="completed"&&It.forEach(ss=>{xe+=Number(ss.price)||0}))}),N(ce),y({totalProducts:b.totalProducts,pendingApproval:b.pendingApproval,totalOrders:ce.length,totalRevenue:xe})}catch(ee){console.error("Error fetching shop orders:",ee)}})()});const v=async(U,ee=!1)=>{const ce=ee?"productSubmissions":"products";if(confirm("Are you sure you want to delete this product?"))try{await mp(_e(ne,ce,U)),W.success("Product deleted successfully"),await G(i.id)}catch(Ot){console.error("Error deleting product:",Ot),W.error("Failed to delete product")}};A.useEffect(()=>{z()},[t]),A.useEffect(()=>{if(i&&r==="orders"){H();const U=st(Ce(ne,"orders"),Oe("shopId","==",i.id),Oe("status","in",["pending","in_progress","delivered"])),ee=Vi(U,ce=>{H()});return()=>ee()}},[i,r]);const H=async()=>{if(i)try{const U=st(Ce(ne,"orders"),Oe("shopId","==",i.id),Oe("status","in",["pending","in_progress","delivered"])),ce=(await en(U)).docs.map(xe=>({id:xe.id,...xe.data()}));N(ce)}catch(U){console.error("Error fetching shop orders:",U),W.error("Failed to load shop orders")}},L=async(U,ee)=>{try{const ce=_e(ne,"orders",U),xe={status:ee};ee==="in_progress"&&(xe.deliveryPersonId=t.uid,xe.deliveryStartTime=$n(),xe.selfDelivery=!0),await it(ce,xe),W.success(`Order marked as ${ee}`),H()}catch(ce){console.error("Error updating order:",ce),W.error("Failed to update order status")}},z=async()=>{if(t){u(!0);try{const U=Ce(ne,"shops"),ee=st(U,Oe("ownerId","==",t.uid)),ce=await en(ee);if(!ce.empty){const xe=ce.docs[0].data();o({id:ce.docs[0].id,...xe}),await G(ce.docs[0].id),await M(ce.docs[0].id)}}catch(U){console.error("Error fetching shop data:",U),W.error("Failed to load shop data")}finally{u(!1)}}},G=async U=>{try{const ee=Ce(ne,"products"),ce=Ce(ne,"productSubmissions"),[xe,Ot]=await Promise.all([en(st(ee,Oe("shopId","==",U))),en(st(ce,Oe("shopId","==",U),Oe("status","in",["pending","rejected"])))]),We=[...xe.docs.map(be=>({id:be.id,isSubmission:!1,...be.data()})),...Ot.docs.map(be=>({id:be.id,isSubmission:!0,...be.data()}))];j(We)}catch(ee){console.error("Error fetching products:",ee),W.error("Failed to load products")}},M=async U=>{try{const ee=Ce(ne,"products"),ce=st(ee,Oe("shopId","==",U)),xe=await en(ce),Ot=xe.docs.filter(fr=>fr.data().status==="pending").length,We=Ce(ne,"orders"),be=st(We,Oe("shopId","==",U)),It=await en(be),ss=It.docs.reduce((fr,Qi)=>{const Yi=Qi.data();return Yi.status==="completed"?fr+(Yi.total||0):fr},0);y({totalProducts:xe.docs.length,pendingApproval:Ot,totalOrders:It.docs.length,totalRevenue:ss})}catch(ee){console.error("Error fetching shop statistics:",ee)}},q=U=>{const{name:ee,value:ce,type:xe,checked:Ot,files:We}=U.target;if(xe==="file"){if(We&&We[0]){const be=URL.createObjectURL(We[0]);g(It=>({...It,[ee]:We[0],[`${ee}Url`]:be}))}}else if(xe==="url")g(be=>({...be,[ee]:ce}));else if(ee.startsWith("deliveryOptions.")){const be=ee.split(".")[1];g(It=>({...It,deliveryOptions:{...It.deliveryOptions,[be]:Ot}}))}else g(be=>({...be,[ee]:ce}))},Y=U=>{const{name:ee,value:ce,type:xe,checked:Ot,files:We}=U.target;if(xe==="file"){if(We&&We[0]){const be=URL.createObjectURL(We[0]);E(It=>({...It,[ee]:We[0],[`${ee}Url`]:be}))}}else E(xe==="url"?be=>({...be,[ee]:ce}):xe==="checkbox"?be=>({...be,[ee]:Ot}):be=>({...be,[ee]:ce}))},X=()=>{x.trim()!==""&&(p.categories.includes(x.trim())?W.error("This category already exists"):(g(U=>({...U,categories:[...U.categories,x.trim()]})),C("")))},re=U=>{g(ee=>({...ee,categories:ee.categories.filter(ce=>ce!==U)}))},ue=async()=>{if(!p.name||!p.description||!p.address){W.error("Please fill in all required fields");return}u(!0);try{const U={name:p.name,description:p.description,address:p.address,phone:p.phone,logoUrl:p.logoUrl,bannerUrl:p.bannerUrl,categories:p.categories,deliveryOptions:p.deliveryOptions,ownerId:t.uid,ownerEmail:t.email,status:"pending",createdAt:$n(),updatedAt:$n()},ee=await Mi(Ce(ne,"shops"),U);W.success("Shop created successfully and is pending approval"),o({id:ee.id,...U,status:"pending"}),f(!1)}catch(U){console.error("Error creating shop:",U),W.error("Failed to create shop")}finally{u(!1)}},ge=async()=>{if(!(!i||!i.id)){u(!0);try{let U={name:p.name,description:p.description,address:p.address,phone:p.phone,categories:p.categories,deliveryOptions:p.deliveryOptions,location:w.location,updatedAt:$n(),logoUrl:p.logoUrl,bannerUrl:p.bannerUrl};await it(_e(ne,"shops",i.id),U),o(ee=>({...ee,...U})),W.success("Shop updated successfully"),f(!1)}catch(U){console.error("Error updating shop:",U),W.error("Failed to update shop")}finally{u(!1)}}},De=()=>{i&&(g({name:i.name||"",description:i.description||"",address:i.address||"",phone:i.phone||"",logo:null,logoUrl:i.logoUrl||"",banner:null,bannerUrl:i.bannerUrl||"",categories:i.categories||[],deliveryOptions:i.deliveryOptions||{selfDelivery:!0,platformDelivery:!0}}),f(!0))},bt=async()=>{if(!i||i.status!=="approved"){W.error("Your shop must be approved before adding products");return}if(!w.name||!w.price||!w.category){W.error("Please fill in all required fields");return}u(!0);try{const U={name:w.name,description:w.description,price:parseFloat(w.price),category:w.category,imageUrl:w.imageUrl,stock:parseInt(w.stock)||0,deliveryCharge:parseFloat(w.deliveryCharge)||0,selfDelivery:w.selfDelivery,platformDelivery:w.platformDelivery,shopId:i.id,location:w.location,shopName:i.name,status:"pending",createdAt:$n(),updatedAt:$n()};await Mi(Ce(ne,"productSubmissions"),U),W.success("Product added successfully and is pending approval"),D(!1),E({name:"",description:"",price:"",category:"",image:null,imageUrl:"",stock:"",deliveryCharge:"",selfDelivery:!0,platformDelivery:!1}),await G(i.id),await M(i.id)}catch(U){console.error("Error adding product:",U),W.error("Failed to add product")}finally{u(!1)}},Re=async()=>{if(F){u(!0);try{const U={name:w.name,description:w.description,price:parseFloat(w.price),category:w.category,stock:parseInt(w.stock)||0,imageUrl:w.imageUrl,deliveryCharge:parseFloat(w.deliveryCharge)||0,selfDelivery:w.selfDelivery,platformDelivery:w.platformDelivery,status:"pending",updatedAt:$n()},ee=_e(ne,"products",F.id),ce=_e(ne,"productSubmissions",F.id);(await Gt(ee)).exists()?await it(ee,U):await it(ce,U),W.success("Product updated successfully and is pending approval"),D(!1),R(null),E({name:"",description:"",price:"",category:"",image:null,imageUrl:"",stock:"",location:"",deliveryCharge:"",selfDelivery:!0,platformDelivery:!1}),await G(i.id)}catch(U){console.error("Error updating product:",U),W.error("Failed to update product")}finally{u(!1)}}},$u=U=>{var ee,ce,xe;E({name:U.name||"",description:U.description||"",price:((ee=U.price)==null?void 0:ee.toString())||"",category:U.category||"",location:U.location,imageUrl:U.imageUrl||"",stock:((ce=U.stock)==null?void 0:ce.toString())||"",deliveryCharge:((xe=U.deliveryCharge)==null?void 0:xe.toString())||"",selfDelivery:U.selfDelivery??!0,platformDelivery:U.platformDelivery??!1}),R(U),D(!0)},Bu=()=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:i?"Update Your Shop":"Create Your Shop"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Name*"}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Enter your shop name",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),a.jsx("textarea",{name:"description",value:p.description,onChange:q,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Describe your shop (products, specialties, etc.)",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address*"}),a.jsx("input",{type:"text",name:"address",value:p.address,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Shop address",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsx("input",{type:"tel",name:"phone",value:p.phone,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Contact phone number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Logo URL"}),a.jsx("input",{type:"url",name:"logoUrl",placeholder:"Enter logo image URL",value:p.logoUrl||"",onChange:q,className:"w-full p-2 border border-gray-300 rounded-lg"}),p.logoUrl&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:p.logoUrl,alt:"Shop logo preview",className:"h-20 w-20 object-cover rounded-lg"})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Banner URL"}),a.jsx("input",{type:"url",name:"bannerUrl",placeholder:"Enter banner image URL",value:p.bannerUrl||"",onChange:q,className:"w-full p-2 border border-gray-300 rounded-lg"}),p.bannerUrl&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:p.bannerUrl,alt:"Shop banner preview",className:"h-24 w-full object-cover rounded-lg"})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:p.categories.map((U,ee)=>a.jsxs("div",{className:"bg-[#e9edc9] text-[#656d4a] px-3 py-1 rounded-full text-sm flex items-center",children:[U,a.jsx("button",{type:"button",onClick:()=>re(U),className:"ml-2 text-[#656d4a] hover:text-[#333d29]",children:""})]},ee))}),a.jsxs("div",{className:"flex",children:[a.jsx("input",{type:"text",value:x,onChange:U=>C(U.target.value),className:"flex-grow px-4 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Add a category"}),a.jsx("button",{type:"button",onClick:X,className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-r-lg",children:"Add"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:i?ge:ue,className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg",disabled:c,children:c?"Processing...":i?"Update Shop":"Create Shop"})]})]}),qs=()=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:F?"Update Product":"Add New Product"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name*"}),a.jsx("input",{type:"text",name:"name",value:w.name,onChange:Y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Enter product name",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{name:"description",value:w.description,onChange:Y,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Describe your product"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price*"}),a.jsx("input",{type:"number",name:"price",value:w.price,onChange:Y,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Product price",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Address"}),a.jsx("input",{type:"text",name:"location",value:w.location,onChange:Y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Enter pickup address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category*"}),a.jsxs("select",{name:"category",value:w.category,onChange:Y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",required:!0,children:[a.jsx("option",{value:"",children:"Select a category"}),i.categories.map((U,ee)=>a.jsx("option",{value:U,children:U},ee))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity"}),a.jsx("input",{type:"number",name:"stock",value:w.stock,onChange:Y,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Available quantity"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Charge"}),a.jsx("input",{type:"number",name:"deliveryCharge",value:w.deliveryCharge,onChange:Y,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-olive-600 focus:border-olive-600",placeholder:"Delivery fee"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Image"}),a.jsx("input",{type:"url",name:"imageUrl",value:w.imageUrl,onChange:Y,className:"w-full p-2 border border-gray-300 rounded-lg"}),w.imageUrl&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:w.imageUrl,alt:"Product image preview",className:"h-40 w-40 object-cover rounded-lg"})})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>{D(!1),R(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:F?Re:bt,className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg",disabled:c,children:c?"Processing...":F?"Update Product":"Add Product"})]})]}),Ws=()=>{var U,ee;return a.jsxs("div",{className:"space-y-6",children:[i&&i.status==="pending"&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg flex items-start",children:[a.jsx(mv,{className:"text-yellow-500 mr-3 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-yellow-800",children:"Shop Pending Approval"}),a.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Your shop is currently under review. You'll be able to add products once approved."})]})]}),i&&i.status==="rejected"&&a.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg flex items-start",children:[a.jsx(mv,{className:"text-red-500 mr-3 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-red-800",children:"Shop Approval Rejected"}),a.jsx("p",{className:"text-red-700 text-sm mt-1",children:"Your shop approval was rejected. Please update your shop information and try again."})]})]}),i&&i.status==="approved"&&a.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg flex items-start",children:[a.jsx(ME,{className:"text-green-500 mr-3 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-green-800",children:"Shop Approved"}),a.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Your shop is approved and active. You can now add products and manage your shop."})]})]}),i&&i.utilityFeePayment&&a.jsx(r3,{shop:i,refetchShop:z}),i&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsx("div",{className:"md:w-1/4 mb-4 md:mb-0 md:pr-6",children:i.logoUrl?a.jsx("img",{src:i.logoUrl,alt:i.name,className:"w-32 h-32 object-cover rounded-lg mx-auto md:mx-0"}):a.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center mx-auto md:mx-0",children:a.jsx(Gd,{className:"h-10 w-10 text-gray-400"})})}),a.jsxs("div",{className:"md:w-3/4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:"text-2xl font-bold",children:i.name}),a.jsxs("button",{onClick:De,className:"text-[#656d4a] hover:text-[#414833] flex items-center",children:[a.jsx(pv,{className:"h-4 w-4 mr-1"}),"Edit Shop"]})]}),a.jsx("p",{className:"text-gray-600 mt-2",children:i.description}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Address:"}),a.jsx("p",{className:"text-sm",children:i.address})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Contact:"}),a.jsx("p",{className:"text-sm",children:i.phone||"Not provided"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Status:"}),a.jsx("span",{className:`text-sm px-2 py-0.5 rounded ${i.status==="approved"?"bg-green-100 text-green-800":i.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:i.status==="approved"?"Approved":i.status==="pending"?"Pending Approval":"Rejected"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Delivery Options:"}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[((U=i.deliveryOptions)==null?void 0:U.selfDelivery)&&a.jsx("span",{className:"bg-[#e9edc9] text-[#656d4a] px-2 py-0.5 rounded text-xs",children:"Self-delivery"}),((ee=i.deliveryOptions)==null?void 0:ee.platformDelivery)&&a.jsx("span",{className:"bg-[#e9edc9] text-[#656d4a] px-2 py-0.5 rounded text-xs",children:"Platform delivery"})]})]})]})]})]}),a.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-[#fefae0] p-4 rounded-lg",children:[a.jsx("h4",{className:"text-[#656d4a] text-sm font-medium",children:"Total Products"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:b.totalProducts})]}),a.jsxs("div",{className:"bg-[#fefae0] p-4 rounded-lg",children:[a.jsx("h4",{className:"text-[#656d4a] text-sm font-medium",children:"Pending Approval"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:b.pendingApproval})]}),a.jsxs("div",{className:"bg-[#fefae0] p-4 rounded-lg",children:[a.jsx("h4",{className:"text-[#656d4a] text-sm font-medium",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:b.totalOrders})]}),a.jsxs("div",{className:"bg-[#fefae0] p-4 rounded-lg",children:[a.jsx("h4",{className:"text-[#656d4a] text-sm font-medium",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold mt-1",children:["",b.totalRevenue]})]})]})]}),!i&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:[a.jsx(Gd,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"You don't have a shop yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Create your shop to start selling products and earn money."}),a.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg flex items-center mx-auto",children:[a.jsx(_o,{className:"h-5 w-5 mr-2"}),"Create Your Shop"]})]})]})},Ki=()=>i?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Active Orders for Your Shop"}),T.length===0?a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:[a.jsx(jl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Active Orders"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"There are currently no active orders for your shop."})]}):T.map(U=>a.jsx("div",{className:`bg-white p-6 rounded-lg shadow-md ${U.status==="in_progress"&&U.deliveryPersonId===t.uid?"border-2 border-green-500":""}`,children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[a.jsxs("div",{className:"space-y-3 w-full md:w-2/3",children:[U.status==="in_progress"&&U.deliveryPersonId===t.uid&&a.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium inline-block",children:"You're delivering this order"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Order ID: ",U.id]}),a.jsxs("p",{className:"text-sm text-gray-500 break-words",children:["Date: ",(()=>{try{return U.createdAt?typeof U.createdAt.toDate=="function"?U.createdAt.toDate().toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):U.createdAt.seconds?new Date(delivery.createdAt.seconds*1e3).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):new Date(U.createdAt).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"}catch{return"Invalid Date"}})()]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",a.jsx("span",{className:"font-medium",children:U.status})]}),a.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[a.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Customer Details:"}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-semibold",children:"Contact:"})," ",U.contactNumber||"Not provided"]}),a.jsxs("div",{className:"mt-1",children:[a.jsx("span",{className:"font-semibold text-sm",children:"Delivery Address:"}),a.jsx("p",{className:"text-sm mt-1 whitespace-pre-line",children:U.deliveryLocation||U.location||"Not provided"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Items:"}),a.jsx("ul",{className:"space-y-2",children:(U.items||[]).map((ee,ce)=>a.jsxs("li",{className:"text-sm",children:[ee.name," x",ee.quantity]},ce))})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[U.status==="pending"&&a.jsx("button",{onClick:()=>L(U.id,"in_progress"),className:"btn btn-secondary w-full md:w-40",children:"Self-Deliver"}),U.status==="in_progress"&&U.deliveryPersonId===t.uid&&a.jsx("button",{onClick:()=>L(U.id,"delivered"),className:"btn btn-primary w-full md:w-40",children:"Mark as Delivered"}),U.status==="delivered"&&U.deliveryPersonId===t.uid&&a.jsx("button",{onClick:()=>L(U.id,"completed"),className:"btn btn-green w-full md:w-40",disabled:!U.customerConfirmed,children:"Confirm Delivery"})]})]})},U.id))]}):a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:[a.jsx(Gd,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You need to create a shop before you can view orders."}),a.jsxs("button",{onClick:()=>{s("myShop"),f(!0)},className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg flex items-center mx-auto",children:[a.jsx(_o,{className:"h-5 w-5 mr-2"}),"Create Your Shop"]})]}),Gi=()=>i?a.jsxs("div",{className:"space-y-6",children:[i.status==="approved"&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Your Products"}),a.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg flex items-center",disabled:i.status!=="approved",children:[a.jsx(_o,{className:"h-5 w-5 mr-2"}),"Add New Product"]})]}),P.length===0?a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:[a.jsx(jl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Products Yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:i.status==="approved"?"Start adding products to your shop inventory.":"You can add products once your shop is approved."}),i.status==="approved"&&a.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg flex items-center mx-auto",children:[a.jsx(_o,{className:"h-5 w-5 mr-2"}),"Add First Product"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(U=>{var ee;return a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"relative",children:[U.imageUrl?a.jsx("img",{src:U.imageUrl,alt:U.name,className:"w-full h-48 object-cover rounded-lg"}):a.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:a.jsx(jl,{className:"h-10 w-10 text-gray-400"})}),a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${U.status==="rejected"?"bg-red-100 text-red-800":U.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:U.status==="rejected"?"Rejected":U.status==="pending"?"Pending":"Approved"})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:U.name}),a.jsx("p",{className:"text-gray-600",children:U.category}),U.description&&a.jsx("p",{className:"text-gray-600 mt-2 text-sm line-clamp-3",children:U.description}),U.location&&a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Pickup: ",U.location]}),a.jsxs("div",{className:"flex justify-between items-center mt-3",children:[a.jsxs("p",{className:"font-bold text-[#656d4a]",children:["",(ee=U.price)==null?void 0:ee.toFixed(2)]}),a.jsxs("div",{className:"text-sm text-[#656d4a]",children:["Stock: ",U.stock||"N/A"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[U.selfDelivery&&a.jsxs("span",{className:"bg-[#e9edc9] text-[#656d4a] px-2 py-0.5 rounded text-xs flex items-center",children:[a.jsx(XD,{className:"h-3 w-3 mr-1"}),"Self-delivery"]}),U.platformDelivery&&a.jsxs("span",{className:"bg-[#e9edc9] text-[#656d4a] px-2 py-0.5 rounded text-xs flex items-center",children:[a.jsx(n3,{className:"h-3 w-3 mr-1"}),"Platform delivery"]})]}),a.jsxs("div",{className:"mt-4 flex space-x-2",children:[a.jsxs("button",{onClick:()=>$u(U),className:"flex-1 px-3 py-2 bg-[#d4a373] hover:bg-[#bc6c25] text-white rounded-lg flex items-center justify-center",children:[a.jsx(pv,{className:"h-4 w-4 mr-1"}),"Edit"]}),a.jsx("button",{onClick:()=>{v(U.id,U.isSubmission)},className:"px-3 py-2 border border-red-300 text-red-600 hover:bg-red-50 rounded-lg flex items-center justify-center",children:a.jsx(e3,{className:"h-4 w-4"})})]})]})]},U.id)})})]}):a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:[a.jsx(jl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Shop Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You need to create a shop before adding products."}),a.jsxs("button",{onClick:()=>{s("myShop"),f(!0)},className:"px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg flex items-center mx-auto",children:[a.jsx(_o,{className:"h-5 w-5 mr-2"}),"Create Your Shop"]})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Shop Management"}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex space-x-8",children:[a.jsx("button",{onClick:()=>s("myShop"),className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="myShop"?"border-[#656d4a] text-[#656d4a]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"My Shop"}),a.jsx("button",{onClick:()=>s("products"),className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="products"?"border-[#656d4a] text-[#656d4a]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Products"}),a.jsx("button",{onClick:()=>s("orders"),className:`py-4 px-1 border-b-2 font-medium text-sm ${r==="orders"?"border-[#656d4a] text-[#656d4a]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Orders"})]})}),c?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#656d4a]"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading..."})]}):a.jsx(a.Fragment,{children:d?Bu():S?qs():a.jsxs(a.Fragment,{children:[r==="myShop"&&Ws(),r==="products"&&Gi(),r==="orders"&&Ki()]})})]})};function i3(){const[t,e]=A.useState(!1),[n,r]=A.useState(""),[s,i]=A.useState(!0),[o,c]=A.useState([]),{currentUser:u}=Dt();A.useEffect(()=>{(async()=>{if(u)try{const x=_e(ne,"deliveryPersons",u.uid),C=await Gt(x);if(C.exists()){const P=C.data();e(P.isAvailable||!1),r(P.location||"")}}catch(x){console.error("Error fetching availability status:",x),W.error("Failed to load your availability status")}finally{i(!1)}})()},[u]),A.useEffect(()=>{if(u)try{const g=st(Ce(ne,"deliveryRequests"),Oe("deliveryPersonId","==",u.uid),Oe("status","==","pending")),x=Vi(g,async C=>{const P=C.docs.map(w=>({id:w.id,...w.data()})),j=await Promise.all(P.map(async w=>{try{const E=_e(ne,"orders",w.orderId),S=await Gt(E);if(S.exists()){const D=S.data();return{...w,orderDetails:{location:D.deliveryLocation||D.location||"Unknown",total:D.total||0,items:D.items||[],customer:D.customerEmail||D.customer||"Unknown"}}}return w}catch(E){return console.error("Error fetching order details:",E),w}}));c(j)});return()=>x()}catch(g){console.error("Error setting up requests listener:",g)}},[u]);const d=async()=>{if(u){if(!t&&!n.trim()){W.error("Please set your location before marking yourself as available");return}try{i(!0);const g=_e(ne,"deliveryPersons",u.uid),x=await Gt(g),C=!t,P={isAvailable:C,location:n,email:u.email,lastUpdated:new Date().toISOString()};x.exists()?await it(g,P):await Wc(g,P),e(C),W.success(`You are now ${C?"available":"unavailable"} for deliveries`)}catch(g){console.error("Error updating availability status:",g),W.error("Failed to update your availability status")}finally{i(!1)}}},f=async()=>{if(!(!u||!n.trim()))try{i(!0);const g=_e(ne,"deliveryPersons",u.uid);(await Gt(g)).exists()?await it(g,{location:n,lastUpdated:new Date().toISOString()}):await Wc(g,{isAvailable:!1,location:n,email:u.email,lastUpdated:new Date().toISOString()}),W.success("Your location has been updated")}catch(g){console.error("Error updating location:",g),W.error("Failed to update your location")}finally{i(!1)}},p=async(g,x,C)=>{try{i(!0);const P=_e(ne,"deliveryRequests",g);if(C==="accept"){await it(P,{status:"accepted",respondedAt:new Date().toISOString()});const j=_e(ne,"orders",x);await it(j,{status:"in_progress",deliveryPersonId:u.uid,deliveryPersonMail:u.email,deliveryStartTime:new Date().toISOString(),isMyOrder:!0,hasActiveDeliveryRequest:!1}),W.success("You have accepted the delivery request")}else if(C==="reject"){await it(P,{status:"rejected",respondedAt:new Date().toISOString()});const j=_e(ne,"orders",x);await it(j,{hasActiveDeliveryRequest:!1}),W.success("You have declined the delivery request")}}catch(P){console.error(`Error ${C}ing request:`,P),W.error(`Failed to ${C} the delivery request`)}finally{i(!1)}};return s?a.jsx("div",{className:"text-center py-4",children:"Loading availability status..."}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 border border-gray-200",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Delivery Availability"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:`inline-flex mr-3 items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t?"Available":"Unavailable"}),a.jsx("button",{onClick:d,disabled:s,className:`px-4 py-2 rounded-md text-white text-sm font-medium transition-colors ${t?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:t?"Mark Unavailable":"Mark Available"})]})]}),a.jsx("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded",children:a.jsx("p",{children:"Marking yourself as available is not mandatory. It simply helps customers find you if you're near their order location."})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Current Location"}),a.jsxs("div",{className:"flex",children:[a.jsx("input",{type:"text",id:"location",value:n,onChange:g=>r(g.target.value),placeholder:"Enter your current location",className:"flex-1 p-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"}),a.jsx("button",{onClick:f,disabled:s||!n.trim(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-md font-medium transition-colors disabled:bg-blue-300",children:"Update"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provide details like area, landmark, etc. to help customers find you"})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("h3",{className:"text-md font-semibold mb-3",children:["Delivery Requests (",o.length,")"]}),o.length===0?a.jsx("p",{className:"text-gray-500 italic",children:"No pending delivery requests"}):a.jsx("div",{className:"space-y-4",children:o.map(g=>{var x,C,P,j,w,E;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium",children:["Order #",g.orderId.substring(0,8),"..."]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Requested: ",new Date(g.createdAt).toLocaleString()]})]}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending Request"})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs font-medium text-gray-700",children:"Delivery Location:"}),a.jsx("p",{className:"text-sm",children:((x=g.orderDetails)==null?void 0:x.location)||g.orderLocation||"Not specified"})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs font-medium text-gray-700",children:"Order Total:"}),a.jsxs("p",{className:"text-sm",children:["",((P=(C=g.orderDetails)==null?void 0:C.total)==null?void 0:P.toFixed(2))||((j=g.orderTotal)==null?void 0:j.toFixed(2))||"0.00"]})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-700",children:"Order Items:"}),a.jsxs("p",{className:"text-sm",children:[((E=(w=g.orderDetails)==null?void 0:w.items)==null?void 0:E.length)||g.orderItems||0," items"]})]}),a.jsxs("div",{className:"mt-4 flex space-x-2",children:[a.jsx("button",{onClick:()=>p(g.id,g.orderId,"accept"),disabled:s,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded transition-colors disabled:bg-green-300",children:"Accept"}),a.jsx("button",{onClick:()=>p(g.id,g.orderId,"reject"),disabled:s,className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded transition-colors disabled:bg-red-300",children:"Decline"})]})]},g.id)})})]})]})]})}function o3(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[s,i]=A.useState(""),[o,c]=A.useState(new Date),{currentUser:u}=Dt(),[d,f]=A.useState({deliveryPersonCancellationTime:6}),[p,g]=A.useState("stat"),[x,C]=A.useState(!1),[P,j]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const H=await Gt(_e(ne,"systemSettings","cancellationTimes"));H.exists()&&f(H.data())}catch(H){console.error("Error fetching system settings:",H)}})()},[]),A.useEffect(()=>{const v=setInterval(()=>{c(new Date)},1e3);return()=>clearInterval(v)},[]),A.useEffect(()=>{(async()=>{if(u)try{const H=_e(ne,"users",u.uid),L=await Gt(H);L.exists()?j(L.data().isApproved===!0):j(!1)}catch(H){console.error("Error checking approval status:",H),j(!1)}})()},[u]),A.useEffect(()=>{w();const v=st(Ce(ne,"orders"),Oe("status","in",["pending","in_progress","delivered"])),H=Vi(v,L=>{w()});return()=>H()},[u]);const w=async()=>{try{const v=st(Ce(ne,"orders"),Oe("status","in",["in_progress","delivered"]),Oe("deliveryPersonId","==",u.uid)),H=st(Ce(ne,"orders"),Oe("status","==","pending"),Oe("hasActiveDeliveryRequest","!=",!0)),[L,z]=await Promise.all([en(v),en(H)]),G=L.docs.map(q=>({id:q.id,...q.data(),isMyOrder:!0})),M=z.docs.map(q=>({id:q.id,...q.data(),isMyOrder:!1}));e([...G,...M])}catch(v){console.error("Error fetching orders:",v),W.error("Failed to load orders")}finally{r(!1)}},E=async(v,H)=>{try{const L=_e(ne,"orders",v),z={status:H};H==="in_progress"&&(z.deliveryPersonId=u.uid,z.deliveryPersonMail=u.email,z.deliveryStartTime=$n()),await it(L,z),W.success(`Order marked as ${H}`),w()}catch(L){console.error("Error updating order:",L),W.error("Failed to update order status")}},S=async v=>{try{const H=_e(ne,"orders",v);await it(H,{status:"pending",deliveryPersonId:null,deliveryStartTime:null}),W.success("Delivery canceled successfully"),w()}catch(H){console.error("Error canceling delivery:",H),W.error("Failed to cancel delivery")}},D=v=>{if(!v.deliveryStartTime)return 0;const H=v.deliveryStartTime.toDate?v.deliveryStartTime.toDate():new Date(v.deliveryStartTime),L=o.getTime()-H.getTime(),z=Math.floor(L/1e3),G=d.deliveryPersonCancellationTime*60;return Math.max(0,G-z)},F=v=>{const H=Math.floor(v/60),L=v%60;return`${H.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},R=v=>v.status==="in_progress"&&D(v)>0,y=[...t.filter(v=>{const H=(v.deliveryLocation||v.location||"").toLowerCase(),L=v.id.toLowerCase(),z=s.toLowerCase(),G=(v.items||[]).some(M=>(M.name||"").toLowerCase().includes(z));return L.includes(z)||H.includes(z)||G})].sort((v,H)=>{var L,z;if(v.isMyOrder&&!H.isMyOrder)return-1;if(!v.isMyOrder&&H.isMyOrder)return 1;if(v.isMyOrder&&H.isMyOrder){if(v.status==="in_progress"&&H.status!=="in_progress")return-1;if(v.status!=="in_progress"&&H.status==="in_progress")return 1}return(((L=H.createdAt)==null?void 0:L.seconds)||0)-(((z=v.createdAt)==null?void 0:z.seconds)||0)});if(n)return a.jsx("div",{children:"Loading orders..."});const T=()=>{C(!x)},N=()=>a.jsx(VD,{}),I=()=>a.jsx(FD,{}),k=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Active Orders"}),a.jsx(OE,{panel:!0}),a.jsx("br",{}),a.jsx(i3,{}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"text",placeholder:"Search orders by ID, address or items...",className:"input w-full",value:s,onChange:v=>i(v.target.value)})}),y.length===0?a.jsx("p",{className:"text-gray-500",children:"No orders found"}):y.map(v=>{const H=D(v),L=R(v);return a.jsx("div",{className:`card p-3 sm:p-4 border rounded-lg shadow-sm ${v.isMyOrder&&v.status==="in_progress"?"border-green-500 bg-green-50":""}`,children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4",children:[a.jsxs("div",{className:"space-y-3 w-full",children:[v.isMyOrder&&v.status==="in_progress"&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[a.jsx("div",{className:"bg-green-100 text-green-800 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium inline-block",children:"Your Active Delivery"}),a.jsx("div",{className:`${H>0?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"} px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium`,children:H>0?`Cancel: ${F(H)}`:"Cancel window expired"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs sm:text-sm text-gray-500",children:[a.jsxs("p",{children:["Order ID: ",v.id]}),a.jsxs("p",{children:["Date and time:"," ",a.jsxs("p",{className:"text-sm text-gray-500",children:["Date:"," ",v.createdAt?v.createdAt.toDate?v.createdAt.toDate().toLocaleString():new Date(v.createdAt).toLocaleString():"N/A"]})]}),a.jsxs("p",{children:["Status: ",a.jsx("span",{className:"font-medium",children:v.status})]})]}),v.isMyOrder?a.jsxs("div",{className:"bg-blue-50 p-2 sm:p-3 rounded-md",children:[a.jsx("h3",{className:"font-medium text-blue-800 text-sm mb-1 sm:mb-2",children:"Customer Details:"}),a.jsxs("p",{className:"text-xs sm:text-sm",children:[a.jsx("span",{className:"font-semibold",children:"Contact:"})," ",v.contactNumber||"Not provided"]}),a.jsxs("p",{className:"text-xs sm:text-sm",children:[a.jsx("span",{className:"font-semibold",children:"email:"})," ",v.customerEmail||"Not provided"]}),a.jsx("b",{children:"total food's price: "}),"",v.subtotal,a.jsx("br",{}),a.jsx("b",{children:"delivery cahrge: "}),a.jsxs("span",{className:"text-blue-600",children:["",v.deliveryCharge]}),a.jsx("br",{}),a.jsxs("div",{className:"mt-1",children:[a.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:"Delivery Address:"}),a.jsx("p",{className:"text-xs sm:text-sm mt-1 whitespace-pre-line",children:v.deliveryLocation||v.location||"Not provided"})]})]}):a.jsxs("div",{className:"bg-yellow-50 p-2 sm:p-3 rounded-md",children:[" start delivery to see customer details",a.jsxs("div",{className:"mt-1",children:[a.jsx("b",{children:"total food's price: "}),"",v.subtotal,a.jsx("br",{}),a.jsx("b",{children:"delivery cahrge: "}),a.jsxs("span",{className:"text-blue-600",children:["",v.deliveryCharge]}),a.jsx("br",{}),a.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:"Delivery Address:"}),a.jsx("p",{className:"text-xs sm:text-sm mt-1 whitespace-pre-line",children:v.deliveryLocation||v.location||"Not provided"})]})]}),a.jsxs("div",{className:"mt-3 sm:mt-4",children:[a.jsx("h3",{className:"font-medium text-sm sm:text-base mb-1 sm:mb-2",children:"Items:"}),a.jsx("ul",{className:"space-y-2",children:(v.items||[]).map((z,G)=>a.jsxs("li",{className:"text-xs sm:text-sm",children:[a.jsxs("h5",{className:"text-green-700",children:[z.name," x",z.quantity]}),a.jsx("p",{className:"text-gray-600",children:z.description}),z.location&&a.jsx("div",{className:"mt-1 ml-2 sm:ml-4 text-xs",children:a.jsx("a",{href:z.location,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 break-words",children:z.location})})]},G))})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full lg:w-auto lg:min-w-[140px]",children:[v.status==="pending"&&a.jsx("button",{onClick:()=>E(v.id,"in_progress"),className:"btn btn-secondary w-full text-sm",children:"Start Delivery"}),v.status==="in_progress"&&v.isMyOrder&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>E(v.id,"delivered"),className:"btn btn-primary w-full text-sm",children:"confirm pickup"}),L&&a.jsx("button",{onClick:()=>S(v.id),className:"btn bg-red-500 hover:bg-red-600 text-white w-full text-sm",children:"Cancel pickup"})]}),v.status==="delivered"&&v.isMyOrder&&a.jsx("button",{onClick:()=>E(v.id,"completed"),className:`w-full px-4 py-2 rounded font-medium transition ${v.customerConfirmed?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!v.customerConfirmed,children:"Confirm payment"})]})]})},v.id)})]});return a.jsxs("div",{className:"space-y-8",children:[P?a.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 rounded-lg text-green-800",children:a.jsxs("p",{className:"flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"You are registered as an approved delivery person."]})}):a.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-200 rounded-lg text-yellow-800",children:[a.jsxs("p",{className:"mb-2",children:[a.jsx("strong",{children:"Note:"})," You are not registered.(Not mandatory)"]}),a.jsx("p",{className:"mb-2",children:"To register, please complete the registration form at:"}),a.jsx("a",{href:"https://forms.gle/Qv2gzC5pHnLwt2bp9",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://forms.gle/Qv2gzC5pHnLwt2bp9"}),a.jsx("p",{className:"mt-2 text-sm",children:"Registered delivery persons will get administration tasks later."})]}),a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx("button",{onClick:T,className:"btn bg-[#9db677]",children:x?"Switch to Delivery Panel":"Switch to Shop Management"})}),x?a.jsx(s3,{}):a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"flex space-x-8",children:[a.jsx("button",{onClick:()=>g("stat"),className:`py-4 px-1 border-b-2 font-medium text-sm ${p==="stat"?"border-[#656d4a] text-[#656d4a]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"earnings"}),a.jsx("button",{onClick:()=>g("active"),className:`py-4 px-1 border-b-2 font-medium text-sm ${p==="active"?"border-[#656d4a] text-[#656d4a]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"active orders"}),a.jsx("button",{onClick:()=>g("orders"),className:`py-4 px-1 border-b-2 font-medium text-sm ${p==="orders"?"border-[#656d4a] text-[#656d4a]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"history"})]}),p==="active"&&k(),p==="stat"&&I(),p==="orders"&&N()]})]})}function a3({cartItems:t,onAddToCart:e,onRemoveFromCart:n,onClearCart:r}){const[s,i]=A.useState("products"),[o,c]=A.useState({admin:!1,delivery:!1}),[u,d]=A.useState(!0),{currentUser:f}=Dt();A.useEffect(()=>{(async()=>{if(f)try{const x=_e(ne,"users",f.uid),C=await Gt(x);if(C.exists()){const P=C.data();c({admin:P.admin||!1,delivery:P.delivery||!1})}}catch(x){console.error("Error fetching user roles:",x)}finally{d(!1)}else d(!1)})()},[f]);const p=()=>{switch(s){case"products":return a.jsx(hv,{onAddToCart:e});case"cart":return a.jsx(LD,{items:t,onRemoveFromCart:n,onClearCart:r});case"orders":return a.jsx(MD,{});case"delivery":return a.jsx(o3,{});default:return a.jsx(hv,{onAddToCart:e})}};return u?a.jsx("div",{className:"text-center py-10",children:"Loading..."}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-6 flex justify-between items-center",children:a.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"})}),a.jsx("div",{className:"flex justify-center mb-6 border-b pb-4",children:a.jsxs("div",{className:"flex space-x-8",children:[a.jsxs("button",{onClick:()=>i("products"),className:`flex flex-col items-center p-2 ${s==="products"?"text-[#a98467]":"text-gray-500 hover:text-blue-600"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),a.jsx("span",{className:"mt-1 text-sm",children:"Products"})]}),a.jsxs("button",{onClick:()=>i("cart"),className:`flex flex-col items-center p-2 ${s==="cart"?"text-[#a98467]":"text-gray-500 hover:text-blue-600"}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),t.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:t.length})]}),a.jsx("span",{className:"mt-1 text-sm",children:"Cart"})]}),a.jsxs("button",{onClick:()=>i("orders"),className:`flex flex-col items-center p-2 ${s==="orders"?"text-[#a98467]":"text-gray-500 hover:text-blue-600"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("span",{className:"mt-1 text-sm",children:"Orders"})]}),o.delivery&&a.jsxs("button",{onClick:()=>i("delivery"),className:`flex flex-col items-center p-2 ${s==="delivery"?"text-[#a98467]":"text-gray-500"}`,style:!s==="delivery"?{"--tw-text-opacity":1,color:"#354f52"}:{},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"mt-1 text-sm",children:"Delivery"})]})]})}),a.jsx("div",{className:"mt-6",children:p()})]})}function l3({onAddToCart:t}){const{productId:e}=s4(),n=ns(),[r,s]=A.useState(null),[i,o]=A.useState(!0),[c,u]=A.useState(1),[d,f]=A.useState(!1),[p,g]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const R=await Gt(_e(ne,"products",e));R.exists()?s({id:R.id,...R.data()}):(W.error("Product not found"),n("/"))}catch(R){console.error("Error fetching product:",R),W.error("Failed to load product")}finally{o(!1)}})()},[e,n]);const x=F=>{let R=parseInt(F.target.value,10);isNaN(R)||(R<1?R=1:R>10&&(R=10),u(R))},C=()=>{u(F=>F<10?F+1:10)},P=()=>{c>1&&u(F=>F-1)},j=()=>{if(r&&t)try{const F={id:r.id,name:r.name,price:r.price,imageUrl:r.imageUrl,category:r.category,deliveryCharge:r.deliveryCharge,quantity:c};t(F),W.success(`${r.name} added to cart`)}catch(F){console.error("Error adding to cart:",F),W.error("Failed to add item to cart")}else t||(console.error("onAddToCart function is not available"),W.error("Unable to add to cart. Please try again later."))},w=()=>{f(!0),g(!1)},E=()=>{f(!1),g(!1)},S=()=>{const F=window.location.href;navigator.clipboard.writeText(F).then(()=>{g(!0),W.success("Link copied to clipboard!"),setTimeout(()=>g(!1),3e3)}).catch(()=>{W.error("Failed to copy link")})},D=F=>{const R=window.location.href,b=r?`Check out ${r.name} on our store!`:"Check out this product!";let y;switch(F){case"whatsapp":y=`https://wa.me/?text=${encodeURIComponent(b+" "+R)}`;break;case"facebook":y=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(R)}`;break;case"twitter":y=`https://twitter.com/intent/tweet?text=${encodeURIComponent(b)}&url=${encodeURIComponent(R)}`;break;case"email":y=`mailto:?subject=${encodeURIComponent(b)}&body=${encodeURIComponent(b+`

`+R)}`;break;default:return}window.open(y,"_blank","noopener,noreferrer"),E()};return i?a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#656d4a] border-r-transparent"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading product..."})]})})}):r?a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("br",{}),a.jsx("br",{}),a.jsxs("div",{className:"flex items-center text-base text-gray-800 mb-6 mt-6",children:[a.jsx("button",{onClick:()=>n("/"),className:"hover:text-[#656d4a] font-semibold",children:"Home"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mx-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:a.jsxs("div",{className:"md:flex",children:[a.jsx("div",{className:"md:w-1/2",children:a.jsx("div",{className:"relative h-80 md:h-full",children:a.jsx("img",{src:r.imageUrl,alt:r.name,className:"h-full w-full object-cover object-center"})})}),a.jsxs("div",{className:"p-6 md:p-8 md:w-1/2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),a.jsx("div",{className:"flex items-center mt-1",children:a.jsx("span",{className:"bg-[#e6e8e6] text-[#656d4a] text-xs font-semibold px-2.5 py-0.5 rounded-full",children:r.category})})]}),a.jsx("button",{onClick:w,className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Share product",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-3xl font-bold text-[#656d4a]",children:["",r.price]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Delivery: ",r.deliveryCharge]})]}),a.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.inStock===!1?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:r.inStock===!1?"Out of Stock":"In Stock"})]}),a.jsxs("div",{className:"prose prose-sm mt-4 text-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),a.jsx("p",{children:r.description||"No description available for this product."})]}),r.location&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Location"}),a.jsxs("div",{className:"flex items-center text-gray-700",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsx("a",{href:r.location.startsWith("http")?r.location:`https://www.google.com/maps/search/${encodeURIComponent(r.location)}`,target:"_blank",rel:"noopener noreferrer",className:"break-words text-blue-600 hover:underline",children:r.location})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:P,className:"w-10 h-10 border border-gray-300 rounded-l-lg flex items-center justify-center bg-gray-100 hover:bg-gray-200",disabled:c<=1,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),a.jsx("input",{type:"number",id:"quantity",name:"quantity",className:"w-16 h-10 border-t border-b border-gray-300 text-center focus:outline-none focus:ring-0 focus:border-gray-300",value:c,onChange:x,min:"1",max:"10"}),a.jsx("button",{onClick:C,className:"w-10 h-10 border border-gray-300 rounded-r-lg flex items-center justify-center bg-gray-100 hover:bg-gray-200",disabled:c>=10,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),a.jsxs("button",{onClick:j,disabled:r.inStock===!1,className:`w-full mt-6 py-3 px-6 rounded-lg flex items-center justify-center ${r.inStock===!1?"bg-gray-300 cursor-not-allowed":"bg-[#22333b] hover:bg-[#1a282e] text-white"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),r.inStock===!1?"Out of Stock":"Add to Cart"]})]})]})]})}),d&&a.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full m-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Share Product"}),a.jsx("button",{onClick:E,className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-16 h-16 object-cover rounded"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-600",children:r.category})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("button",{onClick:()=>D("whatsapp"),className:"flex items-center justify-center p-3 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),a.jsxs("button",{onClick:()=>D("facebook"),className:"flex items-center justify-center p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),a.jsxs("button",{onClick:()=>D("twitter"),className:"flex items-center justify-center p-3 bg-blue-400 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.937 4.937 0 004.604 3.417 9.868 9.868 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 002.46-2.548l-.047-.02z"})}),"Twitter"]}),a.jsxs("button",{onClick:()=>D("email"),className:"flex items-center justify-center p-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Or copy link"}),a.jsx("div",{className:"flex",children:a.jsx("button",{onClick:S,className:`flex-grow px-4 py-2 ${p?"bg-green-100 text-green-700 border-green-300":"bg-gray-100 hover:bg-gray-200 text-gray-800"} border rounded-lg transition-colors flex items-center justify-center`,children:p?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy Link"]})})})]})]})})]}):a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-700 mt-4",children:"Product Not Found"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"The product you're looking for doesn't exist or has been removed."}),a.jsx("button",{onClick:()=>n("/"),className:"mt-6 px-4 py-2 bg-[#656d4a] hover:bg-[#414833] text-white rounded-lg transition-colors",children:"Return to Shop"})]})})}function c3(){const[t,e]=A.useState(!1),{currentUser:n,sendVerificationEmail:r,logout:s}=Dt(),i=ns(),o=async()=>{if(!n){W.error("No user is currently logged in");return}try{e(!0),await r(n),W.success("Verification email sent! Please check your inbox.")}catch(u){console.error("Error sending verification email:",u),W.error("Failed to send verification email. Please try again later.")}finally{e(!1)}},c=async()=>{try{await s(),i("/login")}catch(u){console.error("Error signing out:",u),W.error("Failed to sign out.")}};return a.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Email Verification Required"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Please verify your email address to continue using our services."}),a.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["We've sent a verification link to: ",a.jsx("strong",{children:n==null?void 0:n.email})]})]}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx("button",{onClick:o,disabled:t,style:{backgroundColor:"#4a4e69",color:"white"},className:"py-2 px-4 w-full rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t?"Sending...":"Resend Verification Email"}),a.jsx("button",{onClick:c,className:"py-2 px-4 w-full border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign Out"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Attention"}),a.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:a.jsx("p",{children:"If you don't see the verification email, please check your spam or junk folder. The email will be from the Firebase team."})})]})]})})})]})})}function gv({children:t}){const{currentUser:e}=Dt();return e?e.emailVerified?t:a.jsx(mf,{to:"/verify-email"}):a.jsx(mf,{to:"/login"})}function u3(){const[t,e]=A.useState([]),n=i=>{e(o=>o.find(u=>u.id===i.id)?o.map(u=>u.id===i.id?{...u,quantity:u.quantity+(i.quantity||1)}:u):[...o,{...i,quantity:i.quantity||1}])},r=i=>{e(o=>o.filter(c=>c.id!==i))},s=()=>{e([])};return a.jsx(N4,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(wD,{}),a.jsxs(_4,{children:[a.jsx(hs,{path:"/verify-email",element:a.jsx(c3,{})}),a.jsx(hs,{path:"/",element:a.jsx(bD,{})}),a.jsx(hs,{path:"/login",element:a.jsx(RD,{})}),a.jsx(hs,{path:"/register",element:a.jsx(DD,{})}),a.jsx(hs,{path:"/product/:productId",element:a.jsx(gv,{children:a.jsx(l3,{onAddToCart:n})})}),a.jsx(hs,{path:"/dashboard",element:a.jsx(gv,{children:a.jsx(a3,{cartItems:t,onAddToCart:n,onRemoveFromCart:r,onClearCart:s})})})]}),a.jsx(_D,{position:"bottom-right"})]})})}k_(document.getElementById("root")).render(a.jsx(A.StrictMode,{children:a.jsx(Cj,{children:a.jsx(u3,{})})}));
